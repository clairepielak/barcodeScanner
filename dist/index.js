(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var o;(i=>{(s=>(s.Debug="debug",s.Info="info",s.Warn="warn",s.Error="error",s.Quiet="quiet"))(i.Level||(i.Level={}));let e=new Map([["debug",1],["info",2],["warn",3],["error",4],["quiet",5]]),t="debug";function a(s){t=s}i.setLevel=a;function r(s,...n){if(!(e.get(t)>e.get(s)))switch(s){case"debug":console.debug(...n);break;case"info":console.log(...n);break;case"warn":console.warn(...n);break;case"error":console.error(...n);break}}i.log=r})(o||(o={}));var xi=(i=>(i.Auto="auto",i.Off="off",i.On="on",i))(xi||{}),Ii=class{constructor(e){this.overrideThreadsSupport="auto",this.overrideSimdSupport="auto",this.workerCommandId=1,this.workerTasks=new Map,this.workerListeners=[];var t,a;this.libraryLocation=e.libraryLocation,this.isPreloadEngine=(t=e.preloadEngine)!=null?t:!1,this.workerMessageListener=this.onWorkerMessage.bind(this),this.dataCaptureWorker.addEventListener("message",this.workerMessageListener),this.overrideThreadsSupport=e.overrideThreadsSupport,this.overrideSimdSupport=e.overrideSimdSupport,this.verifyResponseHash=e.verifyResponseHash,this.highEndBlurryRecognition=(a=e.highEndBlurryRecognition)!=null?a:!1,typeof e.loadProgressNotifier=="function"&&this.addWorkerListener(r=>{var s;r.type==="loadLibraryProgress"&&((s=e.loadProgressNotifier)==null||s.call(e,r.payload))})}get dataCaptureWorker(){return this._dataCaptureWorker!=null||(this._dataCaptureWorker=void 0),this._dataCaptureWorker}get name(){return"CoreLoader"}static async create(e){var t;let a=new this(e);return await a.workerCommand("setLogLevel",{level:(t=e.logLevel)!=null?t:o.Level.Debug}),await a.load(),a}async load(){var e;try{await this.workerCommand("loadLibrary",{libraryLocation:this.libraryLocation,locationPath:window.location.pathname,referredOrigin:window.location.origin,preloadEngine:this.isPreloadEngine,writableDataPathOverride:(e=localStorage.getItem("scanditWritableDataPathOverride"))!=null?e:void 0,overrideThreadsSupport:this.overrideThreadsSupport,overrideSimdSupport:this.overrideSimdSupport,verifyResponseHash:this.verifyResponseHash})}catch(t){if(t!=null&&typeof t=="object"&&typeof t.error=="string"&&t.error.includes("BlockedIndexedDB"))return await this.terminateDataCaptureWorker(!1),this.dataCaptureWorker.addEventListener("message",this.workerMessageListener),localStorage.setItem("scanditWritableDataPathOverride",`/scandit_sync_folder_${[...crypto.getRandomValues(new Uint32Array(2))].map(a=>a.toString(32)).join("")}`),this.load();throw t}}async workerCommand(e,t,a){return new Promise((r,s)=>{let n=this.workerCommandId++;this.workerTasks.set(n,{resolve:r,reject:s,command:e});let m={...t,command:e,id:n};this.dataCaptureWorker.postMessage(m,a)})}async terminateDataCaptureWorker(e=!0){var t,a;e&&await this.workerCommand("dispose",{}),(t=this._dataCaptureWorker)==null||t.removeEventListener("message",this.workerMessageListener),(a=this._dataCaptureWorker)==null||a.terminate(),this._dataCaptureWorker=void 0}addWorkerListener(e){this.workerListeners.push(e)}removeWorkerListener(e){this.workerListeners.includes(e)&&this.workerListeners.splice(this.workerListeners.indexOf(e),1)}onWorkerMessage(e){let t=e.data;if(t.type==="workerTaskId"&&typeof t.id=="number"){let{id:a,error:r,payload:s}=t,n=this.workerTasks.get(a);r==null?n==null||n.resolve(s):n==null||n.reject(t),this.workerTasks.delete(a)}else for(let a of this.workerListeners)a(t)}},Di=Object.create,_t=Object.defineProperty,Ni=Object.getOwnPropertyDescriptor,Oi=Object.getOwnPropertyNames,Ti=Object.getPrototypeOf,_i=Object.prototype.hasOwnProperty,kt=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),ki=(i,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Oi(e))!_i.call(i,r)&&r!==t&&_t(i,r,{get:()=>e[r],enumerable:!(a=Ni(e,r))||a.enumerable});return i},Rt=(i,e,t)=>(t=i!=null?Di(Ti(i)):{},ki(e||!i||!i.__esModule?_t(t,"default",{value:i,enumerable:!0}):t,i)),ie=class Ft extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Ft.prototype),typeof e.name=="string"&&(this.name=e.name),typeof e.message=="string"&&(this.message=e.message)}};function Ri(i,e=location){return i+=i.endsWith("/")?"":"/",/^https?:\/\//.test(i)?i:(i=i.split("/").filter(t=>t.length>0).join("/"),i=i===""?"/":`/${i}/`,e.protocol==="file:"||e.origin==="null"?`${e.href.split("/").slice(0,-1).join("/")}${i}`:`${e.origin}${i}`)}var Fi=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),ji=()=>(async i=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(i)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));function jt(){return typeof crossOriginIsolated>"u"?!1:crossOriginIsolated}function Bt(){try{return new WebAssembly.Memory({initial:1,maximum:1,shared:!0}).buffer.constructor.name==="SharedArrayBuffer"}catch{return!1}}async function Bi(){return Fi()}async function Pt(){if(!await ji())return!1;let i=null;try{i=new Worker(URL.createObjectURL(new Blob(['postMessage("Worker" in self);'],{type:"text/javascript"})),{name:"nestedWorkerTest"})}catch{return!1}return new Promise(e=>{if(i==null){e(!1);return}i.onmessage=t=>{i==null||i.terminate(),e(t.data)}})}async function Pi(){let i=await Pt();return jt()&&Bt()&&i}function zi(i){console.warn("Reached unexpected case",i)}var Wi={"core.view.loading":"Loading the Scandit SDK...","core.singleImageUploader.title":"Analyze an image from your device.","core.singleImageUploader.button":"Choose an Image","core.camera.recovery":"Tap/click to resume scanning"},Ui='data:image/svg+xml,<svg width="32" height="32" viewBox="0 0 32 32" fill="none"%0A    xmlns="http://www.w3.org/2000/svg">%0A    <rect opacity="0.35" width="32" height="32" rx="16" fill="%23DAE1E7" />%0A<path d="M7.98828 21.082C8.59668 21.082 9.08887 20.5898 9.08887 19.9814C9.08887 19.3662 8.59668 18.8809 7.98828 18.8809C7.37305 18.8809 6.8877 19.3662 6.8877 19.9814C6.8877 20.5898 7.37305 21.082 7.98828 21.082Z" fill="%23F1F5F8" />%0A<path d="M14.3662 21.2188C16.6152 21.2188 18.1807 19.7969 18.1807 17.6914C18.1807 15.8115 16.8408 14.4854 14.9541 14.4854C13.9492 14.4854 13.1426 14.8818 12.7393 15.5176H12.6982L12.9307 12.7764H16.8271C17.3467 12.7764 17.6748 12.4551 17.6748 11.9561C17.6748 11.457 17.3398 11.1357 16.8271 11.1357H12.5C11.7002 11.1357 11.2695 11.4707 11.2012 12.3047L10.9141 15.9209C10.9072 15.9551 10.9072 15.9756 10.9072 16.0029C10.8799 16.5566 11.2012 17.0283 11.8779 17.0283C12.3359 17.0283 12.541 16.9258 12.9443 16.5498C13.293 16.2148 13.7852 15.9619 14.373 15.9619C15.4463 15.9619 16.2119 16.7002 16.2119 17.7393C16.2119 18.8057 15.4395 19.5781 14.3662 19.5781C13.4775 19.5781 12.8965 19.1475 12.541 18.4365C12.3086 18.0674 12.0488 17.9238 11.6387 17.9238C11.1055 17.9238 10.7773 18.2383 10.7773 18.7646C10.7773 19.0107 10.8389 19.2227 10.9414 19.4414C11.4336 20.4873 12.8008 21.2188 14.3662 21.2188Z" fill="%23F1F5F8" />%0A<path d="M19.9307 21.1436C20.2861 21.1436 20.4844 21.0273 20.7578 20.6035L22.1865 18.457H22.2275L23.6836 20.6377C23.9092 20.9795 24.1006 21.1436 24.4902 21.1436C25.0303 21.1436 25.4404 20.8018 25.4404 20.2617C25.4404 20.043 25.3721 19.8516 25.2217 19.6465L23.5195 17.2949L25.1943 15.0596C25.3857 14.8135 25.4609 14.6152 25.4609 14.3691C25.4609 13.8633 25.085 13.5215 24.5244 13.5215C24.1553 13.5215 23.9434 13.6855 23.6768 14.1025L22.3369 16.1465H22.2959L20.9287 14.0889C20.6621 13.665 20.4502 13.5215 20.0469 13.5215C19.5 13.5215 19.0898 13.8975 19.0898 14.3965C19.0898 14.6289 19.1582 14.8271 19.3018 15.0186L21.0107 17.3496L19.2949 19.6465C19.1035 19.8994 19.0283 20.0908 19.0283 20.3301C19.0283 20.8086 19.4043 21.1436 19.9307 21.1436Z" fill="%23F1F5F8" />%0A%0A</svg>%0A',Vi='data:image/svg+xml,<svg width="32" height="32" viewBox="0 0 32 32" fill="none"%0A    xmlns="http://www.w3.org/2000/svg">%0A    <rect opacity="0.35" width="32" height="32" rx="16" fill="%23DAE1E7" />%0A<path d="M12.2881 21.1436C12.8965 21.1436 13.3066 20.7334 13.3066 20.1113V12.1406C13.3066 11.4297 12.8691 10.9854 12.1377 10.9854C11.7139 10.9854 11.3857 11.0469 10.9072 11.375L8.95215 12.7285C8.63086 12.9541 8.50781 13.1865 8.50781 13.501C8.50781 13.9385 8.81543 14.2393 9.23242 14.2393C9.44434 14.2393 9.58789 14.1914 9.7793 14.0547L11.2217 13.0498H11.2627V20.1113C11.2627 20.7334 11.6797 21.1436 12.2881 21.1436ZM16.9023 20.3164C17.2441 20.3164 17.4014 20.1865 17.6816 19.9131L19.3633 18.2451L21.0381 19.9062C21.3184 20.1865 21.4824 20.3164 21.8174 20.3164C22.2617 20.3164 22.6377 19.9746 22.6377 19.5234C22.6377 19.2158 22.4873 19.0176 22.2549 18.7852L20.5254 17.0488L22.2549 15.3057C22.4873 15.0732 22.6377 14.875 22.6377 14.5674C22.6377 14.1162 22.2617 13.7744 21.8174 13.7744C21.4824 13.7744 21.3184 13.9043 21.0381 14.1846L19.3633 15.8457L17.6885 14.1846C17.4082 13.9043 17.251 13.7744 16.9092 13.7744C16.4648 13.7744 16.0889 14.1162 16.0889 14.5674C16.0889 14.8818 16.2393 15.0732 16.4717 15.3057L18.1943 17.0488L16.4717 18.7852C16.2324 19.0244 16.0889 19.2158 16.0889 19.5234C16.0889 19.9814 16.458 20.3164 16.9023 20.3164Z" fill="%23F1F5F8" />%0A%0A</svg>%0A',Gi='data:image/svg+xml,<svg width="32" height="32" viewBox="0 0 32 32" fill="none"%0A    xmlns="http://www.w3.org/2000/svg">%0A    <rect opacity="0.5" width="32" height="32" rx="16" fill="white" />%0A<path d="M7.98828 21.082C8.59668 21.082 9.08887 20.5898 9.08887 19.9814C9.08887 19.3662 8.59668 18.8809 7.98828 18.8809C7.37305 18.8809 6.8877 19.3662 6.8877 19.9814C6.8877 20.5898 7.37305 21.082 7.98828 21.082Z" fill="white" />%0A<path d="M14.3662 21.2188C16.6152 21.2188 18.1807 19.7969 18.1807 17.6914C18.1807 15.8115 16.8408 14.4854 14.9541 14.4854C13.9492 14.4854 13.1426 14.8818 12.7393 15.5176H12.6982L12.9307 12.7764H16.8271C17.3467 12.7764 17.6748 12.4551 17.6748 11.9561C17.6748 11.457 17.3398 11.1357 16.8271 11.1357H12.5C11.7002 11.1357 11.2695 11.4707 11.2012 12.3047L10.9141 15.9209C10.9072 15.9551 10.9072 15.9756 10.9072 16.0029C10.8799 16.5566 11.2012 17.0283 11.8779 17.0283C12.3359 17.0283 12.541 16.9258 12.9443 16.5498C13.293 16.2148 13.7852 15.9619 14.373 15.9619C15.4463 15.9619 16.2119 16.7002 16.2119 17.7393C16.2119 18.8057 15.4395 19.5781 14.3662 19.5781C13.4775 19.5781 12.8965 19.1475 12.541 18.4365C12.3086 18.0674 12.0488 17.9238 11.6387 17.9238C11.1055 17.9238 10.7773 18.2383 10.7773 18.7646C10.7773 19.0107 10.8389 19.2227 10.9414 19.4414C11.4336 20.4873 12.8008 21.2188 14.3662 21.2188Z" fill="white" />%0A<path d="M19.9307 21.1436C20.2861 21.1436 20.4844 21.0273 20.7578 20.6035L22.1865 18.457H22.2275L23.6836 20.6377C23.9092 20.9795 24.1006 21.1436 24.4902 21.1436C25.0303 21.1436 25.4404 20.8018 25.4404 20.2617C25.4404 20.043 25.3721 19.8516 25.2217 19.6465L23.5195 17.2949L25.1943 15.0596C25.3857 14.8135 25.4609 14.6152 25.4609 14.3691C25.4609 13.8633 25.085 13.5215 24.5244 13.5215C24.1553 13.5215 23.9434 13.6855 23.6768 14.1025L22.3369 16.1465H22.2959L20.9287 14.0889C20.6621 13.665 20.4502 13.5215 20.0469 13.5215C19.5 13.5215 19.0898 13.8975 19.0898 14.3965C19.0898 14.6289 19.1582 14.8271 19.3018 15.0186L21.0107 17.3496L19.2949 19.6465C19.1035 19.8994 19.0283 20.0908 19.0283 20.3301C19.0283 20.8086 19.4043 21.1436 19.9307 21.1436Z" fill="white" />%0A%0A</svg>%0A',Ji='data:image/svg+xml,<?xml version="1.0" encoding="UTF-8"?>%0A<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1"%0A    xmlns="http://www.w3.org/2000/svg"%0A    xmlns:xlink="http://www.w3.org/1999/xlink">%0A    <title>Icons / With Shadow / Clicked / Camera Rotate Back</title>%0A    <defs>%0A        <filter x="-106.3%" y="-106.2%" width="312.5%" height="312.5%" filterUnits="objectBoundingBox" id="filter-1">%0A            <feOffset dx="0" dy="0" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>%0A            <feGaussianBlur stdDeviation="4" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>%0A            <feColorMatrix values="0 0 0 0 0.105882353   0 0 0 0 0.125490196   0 0 0 0 0.149019608  0 0 0 0.32 0" type="matrix" in="shadowBlurOuter1" result="shadowMatrixOuter1"></feColorMatrix>%0A            <feMerge>%0A                <feMergeNode in="shadowMatrixOuter1"></feMergeNode>%0A                <feMergeNode in="SourceGraphic"></feMergeNode>%0A            </feMerge>%0A        </filter>%0A    </defs>%0A    <g id="Icons-/-With-Shadow-/-Clicked-/-Camera-Rotate-Back" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">%0A        <rect id="Bg" fill="%23FFFFFF" opacity="0" x="0" y="0" width="24" height="24"></rect>%0A        <g id="camera-rotate" filter="url(%23filter-1)" opacity="0.639999986" transform="translate(12.000000, 12.000000) scale(-1, 1) translate(-12.000000, -12.000000) translate(4.000000, 4.000000)" stroke="%23FFFFFF" stroke-linejoin="round" stroke-width="2">%0A            <polyline id="Path" stroke-linecap="round" transform="translate(4.000000, 14.000000) scale(1, -1) rotate(-360.000000) translate(-4.000000, -14.000000) " points="3 12 5 14 3 16"></polyline>%0A            <circle id="Oval" cx="8" cy="8" r="2"></circle>%0A            <path d="M8,3 L14,3 C15.1045695,3 16,3.8954305 16,5 L16,12 C16,13.1045695 15.1045695,14 14,14 L12,14 L12,14" id="Path-2" stroke-linecap="round" transform="translate(12.000000, 8.500000) scale(1, -1) translate(-12.000000, -8.500000) "></path>%0A            <polyline id="Path" stroke-linecap="round" transform="translate(12.000000, 3.000000) rotate(-180.000000) translate(-12.000000, -3.000000) " points="11 1 13 3 11 5"></polyline>%0A            <path d="M4,14 L2,14 C0.8954305,14 1.3527075e-16,13.1045695 0,12 L0,5 C-1.3527075e-16,3.8954305 0.8954305,3 2,3 L2.5,3 C3.32842712,3 4,2.32842712 4,1.5 C4,0.671572875 4.67157288,1.52179594e-16 5.5,0 L10,0 L10,0" id="Path-2" stroke-linecap="round"></path>%0A        </g>%0A    </g>%0A</svg>%0A',$i='data:image/svg+xml,<svg width="32" height="32" viewBox="0 0 32 32" fill="none"%0A    xmlns="http://www.w3.org/2000/svg">%0A    <rect opacity="0.5" width="32" height="32" rx="16" fill="white" />%0A<path d="M12.2881 21.1436C12.8965 21.1436 13.3066 20.7334 13.3066 20.1113V12.1406C13.3066 11.4297 12.8691 10.9854 12.1377 10.9854C11.7139 10.9854 11.3857 11.0469 10.9072 11.375L8.95215 12.7285C8.63086 12.9541 8.50781 13.1865 8.50781 13.501C8.50781 13.9385 8.81543 14.2393 9.23242 14.2393C9.44434 14.2393 9.58789 14.1914 9.7793 14.0547L11.2217 13.0498H11.2627V20.1113C11.2627 20.7334 11.6797 21.1436 12.2881 21.1436ZM16.9023 20.3164C17.2441 20.3164 17.4014 20.1865 17.6816 19.9131L19.3633 18.2451L21.0381 19.9062C21.3184 20.1865 21.4824 20.3164 21.8174 20.3164C22.2617 20.3164 22.6377 19.9746 22.6377 19.5234C22.6377 19.2158 22.4873 19.0176 22.2549 18.7852L20.5254 17.0488L22.2549 15.3057C22.4873 15.0732 22.6377 14.875 22.6377 14.5674C22.6377 14.1162 22.2617 13.7744 21.8174 13.7744C21.4824 13.7744 21.3184 13.9043 21.0381 14.1846L19.3633 15.8457L17.6885 14.1846C17.4082 13.9043 17.251 13.7744 16.9092 13.7744C16.4648 13.7744 16.0889 14.1162 16.0889 14.5674C16.0889 14.8818 16.2393 15.0732 16.4717 15.3057L18.1943 17.0488L16.4717 18.7852C16.2324 19.0244 16.0889 19.2158 16.0889 19.5234C16.0889 19.9814 16.458 20.3164 16.9023 20.3164Z" fill="white" />%0A%0A</svg>%0A',Hi='data:image/svg+xml,<svg viewBox="0 0 24 24"%0A    xmlns="http://www.w3.org/2000/svg">%0A    <defs>%0A        <filter x="-121.5%" y="-88.9%" width="343%" height="277.8%" filterUnits="objectBoundingBox" id="prefix__a">%0A            <feOffset in="SourceAlpha" result="shadowOffsetOuter1"/>%0A            <feGaussianBlur stdDeviation="4" in="shadowOffsetOuter1" result="shadowBlurOuter1"/>%0A            <feColorMatrix values="0 0 0 0 0.105882353 0 0 0 0 0.125490196 0 0 0 0 0.149019608 0 0 0 0.32 0" in="shadowBlurOuter1" result="shadowMatrixOuter1"/>%0A            <feMerge>%0A                <feMergeNode in="shadowMatrixOuter1"/>%0A                <feMergeNode in="SourceGraphic"/>%0A            </feMerge>%0A        </filter>%0A    </defs>%0A    <g filter="url(%23prefix__a)" opacity=".64" transform="translate(3.742 3)" fill="%23FFF" fill-rule="nonzero">%0A        <path d="M4.223 17.946a.75.75 0 01-.456-.83L5.105 9.75h-3.6a.75.75 0 01-.727-.946l1.183-4.335L.22 2.728a.75.75 0 111.06-1.062l11.668 11.668a.75.75 0 01-1.06 1.06L9.14 11.646l-4.013 6.02a.75.75 0 01-.904.28zM10.838 9.1L2.872 1.135l.159-.58A.75.75 0 013.755 0h5.25a.75.75 0 01.722.959L8.499 5.25h3.505a.75.75 0 01.626 1.167l-1.79 2.684h-.002z"/>%0A    </g>%0A</svg>%0A',Yi='data:image/svg+xml,<?xml version="1.0" encoding="UTF-8"?>%0A<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1"%0A    xmlns="http://www.w3.org/2000/svg"%0A    xmlns:xlink="http://www.w3.org/1999/xlink">%0A    <title>Icons / With Shadow / Normal / Camera Rotate Back</title>%0A    <defs>%0A        <filter x="-106.3%" y="-106.2%" width="312.5%" height="312.5%" filterUnits="objectBoundingBox" id="filter-1">%0A            <feOffset dx="0" dy="0" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>%0A            <feGaussianBlur stdDeviation="4" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>%0A            <feColorMatrix values="0 0 0 0 0.105882353   0 0 0 0 0.125490196   0 0 0 0 0.149019608  0 0 0 0.32 0" type="matrix" in="shadowBlurOuter1" result="shadowMatrixOuter1"></feColorMatrix>%0A            <feMerge>%0A                <feMergeNode in="shadowMatrixOuter1"></feMergeNode>%0A                <feMergeNode in="SourceGraphic"></feMergeNode>%0A            </feMerge>%0A        </filter>%0A    </defs>%0A    <g id="Icons-/-With-Shadow-/-Normal-/-Camera-Rotate-Back" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">%0A        <rect id="Bg" fill="%23FFFFFF" opacity="0" x="0" y="0" width="24" height="24"></rect>%0A        <g id="camera-rotate" filter="url(%23filter-1)" transform="translate(12.000000, 12.000000) scale(-1, 1) translate(-12.000000, -12.000000) translate(4.000000, 4.000000)" stroke="%23FFFFFF" stroke-linejoin="round" stroke-width="2">%0A            <polyline id="Path" stroke-linecap="round" transform="translate(4.000000, 14.000000) scale(1, -1) rotate(-360.000000) translate(-4.000000, -14.000000) " points="3 12 5 14 3 16"></polyline>%0A            <circle id="Oval" cx="8" cy="8" r="2"></circle>%0A            <path d="M8,3 L14,3 C15.1045695,3 16,3.8954305 16,5 L16,12 C16,13.1045695 15.1045695,14 14,14 L12,14 L12,14" id="Path-2" stroke-linecap="round" transform="translate(12.000000, 8.500000) scale(1, -1) translate(-12.000000, -8.500000) "></path>%0A            <polyline id="Path" stroke-linecap="round" transform="translate(12.000000, 3.000000) rotate(-180.000000) translate(-12.000000, -3.000000) " points="11 1 13 3 11 5"></polyline>%0A            <path d="M4,14 L2,14 C0.8954305,14 1.3527075e-16,13.1045695 0,12 L0,5 C-1.3527075e-16,3.8954305 0.8954305,3 2,3 L2.5,3 C3.32842712,3 4,2.32842712 4,1.5 C4,0.671572875 4.67157288,1.52179594e-16 5.5,0 L10,0 L10,0" id="Path-2" stroke-linecap="round"></path>%0A        </g>%0A    </g>%0A</svg>%0A',qi='data:image/svg+xml,<svg viewBox="0 0 24 24"%0A    xmlns="http://www.w3.org/2000/svg">%0A    <defs>%0A        <filter x="-133.3%" y="-88.9%" width="366.6%" height="277.8%" filterUnits="objectBoundingBox" id="prefix__a">%0A            <feOffset in="SourceAlpha" result="shadowOffsetOuter1"/>%0A            <feGaussianBlur stdDeviation="4" in="shadowOffsetOuter1" result="shadowBlurOuter1"/>%0A            <feColorMatrix values="0 0 0 0 0.105882353 0 0 0 0 0.125490196 0 0 0 0 0.149019608 0 0 0 0.32 0" in="shadowBlurOuter1" result="shadowMatrixOuter1"/>%0A            <feMerge>%0A                <feMergeNode in="shadowMatrixOuter1"/>%0A                <feMergeNode in="SourceGraphic"/>%0A            </feMerge>%0A        </filter>%0A    </defs>%0A    <g filter="url(%23prefix__a)" opacity=".64" transform="translate(4.5 3)" fill="%23FFF" fill-rule="nonzero">%0A        <path d="M11.25 5.25H7.745L8.972.956A.75.75 0 008.25 0H3a.75.75 0 00-.724.553l-2.25 8.25a.75.75 0 00.724.947h3.6l-1.338 7.366a.75.75 0 001.363.55l7.5-11.25a.75.75 0 00-.625-1.166z"/>%0A    </g>%0A</svg>%0A',Qi='data:image/svg+xml,<svg viewBox="0 0 24 24"%0A    xmlns="http://www.w3.org/2000/svg">%0A    <defs>%0A        <filter x="-114.3%" y="-88.9%" width="328.6%" height="277.8%" filterUnits="objectBoundingBox" id="prefix__a">%0A            <feOffset in="SourceAlpha" result="shadowOffsetOuter1"/>%0A            <feGaussianBlur stdDeviation="4" in="shadowOffsetOuter1" result="shadowBlurOuter1"/>%0A            <feColorMatrix values="0 0 0 0 0.105882353 0 0 0 0 0.125490196 0 0 0 0 0.149019608 0 0 0 0.32 0" in="shadowBlurOuter1" result="shadowMatrixOuter1"/>%0A            <feMerge>%0A                <feMergeNode in="shadowMatrixOuter1"/>%0A                <feMergeNode in="SourceGraphic"/>%0A            </feMerge>%0A        </filter>%0A    </defs>%0A    <g filter="url(%23prefix__a)" transform="translate(3 3)" fill="%23FFF" fill-rule="nonzero">%0A        <path d="M4.966 17.946a.75.75 0 01-.457-.83L5.848 9.75h-3.6a.75.75 0 01-.727-.946l1.182-4.335-1.74-1.74a.75.75 0 111.06-1.062L13.69 13.334a.75.75 0 01-1.061 1.06l-2.748-2.748-4.012 6.02a.75.75 0 01-.904.28zM11.58 9.1L3.614 1.135l.16-.58A.75.75 0 014.496 0h5.25a.75.75 0 01.722.959L9.242 5.25h3.504a.75.75 0 01.627 1.167l-1.79 2.684h-.002z"/>%0A    </g>%0A</svg>%0A',Zi='data:image/svg+xml,<svg viewBox="0 0 24 24"%0A    xmlns="http://www.w3.org/2000/svg">%0A    <defs>%0A        <filter x="-133.3%" y="-88.9%" width="366.6%" height="277.8%" filterUnits="objectBoundingBox" id="prefix__a">%0A            <feOffset in="SourceAlpha" result="shadowOffsetOuter1"/>%0A            <feGaussianBlur stdDeviation="4" in="shadowOffsetOuter1" result="shadowBlurOuter1"/>%0A            <feColorMatrix values="0 0 0 0 0.105882353 0 0 0 0 0.125490196 0 0 0 0 0.149019608 0 0 0 0.32 0" in="shadowBlurOuter1" result="shadowMatrixOuter1"/>%0A            <feMerge>%0A                <feMergeNode in="shadowMatrixOuter1"/>%0A                <feMergeNode in="SourceGraphic"/>%0A            </feMerge>%0A        </filter>%0A    </defs>%0A    <g filter="url(%23prefix__a)" transform="translate(4.5 3)" fill="%23FFF" fill-rule="nonzero">%0A        <path d="M11.25 5.25H7.745L8.972.956A.75.75 0 008.25 0H3a.75.75 0 00-.724.553l-2.25 8.25a.75.75 0 00.724.947h3.6l-1.338 7.366a.75.75 0 001.363.55l7.5-11.25a.75.75 0 00-.625-1.166z"/>%0A    </g>%0A</svg>%0A',Y={CONTAINER_CLASS_NAME:"scandit-container",PAINTBOARDS_CONTAINER_CLASS_NAME:"scandit-paintboards",PAINTBOARD_CLASS_NAME:"scandit-paintboard",PAINTBOARD_CLASS_NAME_STATE_ON:"scandit-paintboard--camera-on",CONTROLS_CLASS_NAME:"scandit-controls",CONTROL_WIDGET_CLASS_NAME:"scandit-control-widget",MIRRORED_CLASS_NAME:"scandit-mirrored",CAMERA_RECOVERY_CLASS_NAME:"scandit-camera-recovery",ERROR_CLASS_NAME:"scandit-error",HINT_CONTAINER_CLASS_NAME:"scandit-hint-container",HINT_CLASS_NAME:"scandit-hint",SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME:"scandit-single-image-uploader-container",CANVAS_VIDEO_PREVIEW_CLASS_NAME:"scandit-canvas-video-preview",TORCH_SWITCH_CONTROL_CLASS_NAME:"torch",CAMERA_SWITCH_CONTROL_CLASS_NAME:"camera",CAMERA_FOV_SWITCH_CONTROL_CLASS_NAME:"camera-fov",FROZEN_FRAME:"frozen-frame"},S={CONTAINER_CLASS_NAME:Y.CONTAINER_CLASS_NAME,PAINTBOARD_CLASS_NAME:Y.PAINTBOARD_CLASS_NAME,PAINTBOARD_CLASS_NAME_STATE_ON:Y.PAINTBOARD_CLASS_NAME_STATE_ON,CONTROLS_CLASS_NAME:Y.CONTROLS_CLASS_NAME,CONTROL_WIDGET_CLASS_NAME:Y.CONTROL_WIDGET_CLASS_NAME,MIRRORED_CLASS_NAME:Y.MIRRORED_CLASS_NAME,CAMERA_RECOVERY_CLASS_NAME:Y.CAMERA_RECOVERY_CLASS_NAME,ERROR_CLASS_NAME:Y.ERROR_CLASS_NAME,HINT_CONTAINER_CLASS_NAME:Y.HINT_CONTAINER_CLASS_NAME,HINT_CLASS_NAME:Y.HINT_CLASS_NAME,PAINTBOARDS_CONTAINER_CLASS_NAME:Y.PAINTBOARDS_CONTAINER_CLASS_NAME,SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME:Y.SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME,CANVAS_VIDEO_PREVIEW_CLASS_NAME:Y.CANVAS_VIDEO_PREVIEW_CLASS_NAME,TORCH_SWITCH_CONTROL_CLASS_NAME:Y.TORCH_SWITCH_CONTROL_CLASS_NAME,CAMERA_SWITCH_CONTROL_CLASS_NAME:Y.CAMERA_SWITCH_CONTROL_CLASS_NAME,CAMERA_FOV_SWITCH_CONTROL_CLASS_NAME:Y.CAMERA_FOV_SWITCH_CONTROL_CLASS_NAME,FROZEN_FRAME:Y.FROZEN_FRAME},pt=class{toJSONObject(){return{type:this.type}}},Ki=class extends pt{constructor(){super(...arguments),this.type="torch",this.view=null,this.icon={on:{idle:Zi,pressed:qi},off:{idle:Qi,pressed:Hi}}}get torchOffImage(){return this.icon.off.idle}set torchOffImage(e){var t;this.icon.off.idle=e,(t=this.view)==null||t.controlsUpdated()}get torchOffPressedImage(){return this.icon.off.pressed}set torchOffPressedImage(e){var t;this.icon.off.pressed=e,(t=this.view)==null||t.controlsUpdated()}get torchOnImage(){return this.icon.on.idle}set torchOnImage(e){var t;this.icon.on.idle=e,(t=this.view)==null||t.controlsUpdated()}get torchOnPressedImage(){return this.icon.on.pressed}set torchOnPressedImage(e){var t;this.icon.on.pressed=e,(t=this.view)==null||t.controlsUpdated()}};Ki.CLASS_NAME=S.TORCH_SWITCH_CONTROL_CLASS_NAME;var zt=class extends pt{constructor(){super(...arguments),this.type="camera",this.view=null,this.icon={idle:Yi,pressed:Ji}}get idleImage(){return this.icon.idle}set idleImage(e){var t;this.icon.idle=e,(t=this.view)==null||t.controlsUpdated()}get pressedImage(){return this.icon.pressed}set pressedImage(e){var t;this.icon.pressed=e,(t=this.view)==null||t.controlsUpdated()}};zt.CLASS_NAME=S.CAMERA_SWITCH_CONTROL_CLASS_NAME;var Xi=class extends pt{constructor(){super(...arguments),this.type="camera-fov",this.view=null,this.icon={wide:{idle:$i,pressed:Vi},ultraWide:{idle:Gi,pressed:Ui}}}get cameraFOVUltraWideImage(){return this.icon.ultraWide.idle}set cameraFOVUltraWideImage(e){var t;this.icon.ultraWide.idle=e,(t=this.view)==null||t.controlsUpdated()}get cameraFOVUltraWidePressedImage(){return this.icon.ultraWide.pressed}set cameraFOVUltraWidePressedImage(e){var t;this.icon.ultraWide.pressed=e,(t=this.view)==null||t.controlsUpdated()}get cameraFOVWideImage(){return this.icon.wide.idle}set cameraFOVWideImage(e){var t;this.icon.wide.idle=e,(t=this.view)==null||t.controlsUpdated()}get cameraFOVWidePressedImage(){return this.icon.wide.pressed}set cameraFOVWidePressedImage(e){var t;this.icon.wide.pressed=e,(t=this.view)==null||t.controlsUpdated()}};Xi.CLASS_NAME=S.CAMERA_FOV_SWITCH_CONTROL_CLASS_NAME;var ea="PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNTQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTU4IDEwSDI4LjZMMjIuOS41QTEgMSAwIDAgMCAyMiAwSDJhMiAyIDAgMCAwLTIgMnY0NmE2IDYgMCAwIDAgNiA2aDQ4YTYgNiAwIDAgMCA2LTZWMTJhMiAyIDAgMCAwLTItMlptLTM3LjUgOGE0LjUgNC41IDAgMSAxIDAgOSA0LjUgNC41IDAgMCAxIDAtOVptMjcuNCAyNy41YTEgMSAwIDAgMS0uOS41SDEzYTEgMSAwIDAgMS0uOC0xLjVsNy0xMWExIDEgMCAwIDEgMS42LS4xbDUgNiA5LjQtMTVhMSAxIDAgMCAxIDEuMy0uM2wuNC40IDExIDIwYTEgMSAwIDAgMSAwIDFaIi8+PC9zdmc+",ta="PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNjQuNjIgMTIuMjIiPjxwYXRoIGQ9Ik0xMDEuNTUuOTFhMi4yOCAyLjI4IDAgMCAwLTEuOTcgMS43MSAyLjcyIDIuNzIgMCAwIDAgMCAxLjExIDIuNDIgMi40MiAwIDAgMCAxLjI0IDEuNTRjLjQ2LjIzLjUuMjQgMS43OS4yNmwxLjE1LjAyLjIyLjFhMS41MSAxLjUxIDAgMCAxIC44IDEuNyAxLjQxIDEuNDEgMCAwIDEtMS4wNiAxLjA4Yy0uMTIuMDMtLjguMDQtMi4wOS4wNGE3Ljc0IDcuNzQgMCAwIDAtMS45My4wNSAzLjE5IDMuMTkgMCAwIDAgLjAxLjc3IDE0LjY5IDE0LjY5IDAgMCAwIDIuMS4wM2wyLjA4LS4wMS4yNi0uMWEyLjI3IDIuMjcgMCAwIDAgMS41LTEuNzQgMi41NSAyLjU1IDAgMCAwLS4wOC0xLjIgMi40IDIuNCAwIDAgMC0xLjE0LTEuMzZjLS40Ni0uMjItLjU1LS4yMy0xLjY1LS4yMy0xLjMyIDAtMS41My0uMDYtMS45NS0uNDdhMS40OCAxLjQ4IDAgMCAxLS40NS0uOTQgMS40MyAxLjQzIDAgMCAxIC45NC0xLjRjLjItLjA4LjItLjA4IDIuMDktLjFsMS45LS4wMXYtLjQxYy4wMi0uMzEgMC0uNDItLjAyLS40NC0uMDYtLjA0LTMuNDMtLjAzLTMuNzQgMFptMjAuMDIuMTFjLS4zNCAxLjI0LTIuMiA4LjI3LTIuMTkgOC4yOGExLjg2IDEuODYgMCAwIDAgLjQ0LjAzYy4zOCAwIC40MyAwIC40NC0uMDZsMS0zLjcyLjk4LTMuNyAxIDMuNjcgMSAzLjc1YzAgLjAzLjA2LjA2LjQ1LjA2aC40NWwtLjAyLS4xYy0uMDQtLjE1LTIuMTMtOC0yLjE5LTguMThsLS4wNS0uMTdoLTEuMjdsLS4wNC4xNFptOC4yMyA0LjA4VjkuM2guODNsLjAyLTMuNzcuMDEtMy43NyAyLjIgMy43NyAyLjIgMy43Ny41Mi4wMS41Mi4wMVY1LjEyTDEzNi4wOS45aC0uODZsLS4wMiAzLjQzLS4wMiAzLjQ0LTIuMDItMy40NEwxMzEuMTYuOWwtLjY5LS4wMWgtLjY4Wk0xNTIuNzkuOTNjLS4wMy4wNy0uMDMgOC4yOCAwIDguMzUuMDEuMDQuMDguMDUuNDMuMDVoLjRWLjg4aC0uNGMtLjM1IDAtLjQyLjAxLS40My4wNVptNS4yMi4zNnYuNDJoMi44NHYzLjhsLjAyIDMuOGguMzhhMS4wNSAxLjA1IDAgMCAwIC40Mi0uMDJjLjA0LS4wNC4wNC0uNjMuMDQtMy44MVYxLjdoMi44Vi44OGgtNi41Wk0xMTEuODUuOTZhMy4yNyAzLjI3IDAgMCAwLTIuMDQgMS42NCA0Ljk4IDQuOTggMCAwIDAtLjU1IDEuNzkgOC4yNCA4LjI0IDAgMCAwIC4wOCAyLjA2IDMuMzUgMy4zNSAwIDAgMCAyLjI4IDIuNzkgNy44NSA3Ljg1IDAgMCAwIDIuMS4wN2gxLjgzbC4wMS0uNDIuMDEtLjQyaC0xLjcxYy0xLjkgMC0xLjk0IDAtMi4zNS0uMjFhMi44NSAyLjg1IDAgMCAxLTEuMzUtMi4xIDcuMTcgNy4xNyAwIDAgMS0uMDMtMS43NyAzLjA4IDMuMDggMCAwIDEgMS43LTIuNTNjLjE4LS4wNy4yMS0uMDcgMS45NC0uMWgxLjc1Vi45MmgtMS43NGExNS45NyAxNS45NyAwIDAgMC0xLjkzLjA0Wm0yOS41NyA0LjE1djQuMmwxLjguMDFhOS41NiA5LjU2IDAgMCAwIDIuNjQtLjEzYzEuNTgtLjQ1IDIuNDktMi4xIDIuNDEtNC4zOGE0LjMxIDQuMzEgMCAwIDAtLjQzLTEuODYgMy43NiAzLjc2IDAgMCAwLTEuODctMS44NGMtLjUtLjE5LS41OC0uMi0yLjY2LS4yaC0xLjl2NC4yWm0zLjc5LTMuM2EyLjgxIDIuODEgMCAwIDEgMi4wNCAyLjA1IDMuNDkgMy40OSAwIDAgMSAuMTYgMS4zNkE0LjQ4IDQuNDggMCAwIDEgMTQ3IDcuMWEyLjIzIDIuMjMgMCAwIDEtMS4wNSAxLjEzYy0uNDUuMjItLjQ2LjIyLTIuMTUuMjRoLTEuNTN2LTYuN2gxLjM2Yy44IDAgMS40NS4wMiAxLjU4LjA0WiIgZmlsbD0iIzEyMTYxOSIgc3Ryb2tlPSIjMTIxNjE5IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iLjIiLz48cGF0aCBkPSJNNS45IDIuOTRoMS4xN2EzLjI3IDMuMjcgMCAwIDAtLjI5LTEuMzJBMi41NyAyLjU3IDAgMCAwIDYuMDUuNyAzIDMgMCAwIDAgNC45OC4xNyA0Ljk2IDQuOTYgMCAwIDAgMy42NSAwYTQuNzYgNC43NiAwIDAgMC0xLjI0LjE3IDMuNDEgMy40MSAwIDAgMC0xLjA4LjQ5IDIuNSAyLjUgMCAwIDAtLjc2Ljg0QTIuNDYgMi40NiAwIDAgMCAuMyAyLjcyYTIuMDMgMi4wMyAwIDAgMCAuMjUgMS4wNiAyLjA2IDIuMDYgMCAwIDAgLjY4LjY5IDMuOTMgMy45MyAwIDAgMCAuOTUuNDNxLjUzLjE2IDEuMDkuMjhsMS4wOC4yNGE0Ljk1IDQuOTUgMCAwIDEgLjk2LjMgMS44NiAxLjg2IDAgMCAxIC42OC41IDEuMTcgMS4xNyAwIDAgMSAuMjUuNzcgMS41MiAxLjUyIDAgMCAxLS4yMS44NCAxLjUxIDEuNTEgMCAwIDEtLjU1LjUgMi40NyAyLjQ3IDAgMCAxLS43Ni4yOCA0LjYxIDQuNjEgMCAwIDEtLjgzLjA3IDMuOTcgMy45NyAwIDAgMS0xLjAyLS4xMyAyLjUyIDIuNTIgMCAwIDEtLjg2LS40IDIuMDcgMi4wNyAwIDAgMS0uNi0uNyAyLjEgMi4xIDAgMCAxLS4yMy0xSDBBMy4yNiAzLjI2IDAgMCAwIC4zIDcuOWEyLjggMi44IDAgMCAwIC44NCAxLjAxIDMuNjQgMy42NCAwIDAgMCAxLjIyLjYgNS40NCA1LjQ0IDAgMCAwIDEuNDguMiA1LjY0IDUuNjQgMCAwIDAgMS4yOC0uMTYgMy43IDMuNyAwIDAgMCAxLjE2LS40OCAyLjczIDIuNzMgMCAwIDAgLjg1LS44NiAyLjMzIDIuMzMgMCAwIDAgLjMzLTEuMjYgMi4zMyAyLjMzIDAgMCAwLS4yNS0xLjE1IDIuMjYgMi4yNiAwIDAgMC0uNjgtLjc1IDMuNTggMy41OCAwIDAgMC0uOTUtLjQ4cS0uNTQtLjE4LTEuMDktLjN0LTEuMDgtLjI0YTUuNjggNS42OCAwIDAgMS0uOTYtLjI4IDEuODggMS44OCAwIDAgMS0uNjgtLjQ0Ljk3Ljk3IDAgMCAxLS4yNS0uNyAxLjUgMS41IDAgMCAxIC4xNy0uNzUgMS4zNiAxLjM2IDAgMCAxIC40Ny0uNSAyLjA0IDIuMDQgMCAwIDEgLjY3LS4yNSAzLjc4IDMuNzggMCAwIDEgLjc3LS4wOCAyLjYyIDIuNjIgMCAwIDEgMS41OC40NSAxLjkzIDEuOTMgMCAwIDEgLjcyIDEuNDVabTkuMzkgMmgxLjE0YTIuNjYgMi42NiAwIDAgMC0uMzEtMS4wNCAyLjMgMi4zIDAgMCAwLS42My0uNzIgMi42MSAyLjYxIDAgMCAwLS44OS0uNDIgNC4wNiA0LjA2IDAgMCAwLTEuMDctLjE0IDMuMjUgMy4yNSAwIDAgMC0xLjM5LjI4IDIuNzggMi43OCAwIDAgMC0xIC43NyAzLjI2IDMuMjYgMCAwIDAtLjU5IDEuMTQgNC45MyA0LjkzIDAgMCAwLS4yIDEuNDIgNC41MyA0LjUzIDAgMCAwIC4yIDEuMzggMy4wNCAzLjA0IDAgMCAwIC42IDEuMDkgMi42MyAyLjYzIDAgMCAwIDEgLjcgMy41IDMuNSAwIDAgMCAxLjM1LjI0IDIuOTIgMi45MiAwIDAgMCAyLjA0LS42NyAzLjEgMy4xIDAgMCAwIC45My0xLjkzaC0xLjEzYTEuOTQgMS45NCAwIDAgMS0uNTcgMS4yMSAxLjggMS44IDAgMCAxLTEuMjguNDMgMS44MyAxLjgzIDAgMCAxLS45LS4yIDEuNzUgMS43NSAwIDAgMS0uNi0uNTYgMi40NCAyLjQ0IDAgMCAxLS4zNS0uNzggMy43NCAzLjc0IDAgMCAxLS4xMS0uOTEgNC41NyA0LjU3IDAgMCAxIC4xLS45OSAyLjQ2IDIuNDYgMCAwIDEgLjM1LS44NCAxLjc4IDEuNzggMCAwIDEgLjY0LS41OCAyLjA2IDIuMDYgMCAwIDEgMS0uMjIgMS42OCAxLjY4IDAgMCAxIDEuMTIuMzUgMS42OCAxLjY4IDAgMCAxIC41NS45OVpNMjUuNiA5LjQ4YTEuNTYgMS41NiAwIDAgMS0uOC4xNy45NS45NSAwIDAgMS0uNjgtLjI1IDEuMDQgMS4wNCAwIDAgMS0uMjUtLjc4IDIuNjQgMi42NCAwIDAgMS0xLjA2Ljc4IDMuNSAzLjUgMCAwIDEtMS4zLjI1IDMuNSAzLjUgMCAwIDEtLjg3LS4xIDIuMDEgMi4wMSAwIDAgMS0uNy0uMzMgMS41NiAxLjU2IDAgMCAxLS40OC0uNTggMS45NSAxLjk1IDAgMCAxLS4xNy0uODYgMS45NyAxLjk3IDAgMCAxIC4yLS45NCAxLjcgMS43IDAgMCAxIC41LS41OSAyLjM1IDIuMzUgMCAwIDEgLjczLS4zNXEuNC0uMTEuODQtLjIuNDUtLjA4Ljg2LS4xM2E0LjgyIDQuODIgMCAwIDAgLjcyLS4xMyAxLjIgMS4yIDAgMCAwIC41LS4yNS42LjYgMCAwIDAgLjE4LS40NyAxLjEgMS4xIDAgMCAwLS4xNC0uNTkuOTQuOTQgMCAwIDAtLjM1LS4zMyAxLjQzIDEuNDMgMCAwIDAtLjQ4LS4xNiAzLjYzIDMuNjMgMCAwIDAtLjUzLS4wNCAyLjM0IDIuMzQgMCAwIDAtMS4xNy4yNyAxLjEzIDEuMTMgMCAwIDAtLjUgMWgtMS4xYTIuMzkgMi4zOSAwIDAgMSAuMjYtMS4wNSAxLjk3IDEuOTcgMCAwIDEgLjYyLS43IDIuNjIgMi42MiAwIDAgMSAuOS0uMzggNC43IDQuNyAwIDAgMSAxLjA3LS4xMiA2LjMgNi4zIDAgMCAxIC45LjA3IDIuMzYgMi4zNiAwIDAgMSAuOC4yNiAxLjU2IDEuNTYgMCAwIDEgLjYuNTcgMS44MSAxLjgxIDAgMCAxIC4yMS45NXYzLjQ1YTIuNTkgMi41OSAwIDAgMCAuMDUuNThxLjA0LjE5LjMuMTlhMS4xIDEuMSAwIDAgMCAuMzQtLjA3Wm0tMS44LTMuNDVhMS4zOCAxLjM4IDAgMCAxLS41NC4yM3EtLjMzLjA3LS43LjEydC0uNzUuMWEyLjc1IDIuNzUgMCAwIDAtLjY4LjE4IDEuMjMgMS4yMyAwIDAgMC0uNDguMzcgMS4wNCAxLjA0IDAgMCAwLS4yLjY2LjkuOSAwIDAgMCAuMTIuNDYuOTIuOTIgMCAwIDAgLjI4LjMgMS4yIDEuMiAwIDAgMCAuNDEuMTggMi4yNyAyLjI3IDAgMCAwIC41LjA1IDIuNjIgMi42MiAwIDAgMCAuOTMtLjE1IDEuOTcgMS45NyAwIDAgMCAuNjQtLjM4IDEuNDkgMS40OSAwIDAgMCAuMzctLjUgMS4yNSAxLjI1IDAgMCAwIC4xMS0uNVptNC43OC0zLjI1VjkuNWgxLjFWNS43YTIuNzIgMi43MiAwIDAgMSAuMTItLjg0IDEuOSAxLjkgMCAwIDEgLjM3LS42NiAxLjY1IDEuNjUgMCAwIDEgLjYyLS40NSAyLjI1IDIuMjUgMCAwIDEgLjg4LS4xNSAxLjM1IDEuMzUgMCAwIDEgMSAuMzYgMS4zMyAxLjMzIDAgMCAxIC4zNi45OVY5LjVoMS4xVjUuMDhhNC4xNiA0LjE2IDAgMCAwLS4xLTEgMS44OCAxLjg4IDAgMCAwLS40LS43NyAxLjgyIDEuODIgMCAwIDAtLjctLjUgMi45MiAyLjkyIDAgMCAwLTEuMS0uMTggMi4zMyAyLjMzIDAgMCAwLTIuMTkgMS4yMmgtLjAzVjIuNzhabTkuMTggMFY5LjVoMS4xVjUuN2EyLjcyIDIuNzIgMCAwIDEgLjEyLS44NCAxLjkgMS45IDAgMCAxIC4zNy0uNjYgMS42NSAxLjY1IDAgMCAxIC42Mi0uNDUgMi4yNSAyLjI1IDAgMCAxIC44OC0uMTUgMS4zNSAxLjM1IDAgMCAxIDEgLjM3IDEuMzMgMS4zMyAwIDAgMSAuMzYuOThWOS41aDEuMVY1LjA4YTQuMTYgNC4xNiAwIDAgMC0uMS0xIDEuODggMS44OCAwIDAgMC0uNC0uNzcgMS44MiAxLjgyIDAgMCAwLS43LS41IDIuOTIgMi45MiAwIDAgMC0xLjEtLjE4IDIuMzMgMi4zMyAwIDAgMC0yLjE5IDEuMjJoLS4wM1YyLjc4Wm0xMC4zNC0xLjJWLjIxaC0xLjF2MS4zNVptLTEuMSAxLjJWOS41aDEuMVYyLjc4Wm00Ljc3IDBWOS41aDEuMVY1LjdhMi43MiAyLjcyIDAgMCAxIC4xMy0uODQgMS45IDEuOSAwIDAgMSAuMzctLjY2IDEuNjUgMS42NSAwIDAgMSAuNjItLjQ1IDIuMjUgMi4yNSAwIDAgMSAuODctLjE1IDEuMzUgMS4zNSAwIDAgMSAxIC4zNiAxLjMzIDEuMzMgMCAwIDEgLjM3Ljk5VjkuNWgxLjFWNS4wOGE0LjE2IDQuMTYgMCAwIDAtLjExLTEgMS44OCAxLjg4IDAgMCAwLS4zOS0uNzcgMS44MiAxLjgyIDAgMCAwLS43MS0uNSAyLjkyIDIuOTIgMCAwIDAtMS4xLS4xOCAyLjMzIDIuMzMgMCAwIDAtMi4xOSAxLjIyaC0uMDJWMi43OFptMTQuOTggNi4xNVYyLjc4aC0xLjA0di45NmgtLjAxYTEuOTcgMS45NyAwIDAgMC0uODQtLjg0IDIuNDggMi40OCAwIDAgMC0xLjE3LS4yOCAzIDMgMCAwIDAtMS40Ni4zNCAyLjg1IDIuODUgMCAwIDAtLjk3Ljg0IDMuMzUgMy4zNSAwIDAgMC0uNTIgMS4xNSA1LjEgNS4xIDAgMCAwLS4xNSAxLjIyIDQuNDUgNC40NSAwIDAgMCAuMTkgMS4zMSAzLjEzIDMuMTMgMCAwIDAgLjU2IDEuMDggMi43NSAyLjc1IDAgMCAwIC45NC43MyAyLjk2IDIuOTYgMCAwIDAgMS4zMS4yOCAyLjY5IDIuNjkgMCAwIDAgMS4yMy0uMyAxLjg2IDEuODYgMCAwIDAgLjg2LS45MWguMDN2LjQ0YTQuNDcgNC40NyAwIDAgMS0uMTIgMS4wMyAyLjE1IDIuMTUgMCAwIDEtLjM1LjggMS43MyAxLjczIDAgMCAxLS42My41MiAyLjA1IDIuMDUgMCAwIDEtLjkyLjE5IDIuOTggMi45OCAwIDAgMS0uNTctLjA2IDIuMDggMi4wOCAwIDAgMS0uNTUtLjIgMS4zOCAxLjM4IDAgMCAxLS40My0uMzMuODIuODIgMCAwIDEtLjItLjVoLTEuMWExLjc0IDEuNzQgMCAwIDAgLjMuOTIgMi4wNiAyLjA2IDAgMCAwIC42NS42IDIuOTMgMi45MyAwIDAgMCAuODkuMzUgNC41NyA0LjU3IDAgMCAwIC45NS4xQTMuMDcgMy4wNyAwIDAgMCA2NiAxMS40YTMuNTQgMy41NCAwIDAgMCAuNzYtMi40N1ptLTMuMS0uMzNhMS42OSAxLjY5IDAgMCAxLS45LS4yMiAxLjc2IDEuNzYgMCAwIDEtLjYtLjYgMi41OSAyLjU5IDAgMCAxLS4zLS44MyA0LjYzIDQuNjMgMCAwIDEtLjEtLjkxIDMuOCAzLjggMCAwIDEgLjExLS45MiAyLjI5IDIuMjkgMCAwIDEgLjM1LS43OCAxLjc3IDEuNzcgMCAwIDEgLjYyLS41NCAxLjkgMS45IDAgMCAxIC45MS0uMiAxLjc1IDEuNzUgMCAwIDEgLjg5LjIgMS43MiAxLjcyIDAgMCAxIC41OS41NiAyLjQzIDIuNDMgMCAwIDEgLjMzLjc3IDMuNjggMy42OCAwIDAgMSAuMS44NyA0LjA2IDQuMDYgMCAwIDEtLjExLjk0IDIuNzMgMi43MyAwIDAgMS0uMzUuODQgMS44MSAxLjgxIDAgMCAxLS42MS42IDEuOCAxLjggMCAwIDEtLjkzLjIyWk03NS45Ny4yMlY5LjVoMS4xdi0uOWguMDNhMS43OCAxLjc4IDAgMCAwIC40NS41IDIuMzYgMi4zNiAwIDAgMCAuNTYuMzIgMy4wNyAzLjA3IDAgMCAwIC42LjE3IDMuMzIgMy4zMiAwIDAgMCAuNTUuMDUgMy4xMiAzLjEyIDAgMCAwIDEuMzYtLjI3IDIuNyAyLjcgMCAwIDAgLjk2LS43NCAzLjE4IDMuMTggMCAwIDAgLjU3LTEuMTIgNC43NCA0Ljc0IDAgMCAwIC4yLTEuMzUgNC42IDQuNiAwIDAgMC0uMi0xLjM1IDMuNDIgMy40MiAwIDAgMC0uNTgtMS4xMyAyLjc2IDIuNzYgMCAwIDAtLjk2LS43NyAzLjAzIDMuMDMgMCAwIDAtMS4zNi0uMjkgMy4yIDMuMiAwIDAgMC0xLjI5LjI2IDEuNjUgMS42NSAwIDAgMC0uODYuODFoLS4wMlYuMjJabTUuMiA1Ljg2YTQuNDIgNC40MiAwIDAgMS0uMS45NyAyLjU0IDIuNTQgMCAwIDEtLjM0LjgzIDEuNzggMS43OCAwIDAgMS0uNjEuNTggMS44OSAxLjg5IDAgMCAxLS45Ni4yMiAyLjA1IDIuMDUgMCAwIDEtLjk3LS4yMSAxLjkgMS45IDAgMCAxLS42Ni0uNTcgMi4zNyAyLjM3IDAgMCAxLS4zNy0uOCAzLjg3IDMuODcgMCAwIDEtLjEyLS45NiAzLjkgMy45IDAgMCAxIC4xMS0uOTMgMi40MiAyLjQyIDAgMCAxIC4zNi0uOCAxLjkgMS45IDAgMCAxIC42NC0uNTkgMS45IDEuOSAwIDAgMSAuOTUtLjIyIDEuOTcgMS45NyAwIDAgMSAuOTMuMiAxLjg1IDEuODUgMCAwIDEgLjY1LjU3IDIuNDcgMi40NyAwIDAgMSAuMzcuOCAzLjQ0IDMuNDQgMCAwIDEgLjEyLjkxWm03LjA2IDQuMzJhNy4wMyA3LjAzIDAgMCAxLS4zOC44NCAyLjI3IDIuMjcgMCAwIDEtLjQyLjU1IDEuNDEgMS40MSAwIDAgMS0uNS4zMSAxLjk1IDEuOTUgMCAwIDEtLjY1LjEgMi45NSAyLjk1IDAgMCAxLS4zOS0uMDMgMS44NCAxLjg0IDAgMCAxLS4zNy0uMDl2LTEuMDJhMS44NiAxLjg2IDAgMCAwIC4zMy4xMSAxLjQgMS40IDAgMCAwIC4zMi4wNS45NS45NSAwIDAgMCAuNTYtLjE2IDEgMSAwIDAgMCAuMzQtLjQ2bC40Ni0xLjE0LTIuNjctNi42OGgxLjI1bDEuOTcgNS41aC4wMkw5MCAyLjc4aDEuMTdaIiBmaWxsPSIjMTIxNjE5Ii8+PC9zdmc+",ia="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",aa=(i=>(i.Rounded="rounded",i.Square="square",i))(aa||{}),ra=(i=>(i.Light="light",i.Bold="bold",i))(ra||{}),sa=(i=>(i.Animated="animated",i))(sa||{}),na=class Wt{constructor(e){this._isLooping=!1,this._isLooping=e}get isLooping(){return this._isLooping}static fromJSON(e){return e===null?null:new Wt(e.looping)}toJSONObject(){return{looping:this.isLooping}}},oa=(i=>(i.Minimal="minimal",i.Extended="extended",i))(oa||{}),la=class{constructor(){this.type="tapToFocus"}toJSONObject(){return{type:this.type}}},ua=class{constructor(){this.type="swipeToZoom"}toJSONObject(){return{type:this.type}}},ye=class Ut{constructor(e,t){this._x=e,this._y=t}get x(){return this._x}get y(){return this._y}static fromJSON(e){return new Ut(e.x,e.y)}toJSONObject(){return{x:this.x,y:this.y}}},$e=class Vt{constructor(e,t,a,r){this._topLeft=e,this._topRight=t,this._bottomRight=a,this._bottomLeft=r}get topLeft(){return this._topLeft}get topRight(){return this._topRight}get bottomRight(){return this._bottomRight}get bottomLeft(){return this._bottomLeft}static fromJSON(e){return new Vt(ye.fromJSON(e.topLeft),ye.fromJSON(e.topRight),ye.fromJSON(e.bottomRight),ye.fromJSON(e.bottomLeft))}toJSONObject(){return{topLeft:this.topLeft.toJSONObject(),topRight:this.topRight.toJSONObject(),bottomLeft:this.bottomLeft.toJSONObject(),bottomRight:this.bottomRight.toJSONObject()}}},Gt=(i=>(i.Pixel="pixel",i.Fraction="fraction",i))(Gt||{}),z=class Jt{constructor(e,t){this._value=e,this._unit=t}get value(){return this._value}get unit(){return this._unit}static fromJSON(e){return new Jt(e.value,e.unit)}toJSONObject(){return{unit:this.unit,value:this.value}}},Mt=class it{constructor(e,t){this._x=e,this._y=t}static get zero(){return new it(new z(0,"pixel"),new z(0,"pixel"))}get x(){return this._x}get y(){return this._y}static fromJSON(e){return new it(z.fromJSON(e.x),z.fromJSON(e.y))}toJSONObject(){return{x:this.x.toJSONObject(),y:this.y.toJSONObject()}}},$t=class Ht{constructor(e,t){this._width=e,this._height=t}get width(){return this._width}get height(){return this._height}static fromJSON(e){return new Ht(z.fromJSON(e.width),z.fromJSON(e.height))}isSameAs(e){return JSON.stringify(this.toJSONObject())===JSON.stringify(e.toJSONObject())}toJSONObject(){return{width:this.width.toJSONObject(),height:this.height.toJSONObject()}}},ca=class Yt{constructor(e,t){this._width=e,this._height=t}get width(){return this._width}get height(){return this._height}static fromJSON(e){return new Yt(e.width,e.height)}toJSONObject(){return{height:this.height,width:this.width}}},Ke=class{constructor(e,t){this._size=e,this._aspect=t}get size(){return this._size}get aspect(){return this._aspect}},da=(i=>(i.WidthAndHeight="widthAndHeight",i.WidthAndAspectRatio="widthAndAspectRatio",i.HeightAndAspectRatio="heightAndAspectRatio",i.ShorterDimensionAndAspectRatio="shorterDimensionAndAspectRatio",i))(da||{}),ha=class _e{constructor(){this._shorterDimensionAndAspectRatio=null}get widthAndHeight(){return this._widthAndHeight}get widthAndAspectRatio(){return this._widthAndAspectRatio}get heightAndAspectRatio(){return this._heightAndAspectRatio}get shorterDimensionAndAspectRatio(){return this._shorterDimensionAndAspectRatio}get sizingMode(){return this.widthAndAspectRatio?"widthAndAspectRatio":this.heightAndAspectRatio?"heightAndAspectRatio":this.shorterDimensionAndAspectRatio?"shorterDimensionAndAspectRatio":"widthAndHeight"}static sizeWithWidthAndHeight(e){let t=new _e;return t._widthAndHeight=e,t}static sizeWithWidthAndAspectRatio(e,t){let a=new _e;return a._widthAndAspectRatio=new Ke(e,t),a}static sizeWithHeightAndAspectRatio(e,t){let a=new _e;return a._heightAndAspectRatio=new Ke(e,t),a}static sizeWithShorterDimensionAndAspectRatio(e,t){let a=new _e;return a._shorterDimensionAndAspectRatio=new Ke(e,t),a}static fromJSON(e){if(e.width&&e.height)return this.sizeWithWidthAndHeight(new $t(z.fromJSON(e.width),z.fromJSON(e.height)));if(e.width&&typeof e.aspect=="number")return this.sizeWithWidthAndAspectRatio(z.fromJSON(e.width),e.aspect);if(e.height&&typeof e.aspect=="number")return this.sizeWithHeightAndAspectRatio(z.fromJSON(e.height),e.aspect);if(e.shorterDimension&&typeof e.aspect=="number")return this.sizeWithShorterDimensionAndAspectRatio(z.fromJSON(e.shorterDimension),e.aspect);throw new Error(`SizeWithUnitAndAspectJSON is malformed: ${JSON.stringify(e)}`)}toJSONObject(){var e,t,a,r,s,n,m,h;switch(this.sizingMode){case"widthAndAspectRatio":return{width:(e=this.widthAndAspectRatio)==null?void 0:e.size.toJSONObject(),aspect:(t=this.widthAndAspectRatio)==null?void 0:t.aspect};case"heightAndAspectRatio":return{height:(a=this.heightAndAspectRatio)==null?void 0:a.size.toJSONObject(),aspect:(r=this.heightAndAspectRatio)==null?void 0:r.aspect};case"shorterDimensionAndAspectRatio":return{shorterDimension:(s=this.shorterDimensionAndAspectRatio)==null?void 0:s.size.toJSONObject(),aspect:(n=this.shorterDimensionAndAspectRatio)==null?void 0:n.aspect};default:return{width:(m=this.widthAndHeight)==null?void 0:m.width.toJSONObject(),height:(h=this.widthAndHeight)==null?void 0:h.height.toJSONObject()}}}},ma=class at{constructor(e,t,a,r){this._left=e,this._top=t,this._right=a,this._bottom=r}static get zero(){return new at(new z(0,"pixel"),new z(0,"pixel"),new z(0,"pixel"),new z(0,"pixel"))}get left(){return this._left}get right(){return this._right}get top(){return this._top}get bottom(){return this._bottom}static fromJSON(e){return new at(z.fromJSON(e.left),z.fromJSON(e.top),z.fromJSON(e.right),z.fromJSON(e.bottom))}toJSONObject(){return{left:this.left.toJSONObject(),right:this.right.toJSONObject(),top:this.top.toJSONObject(),bottom:this.bottom.toJSONObject()}}},G=class ee{constructor(e){this.hexadecimalString=e}get redComponent(){return this.hexadecimalString.slice(0,2)}get greenComponent(){return this.hexadecimalString.slice(2,4)}get blueComponent(){return this.hexadecimalString.slice(4,6)}get alphaComponent(){return this.hexadecimalString.slice(6,8)}get red(){return ee.hexToNumber(this.redComponent)}get green(){return ee.hexToNumber(this.greenComponent)}get blue(){return ee.hexToNumber(this.blueComponent)}get alpha(){return ee.hexToNumber(this.alphaComponent)}static fromHex(e){return new ee(ee.normalizeHex(e))}static fromRGBA(e,t,a,r=1){let s=[e,t,a,this.normalizeAlpha(r)].reduce((n,m)=>n+this.numberToHex(m),"");return new ee(s)}static areEquals(e,t){return e==null||t==null?!1:e.hexadecimalString===t.hexadecimalString}static hexToNumber(e){return Number.parseInt(e,16)}static fromJSON(e){return ee.fromHex(e)}static numberToHex(e){let t=Math.round(e).toString(16);return t.length===1&&(t=`0${t}`),t.toUpperCase()}static normalizeHex(e){let t=e;return t.startsWith("#")&&(t=t.slice(1)),t.length<6&&(t=[...t].map(a=>a+a).join("")),t.length===6&&(t+="FF"),t.toUpperCase()}static normalizeAlpha(e){return e>0&&e<=1?255*e:e}withAlpha(e){let t=this.hexadecimalString.slice(0,6)+ee.numberToHex(ee.normalizeAlpha(e));return ee.fromHex(t)}toJSON(){return this.hexadecimalString}},ga=(i=>(i.Unknown="unknown",i.Portrait="portrait",i.PortraitUpsideDown="portraitUpsideDown",i.LandscapeRight="landscapeRight",i.LandscapeLeft="landscapeLeft",i))(ga||{}),pa=(i=>(i.None="none",i.Horizontal="horizontal",i.LeftToRight="leftToRight",i.RightToLeft="rightToLeft",i.Vertical="vertical",i.TopToBottom="topToBottom",i.BottomToTop="bottomToTop",i))(pa||{}),Sa=(i=>(i.TopLeft="topLeft",i.TopCenter="topCenter",i.TopRight="topRight",i.CenterLeft="centerLeft",i.Center="center",i.CenterRight="centerRight",i.BottomLeft="bottomLeft",i.BottomCenter="bottomCenter",i.BottomRight="bottomRight",i))(Sa||{}),Ca=class{static fromJSON(e){return(e==null?void 0:e.type)==="tapToFocus"?new la:null}},fa=class{static fromJSON(e){return(e==null?void 0:e.type)==="swipeToZoom"?new ua:null}};function Xe(i){let e="document"in globalThis?globalThis.document:void 0,t=e==null?void 0:e.createRange().createContextualFragment(i);if(t)return t.firstElementChild}function va(i){var e;return{Camera:{Settings:{preferredResolution:i.Camera.Settings.preferredResolution,zoomFactor:i.Camera.Settings.zoomFactor,zoomGestureZoomFactor:i.Camera.Settings.zoomGestureZoomFactor,focusGestureStrategy:i.Camera.Settings.focusGestureStrategy},defaultPosition:(e=i.Camera.defaultPosition)!=null?e:null,availablePositions:i.Camera.availablePositions},SingleImageUploader:{Settings:{iconElement:Xe(i.SingleImageUploader.Settings.iconElement),informationElement:Xe(i.SingleImageUploader.Settings.informationElement),buttonElement:Xe(i.SingleImageUploader.Settings.buttonElement),containerStyle:i.SingleImageUploader.Settings.containerStyle,iconStyle:i.SingleImageUploader.Settings.iconStyle,informationStyle:i.SingleImageUploader.Settings.informationStyle,buttonStyle:i.SingleImageUploader.Settings.buttonStyle,onlyCameraCapture:i.SingleImageUploader.Settings.onlyCameraCapture}},DataCaptureView:{scanAreaMargins:ma.fromJSON(JSON.parse(i.DataCaptureView.scanAreaMargins)),pointOfInterest:Mt.fromJSON(JSON.parse(i.DataCaptureView.pointOfInterest)),logoStyle:i.DataCaptureView.logoStyle,logoAnchor:i.DataCaptureView.logoAnchor,logoOffset:Mt.fromJSON(JSON.parse(i.DataCaptureView.logoOffset)),focusGesture:Ca.fromJSON(JSON.parse(i.DataCaptureView.focusGesture)),zoomGesture:fa.fromJSON(JSON.parse(i.DataCaptureView.zoomGesture)),cameraRecoveryText:i.DataCaptureView.cameraRecoveryText},LaserlineViewfinder:Object.keys(i.LaserlineViewfinder.styles).reduce((t,a)=>{let r=i.LaserlineViewfinder.styles[a];return t.styles[a]={width:z.fromJSON(JSON.parse(r.width)),enabledColor:G.fromJSON(r.enabledColor),disabledColor:G.fromJSON(r.disabledColor),style:r.style},t},{defaultStyle:i.LaserlineViewfinder.defaultStyle,styles:{}}),RectangularViewfinder:Object.keys(i.RectangularViewfinder.styles).reduce((t,a)=>{let r=i.RectangularViewfinder.styles[a];return t.styles[a]={size:ha.fromJSON(JSON.parse(r.size)),color:G.fromJSON(r.color),style:r.style,lineStyle:r.lineStyle,dimming:Number.parseFloat(r.dimming.toString()),animation:na.fromJSON(JSON.parse(r.animation))},t},{defaultStyle:i.RectangularViewfinder.defaultStyle,styles:{}}),AimerViewfinder:{frameColor:G.fromJSON(i.AimerViewfinder.frameColor),dotColor:G.fromJSON(i.AimerViewfinder.dotColor)},Brush:{fillColor:G.fromJSON(i.Brush.fillColor),strokeColor:G.fromJSON(i.Brush.strokeColor),strokeWidth:i.Brush.strokeWidth},Feedback:{defaultVibrationPattern:i.Feedback.defaultVibrationPattern}}}var Z=va({DataCaptureView:{focusGesture:"null",zoomGesture:"null",logoAnchor:"bottomRight",logoStyle:"extended",logoOffset:JSON.stringify({x:{value:0,unit:"fraction"},y:{value:0,unit:"fraction"}}),pointOfInterest:JSON.stringify({x:{value:.5,unit:"fraction"},y:{value:.5,unit:"fraction"}}),scanAreaMargins:JSON.stringify({left:{value:0,unit:"fraction"},right:{value:0,unit:"fraction"},top:{value:0,unit:"fraction"},bottom:{value:0,unit:"fraction"}}),cameraRecoveryText:"(This text is updated from translations)"},Camera:{Settings:{preferredResolution:"auto",zoomFactor:1,focusGestureStrategy:"manualUntilCapture",zoomGestureZoomFactor:2},defaultPosition:"worldFacing",availablePositions:["worldFacing","userFacing"]},SingleImageUploader:{Settings:{iconElement:atob(ea),informationElement:"<p data-scandit-default>(This text is updated from translations)</p>",buttonElement:"<div data-scandit-default>(This text is updated from translations)</div>",containerStyle:{backgroundColor:"#FFFFFF"},iconStyle:{fill:"#121619"},informationStyle:{color:"#121619",marginBottom:"2em"},buttonStyle:{color:"#FFFFFF",backgroundColor:"#121619",fontWeight:"bold",padding:"1.25em",width:"12em",textAlign:"center",textTransform:"uppercase"},onlyCameraCapture:!1}},LaserlineViewfinder:{defaultStyle:"animated",styles:{animated:{width:JSON.stringify({unit:"fraction",value:.8}),enabledColor:"#FFFFFFFF",disabledColor:"#00000000",style:"animated"}}},AimerViewfinder:{frameColor:"#FFFFFFFF",dotColor:"#FFFFFFCC"},RectangularViewfinder:{defaultStyle:"rounded",styles:{rounded:{size:JSON.stringify({aspect:1,shorterDimension:{unit:"fraction",value:.75}}),color:"#FFFFFFFF",style:"rounded",lineStyle:"light",dimming:0,animation:JSON.stringify({looping:!0})},square:{size:JSON.stringify({aspect:1,shorterDimension:{unit:"fraction",value:.75}}),color:"#FFFFFFFF",style:"square",lineStyle:"light",dimming:0,animation:JSON.stringify({looping:!0})}}},Brush:{fillColor:"#00000000",strokeColor:"#00000000",strokeWidth:0},Feedback:{defaultVibrationPattern:[300]}}),qt=class Qt{constructor(){this.hasApi=!1,this.hasTouch=!1,this.requiresPrefix=!1}detect(){var e;try{"PointerEvent"in window?this.hasApi=!0:"msPointerEnabled"in navigator&&(this.hasApi=!0,this.requiresPrefix=!0);let t=(e=navigator.msMaxTouchPoints)!=null?e:navigator.maxTouchPoints;this.hasTouch=t>0}catch{}}prefixIfNeeded(e){return this.requiresPrefix?Qt.prefixEventMap[e]:e}};qt.prefixEventMap={pointerdown:"MSPointerDown",pointerup:"MSPointerUp",pointercancel:"MSPointerCancel",pointermove:"MSPointerMove",pointerover:"MSPointerOver",pointerout:"MSPointerOut",pointerenter:"MSPointerEnter",pointerleave:"MSPointerLeave",gotpointercapture:"MSGotPointerCapture",lostpointercapture:"MSLostPointerCapture"};var ba=qt,Be=new ba,wa=class{constructor(){this._listeners=new Set}get listeners(){return[...this._listeners]}addListener(e){this._listeners.add(e)}removeListener(e){this._listeners.delete(e)}},Aa=class extends wa{constructor(e){super(),this._onTouchStart=this.onTouchStart.bind(this),this._onPointerDown=this.onPointerDown.bind(this),Be.detect(),this.element=e,this.addPointerDownListener()}removeAllListeners(){this.element.removeEventListener("touchend",this._onTouchStart),this.element.removeEventListener("mousedown",this._onPointerDown),this.element.removeEventListener("pointerdown",this._onPointerDown)}addPointerDownListener(){Be.hasApi?this.element.addEventListener(Be.prefixIfNeeded("pointerdown"),this._onPointerDown):Be.hasTouch?this.element.addEventListener("touchstart",this._onTouchStart):this.element.addEventListener("mousedown",this._onPointerDown)}onPointerDown(e){let{clientX:t,clientY:a,button:r,currentTarget:s=this.element}=e;r===0&&this.onTap(this.pointRelativeToElement({clientX:t,clientY:a,rect:s.getBoundingClientRect()}))}onTouchStart(e){let[t]=e.touches,{clientX:a,clientY:r}=t;this.onTap(this.pointRelativeToElement({clientX:a,clientY:r,rect:this.element.getBoundingClientRect()}))}pointRelativeToElement({clientX:e,clientY:t,rect:a}){return new ye(e-a.left,t-a.top)}onTap(e){var t;for(let a of this.listeners)(t=a.onTap)==null||t.call(a,e)}},rt=class extends ie{constructor(e){super({name:"UnsupportedBrowserError",message:`This OS / browser has one or more missing features preventing it from working correctly (${e.missingFeatures.join(", ")})`}),this.data=e}},ya=kt((i,e)=>{(function(t){var a;if(typeof define=="function"&&define.amd&&(define(t),a=!0),typeof i=="object"&&(e.exports=t(),a=!0),!a){var r=window.Cookies,s=window.Cookies=t();s.noConflict=function(){return window.Cookies=r,s}}})(function(){function t(){for(var s=0,n={};s<arguments.length;s++){var m=arguments[s];for(var h in m)n[h]=m[h]}return n}function a(s){return s.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function r(s){function n(){}function m(A,b,C){if(!(typeof document>"u")){C=t({path:"/"},n.defaults,C),typeof C.expires=="number"&&(C.expires=new Date(new Date*1+C.expires*864e5)),C.expires=C.expires?C.expires.toUTCString():"";try{var u=JSON.stringify(b);/^[\{\[]/.test(u)&&(b=u)}catch{}b=s.write?s.write(b,A):encodeURIComponent(String(b)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),A=encodeURIComponent(String(A)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var d="";for(var l in C)C[l]&&(d+="; "+l,C[l]!==!0&&(d+="="+C[l].split(";")[0]));return document.cookie=A+"="+b+d}}function h(A,b){if(!(typeof document>"u")){for(var C={},u=document.cookie?document.cookie.split("; "):[],d=0;d<u.length;d++){var l=u[d].split("="),c=l.slice(1).join("=");!b&&c.charAt(0)==='"'&&(c=c.slice(1,-1));try{var p=a(l[0]);if(c=(s.read||s)(c,p)||a(c),b)try{c=JSON.parse(c)}catch{}if(C[p]=c,A===p)break}catch{}}return A?C[A]:C}}return n.set=m,n.get=function(A){return h(A,!1)},n.getJSON=function(A){return h(A,!0)},n.remove=function(A,b){m(A,"",t(b,{expires:-1}))},n.defaults={},n.withConverter=r,n}return r(function(){})})}),Ea=kt((i,e)=>{(function(t,a){var r="1.0.34",s="",n="?",m="function",h="undefined",A="object",b="string",C="major",u="model",d="name",l="type",c="vendor",p="version",W="architecture",ae="console",D="mobile",I="tablet",$="smarttv",ne="wearable",ge="embedded",M=350,O="Amazon",E="Apple",k="ASUS",Q="BlackBerry",J="Browser",re="Chrome",Ye="Edge",pe="Firefox",Se="Google",Me="Huawei",Le="LG",xe="Microsoft",Ie="Motorola",he="Opera",De="Samsung",g="Sharp",w="Sony",f="Xiaomi",L="Zebra",y="Facebook",x="Chromium OS",P="Mac OS",H=function(T,_){var N={};for(var F in T)_[F]&&_[F].length%2===0?N[F]=_[F].concat(T[F]):N[F]=T[F];return N},se=function(T){for(var _={},N=0;N<T.length;N++)_[T[N].toUpperCase()]=T[N];return _},wt=function(T,_){return typeof T===b?Ne(_).indexOf(Ne(T))!==-1:!1},Ne=function(T){return T.toLowerCase()},Mi=function(T){return typeof T===b?T.replace(/[^\d\.]/g,s).split(".")[0]:a},qe=function(T,_){if(typeof T===b)return T=T.replace(/^\s\s*/,s),typeof _===h?T:T.substring(0,M)},Oe=function(T,_){for(var N=0,F,ce,oe,v,Te,le;N<_.length&&!Te;){var Ze=_[N],Et=_[N+1];for(F=ce=0;F<Ze.length&&!Te&&Ze[F];)if(Te=Ze[F++].exec(T),Te)for(oe=0;oe<Et.length;oe++)le=Te[++ce],v=Et[oe],typeof v===A&&v.length>0?v.length===2?typeof v[1]==m?this[v[0]]=v[1].call(this,le):this[v[0]]=v[1]:v.length===3?typeof v[1]===m&&!(v[1].exec&&v[1].test)?this[v[0]]=le?v[1].call(this,le,v[2]):a:this[v[0]]=le?le.replace(v[1],v[2]):a:v.length===4&&(this[v[0]]=le?v[3].call(this,le.replace(v[1],v[2])):a):this[v]=le||a;N+=2}},Qe=function(T,_){for(var N in _)if(typeof _[N]===A&&_[N].length>0){for(var F=0;F<_[N].length;F++)if(wt(_[N][F],T))return N===n?a:N}else if(wt(_[N],T))return N===n?a:N;return T},Li={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},At={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},yt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,he+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[d,he]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+J]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+J],p],[/\bfocus\/([\w\.]+)/i],[p,[d,pe+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,he+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,he+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI "+J]],[/fxios\/([-\w\.]+)/i],[p,[d,pe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+J]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+J],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,y],p],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,re+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,re+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+J]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,Qe,Li]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,pe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,p],[/(cobalt)\/([\w\.]+)/i],[d,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[W,"amd64"]],[/(ia32(?=;))/i],[[W,Ne]],[/((?:i[346]|x)86)[;\)]/i],[[W,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[W,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[W,"armhf"]],[/windows (ce|mobile); ppc;/i],[[W,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[W,/ower/,s,Ne]],[/(sun4\w)[;\)]/i],[[W,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[W,Ne]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[c,De],[l,I]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[c,De],[l,D]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[c,E],[l,D]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[c,E],[l,I]],[/(macintosh);/i],[u,[c,E]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[c,g],[l,D]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[c,Me],[l,I]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[c,Me],[l,D]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[c,f],[l,D]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[c,f],[l,I]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[c,"OPPO"],[l,D]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[c,"Vivo"],[l,D]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[c,"Realme"],[l,D]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[c,Ie],[l,D]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[c,Ie],[l,I]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[c,Le],[l,I]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[c,Le],[l,D]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[c,"Lenovo"],[l,I]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[c,"Nokia"],[l,D]],[/(pixel c)\b/i],[u,[c,Se],[l,I]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[c,Se],[l,D]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[c,w],[l,D]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[c,w],[l,I]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[c,"OnePlus"],[l,D]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[c,O],[l,I]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[c,O],[l,D]],[/(playbook);[-\w\),; ]+(rim)/i],[u,c,[l,I]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[c,Q],[l,D]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[c,k],[l,I]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[c,k],[l,D]],[/(nexus 9)/i],[u,[c,"HTC"],[l,I]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[c,[u,/_/g," "],[l,D]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[c,"Acer"],[l,I]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[c,"Meizu"],[l,D]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,u,[l,D]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,u,[l,I]],[/(surface duo)/i],[u,[c,xe],[l,I]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[c,"Fairphone"],[l,D]],[/(u304aa)/i],[u,[c,"AT&T"],[l,D]],[/\bsie-(\w*)/i],[u,[c,"Siemens"],[l,D]],[/\b(rct\w+) b/i],[u,[c,"RCA"],[l,I]],[/\b(venue[\d ]{2,7}) b/i],[u,[c,"Dell"],[l,I]],[/\b(q(?:mv|ta)\w+) b/i],[u,[c,"Verizon"],[l,I]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[c,"Barnes & Noble"],[l,I]],[/\b(tm\d{3}\w+) b/i],[u,[c,"NuVision"],[l,I]],[/\b(k88) b/i],[u,[c,"ZTE"],[l,I]],[/\b(nx\d{3}j) b/i],[u,[c,"ZTE"],[l,D]],[/\b(gen\d{3}) b.+49h/i],[u,[c,"Swiss"],[l,D]],[/\b(zur\d{3}) b/i],[u,[c,"Swiss"],[l,I]],[/\b((zeki)?tb.*\b) b/i],[u,[c,"Zeki"],[l,I]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],u,[l,I]],[/\b(ns-?\w{0,9}) b/i],[u,[c,"Insignia"],[l,I]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[c,"NextBook"],[l,I]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],u,[l,D]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],u,[l,D]],[/\b(ph-1) /i],[u,[c,"Essential"],[l,D]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[c,"Envizen"],[l,I]],[/\b(trio[-\w\. ]+) b/i],[u,[c,"MachSpeed"],[l,I]],[/\btu_(1491) b/i],[u,[c,"Rotor"],[l,I]],[/(shield[\w ]+) b/i],[u,[c,"Nvidia"],[l,I]],[/(sprint) (\w+)/i],[c,u,[l,D]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[c,xe],[l,D]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[c,L],[l,I]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[c,L],[l,D]],[/smart-tv.+(samsung)/i],[c,[l,$]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[c,De],[l,$]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,Le],[l,$]],[/(apple) ?tv/i],[c,[u,E+" TV"],[l,$]],[/crkey/i],[[u,re+"cast"],[c,Se],[l,$]],[/droid.+aft(\w)( bui|\))/i],[u,[c,O],[l,$]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[c,g],[l,$]],[/(bravia[\w ]+)( bui|\))/i],[u,[c,w],[l,$]],[/(mitv-\w{5}) bui/i],[u,[c,f],[l,$]],[/Hbbtv.*(technisat) (.*);/i],[c,u,[l,$]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[c,qe],[u,qe],[l,$]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,$]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,u,[l,ae]],[/droid.+; (shield) bui/i],[u,[c,"Nvidia"],[l,ae]],[/(playstation [345portablevi]+)/i],[u,[c,w],[l,ae]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[c,xe],[l,ae]],[/((pebble))app/i],[c,u,[l,ne]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[c,E],[l,ne]],[/droid.+; (glass) \d/i],[u,[c,Se],[l,ne]],[/droid.+; (wt63?0{2,3})\)/i],[u,[c,L],[l,ne]],[/(quest( 2| pro)?)/i],[u,[c,y],[l,ne]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[l,ge]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[l,D]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[l,I]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,I]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,D]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,Ye+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[p,Qe,At]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[p,Qe,At]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,P],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,Q]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,pe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[d,re+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,x],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,p]]},K=function(T,_){if(typeof T===A&&(_=T,T=a),!(this instanceof K))return new K(T,_).getResult();var N=typeof t!==h&&t.navigator?t.navigator:a,F=T||(N&&N.userAgent?N.userAgent:s),ce=N&&N.userAgentData?N.userAgentData:a,oe=_?H(yt,_):yt;return this.getBrowser=function(){var v={};return v[d]=a,v[p]=a,Oe.call(v,F,oe.browser),v[C]=Mi(v[p]),N&&N.brave&&typeof N.brave.isBrave==m&&(v[d]="Brave"),v},this.getCPU=function(){var v={};return v[W]=a,Oe.call(v,F,oe.cpu),v},this.getDevice=function(){var v={};return v[c]=a,v[u]=a,v[l]=a,Oe.call(v,F,oe.device),!v[l]&&ce&&ce.mobile&&(v[l]=D),v[u]=="Macintosh"&&N&&typeof N.standalone!==h&&N.maxTouchPoints&&N.maxTouchPoints>2&&(v[u]="iPad",v[l]=I),v},this.getEngine=function(){var v={};return v[d]=a,v[p]=a,Oe.call(v,F,oe.engine),v},this.getOS=function(){var v={};return v[d]=a,v[p]=a,Oe.call(v,F,oe.os),!v[d]&&ce&&ce.platform!="Unknown"&&(v[d]=ce.platform.replace(/chrome os/i,x).replace(/macos/i,P)),v},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return F},this.setUA=function(v){return F=typeof v===b&&v.length>M?qe(v,M):v,this},this.setUA(F),this};K.VERSION=r,K.BROWSER=se([d,p,C]),K.CPU=se([W]),K.DEVICE=se([u,c,l,ae,D,$,I,ne,ge]),K.ENGINE=K.OS=se([d,p]),typeof i!==h?(typeof e!==h&&e.exports&&(i=e.exports=K),i.UAParser=K):typeof define===m&&define.amd?define(function(){return K}):typeof t!==h&&(t.UAParser=K);var Ce=typeof t!==h&&(t.jQuery||t.Zepto);if(Ce&&!Ce.ua){var je=new K;Ce.ua=je.getResult(),Ce.ua.get=function(){return je.getUA()},Ce.ua.set=function(T){je.setUA(T);var _=je.getResult();for(var N in _)Ce.ua[N]=_[N]}}})(typeof window=="object"?window:i)}),Ma=Rt(ya(),1),La=Rt(Ea(),1),j;(i=>{let e;function t(){return e==null&&(e=new La.default(navigator.userAgent)),e}i.getUserAgentInfo=t;function a(){var M;if("orientation"in window)return!1;let O="(any-pointer: coarse)",E=(M=window.matchMedia)==null?void 0:M.call(window,O);return navigator.maxTouchPoints===0||(E==null?void 0:E.media)===O&&!(E!=null&&E.matches)}i.isDesktopDevice=a;function r(){return t().getDevice().model==="iPhone"}i.isIPhone=r;function s(){let M=t().getOS();return M.name==="iOS"&&M.version!=null&&M.version.localeCompare("16.3",void 0,{numeric:!0})>=0}i.isIOSDeviceWithExtendedCameraAccess=s;function n(){return"document"in window?window.document.createElement("canvas"):null}i.getCanvas=n;function m(M){return M.name==="iOS"&&M.version!=null&&["11.2.2","11.2.5","11.2.6"].includes(M.version)}async function h(){return Bi()}i.hasSIMDSupport=h;async function A(){return Pt()}i.hasThreadsSupport=A;function b(M,O,E){let k=M[O[0]];return k==null?!1:O.length===1?typeof k===E:(typeof k=="function"||typeof k=="object")&&b(k,O.slice(1),E)}function C(){var M;let O=!0,E=null,k=null,Q=null,J=null;try{if(E=i.getCanvas(),k=i.getCanvas(),Q=E==null?void 0:E.getContext("webgl"),J=k==null?void 0:k.getContext("experimental-webgl"),!b(window,["WebGLRenderingContext"],"function")||Q==null&&J==null)throw new Error("WebGLRenderingContext is not supported")}catch{O=!1}finally{for(let re of[Q,J])typeof(re==null?void 0:re.getExtension)=="function"&&((M=re.getExtension("WEBGL_lose_context"))==null||M.loseContext());Q=null,J=null,E=null,k=null}return O}function u(){let M=!0,O=!0,E=new Set;location.protocol.startsWith("http")||E.add("httpProtocol"),b(window,["isSecureContext"],"boolean")&&!window.isSecureContext&&E.add("secureContext"),!b(navigator,["mediaDevices","getUserMedia"],"function")&&!b(navigator,["enumerateDevices"],"function")&&!b(window,["MediaStreamTrack","getSources"],"function")&&(E.add("mediaDevices"),M=!1),b(window,["Worker"],"function")||(E.add("webWorkers"),M=!1,O=!1),b(window,["WebAssembly"],"object")||(E.add("webAssembly"),M=!1,O=!1),b(window,["Blob"],"function")||(E.add("blob"),M=!1,O=!1),b(window,["URL","createObjectURL"],"function")||(E.add("urlObject"),M=!1,O=!1),b(window,["OffscreenCanvas"],"function")||E.add("offscreenCanvas"),C()||E.add("webGL");let k=t().getOS();return m(k)&&(E.add("webAssemblyErrorFree"),M=!1,O=!1),Bt()||E.add("sharedArrayBuffer"),jt()||E.add("crossOriginIsolated"),{fullSupport:M,scannerSupport:O,missingFeatures:[...E]}}i.checkBrowserCompatibility=u;async function d(){return Pi()}i.checkMultithreadingSupport=d;function l(){let M="scandit-device-id",O="localStorage"in globalThis?globalThis.localStorage:void 0;if(!O)return"";let E=O.getItem(M);if(E!=null&&E!=="")return E;if(E=(0,Ma.get)(M),E!=null&&E!=="")return O.setItem(M,E),E;let k=new Uint8Array(20);return crypto.getRandomValues(k),E=[...k].map(Q=>{let J=Q.toString(16);return J.length===1?`0${J}`:J}).join(""),O.setItem(M,E),E}i.getDeviceId=l;function c(M){return M instanceof HTMLElement||M!=null&&typeof M=="object"&&typeof M.tagName=="string"}i.isValidHTMLElement=c;function p(){var M,O;let E=t().getOS();if(E.name!=="iOS")return!0;let[k,Q]=(O=(M=E.version)==null?void 0:M.split(".").map(Number))!=null?O:[];return k>14||k===14&&Q>=6}i.isSupportedIOSVersion=p;function W(){var M,O,E,k;let Q=/iphone|ipod|ipad/.test((O=(M=t().getDevice().model)==null?void 0:M.toLowerCase())!=null?O:""),J=(k=(E=t().getBrowser().name)==null?void 0:E.toLowerCase().includes("safari"))!=null?k:!1;return Q&&!J}i.isIosWebView=W;async function ae(){var M;return((M=t().getOS().name)==null?void 0:M.toLowerCase())!=="android"?!1:t().getUA().includes("wv")?!0:[...(await fetch(document.location.toString(),{method:"HEAD"})).headers].some(([O])=>O.toLowerCase()==="x-requested-with")}i.isAndroidWebView=ae;function D(){return t().getOS().name==="Windows"}i.isWindows=D;function I(){return t().getBrowser().name==="Firefox"}i.isFirefox=I;function $(){for(let M of["vibrate","webkitVibrate","msVibrate","mozVibrate"])if(typeof navigator[M]=="function")return navigator[M]}i.getSupportedVibrationMethod=$;function ne(){return $()!=null&&!a()&&!D()&&!I()}i.isVibrationAvailable=ne;function ge(){return t().getOS().name==="iOS"}i.isIOS=ge})(j||(j={}));var xa=(i=>(i.WorldFacing="worldFacing",i.UserFacing="userFacing",i))(xa||{}),Ia=(i=>(i[i.ULTRA_HD=0]="ULTRA_HD",i[i.FULL_HD=1]="FULL_HD",i[i.HD=2]="HD",i[i.SD=3]="SD",i[i.NONE=4]="NONE",i))(Ia||{}),Da=(i=>(i.AUTO="auto",i.FOUR_TO_THREE="fourToThree",i.SIXTEEN_TO_NINE="sixteenToNine",i))(Da||{}),R;(i=>{let e=new Map([["DeviceCaptureError","AbortError"],["NotSupportedError","AbortError"],["ScreenCaptureError","AbortError"],["TabCaptureError","AbortError"],["TypeError","AbortError"],["InvalidStateError","NotAllowedError"],["MediaDeviceFailedDueToShutdown","NotAllowedError"],["MediaDeviceKillSwitchOn","NotAllowedError"],["PermissionDeniedError","NotAllowedError"],["PermissionDismissedError","NotAllowedError"],["DevicesNotFoundError","NotFoundError"],["SourceUnavailableError","NotReadableError"],["TrackStartError","NotReadableError"],["ConstraintNotSatisfiedError","OverconstrainedError"]]),t=["rear","back","rck","arrire","trasera","trs","traseira","posteriore","","","","","","","","","","arka","achterzijde","","baksidan","bagside","sau","bak","tylny","takakamera","belakang","","","spate","hts","zadn","darrere","posterior","zadn","","stranja","belakang",""],a=new Set(["Desk View Camera","Schreibtischansicht-Kamera","Camra DeskView","Cmara de Vista Cenital","Cmara da Vista de Secretria","Fotocamera di Panoramica Scrivania","","","  ","Masa Grnts Kameras","Bureauweergave-camera","  ","","Bordsvisningskamera","Kamera til Visning af skrivebord","Camera Desk View","Bordvisning-kamera","Kamera waplikacji Widok blatu","Typytnkymn kamera","Kamera Tampilan Meja","  ","   ","Camer Vizualizare birou","rasztal nzet kamerja","Stoln kamera","Cmera de lapp Vista de lEscriptori"]),r=new Set(["Front Camera","Frontkamera","Appareil photo avant","Cmara frontal","Cmera Frontal","Cmara frontal","Fotocamera (anteriore)","","","","   ","n Kamera","Camera aan voorzijde"," ","","Kamera p framsidan","Forsidekamera","Camera mt trc","Kamera foran","Przedni aparat","Etukamera","Kamera Depan"," "," ","Camer fa","Ells kamera","Pedn fotoapart","Cmera frontal","Predn kamera"," ","Prednja kamera","Kamera Depan"," "]),s=new Set(["Back Camera","Rckkamera","Camra arrire","Cmara trasera","Cmera Traseira","Cmara traseira","Fotocamera (posteriore)","","","","   ","Arka Kamera","Camera aan achterzijde"," ","","Kamera p baksidan","Bagsidekamera","Camera mt sau","Kamera bak","Tylny aparat","Takakamera","Kamera Belakang"," "," ","Camer spate","Hts kamera","Zadn fotoapart","Cmera posterior","Zadn kamera"," ","Stranja kamera","Kamera Belakang"," "]),n=new Set(["Back Dual Wide Camera","Rckseitige Dual-Weitwinkelkamera","Double appareil photo grand angle arrire","Cmara trasera dual con gran angular","Cmera Dupla Grande-Angular Traseira","Cmara grande angular dupla traseira","Fotocamera doppia con grandangolo (posteriore)","","","","   ","ift Geni Kamera Arka Yz","   ","","Dubbel vidvinkelkamera p baksidan","Camera kp rng mt sau","Dobbelt vidvinkelkamera bak","Tylny dwuobiektywowy aparat szerokoktny","Laajakulmainen kaksoistakakamera","Kamera Lebar Belakang Ganda","   ","   ","Camer dubl cu obiectiv superangular spate","Hts, ketts, szles ltszg kamera","Zadn duln irokohl fotoapart","Cmera dual posterior amb gran angular","Zadn dulna irokouhl kamera","   ","Stranja dvostruka iroka kamera","Dwikamera Lebar Belakang","   "]),m=new Set(["Back Ultra Wide Camera","Rckseitige Ultra-Weitwinkelkamera","Appareil photo ultra grand angle arrire","Cmara trasera con ultra gran angular","Cmera Ultra-Angular Traseira","Cmara ultra grande angular traseira","Fotocamera con ultra-grandangolo (posteriore)","","","","  ","Ultra Geni Kamera Arka Yz","Ultrabrede camera aan achterzijde","   ","","Ultravidvinkelkamera p baksidan","Ultravidvinkelkameraet p bagsiden","Camera cc rng mt sau","Ultravidvinkelkamera bak","Tylny aparat ultraszerokoktny","Ultralaajakulmainen takakamera","Kamera Ultra Lebar Belakang","   ","  ","Camer cu obiectiv ultrasuperangular spate","Hts, ultraszles ltszg kamera","Zadn ultra irokohl fotoapart","Cmera posterior amb ultra gran angular","Zadn ultrairokouhl kamera","  ","Stranja ultra iroka kamera","Kamera Ultralebar Belakang","   "]),h,A=!1;i.mainCameraForPositionOverridesOnDesktop=new Map,i.deviceIdToCameraObjects=new Map,i.inaccessibleDeviceIds=new Set;function b(g,w){i.mainCameraForPositionOverridesOnDesktop.set(g,w)}i.setMainCameraForPositionOverridesOnDesktop=b;function C(){i.mainCameraForPositionOverridesOnDesktop.clear()}i.clearMainCameraForPositionOverridesOnDesktop=C;function u(){return navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)}function d(){if(typeof navigator.enumerateDevices=="function")return navigator.enumerateDevices.bind(navigator);if(typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.enumerateDevices=="function")return navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices)}function l(){A=!0}function c(g){let w=g.toLowerCase();return t.some(f=>w.includes(f))}function p(g){return r.has(g)}i.isIOSFrontCameraLabel=p;function W(g){return s.has(g)}i.isIOSBackCameraLabel=W;function ae(g){return n.has(g)}i.isIOSBackDualWideCameraLabel=ae;function D(g){return m.has(g)}i.isIOSUltraWideBackCameraLabel=D;function I(g){var w;let f=g.message==="Invalid constraint"?"OverconstrainedError":(w=e.get(g.name))!=null?w:g.name;Object.defineProperty(g,"name",{value:f})}function $(g){if(g.length===0)return{areSomeCameraLabelsFilled:!1,areAllCameraLabelsFilled:!1,areAllCameraLabelsUnfilled:!1};let w=g.every(L=>L.label!==""),f=g.every(L=>L.label==="");return{areSomeCameraLabelsFilled:!f&&!w,areAllCameraLabelsFilled:w,areAllCameraLabelsUnfilled:f}}function ne(g,w){var f;return(f=i.mainCameraForPositionOverridesOnDesktop.get(w))!=null?f:g.find(L=>L.position===w)}function ge(g,w){if(w==="worldFacing"){let f=g.find(y=>ae(y.label));if(f!=null)return f;let L=g.find(y=>W(y.label));if(L!=null)return L}else{let f=g.find(L=>p(L.label));if(f!=null)return f}}function M(g,w){let{areSomeCameraLabelsFilled:f,areAllCameraLabelsUnfilled:L}=$(g);if(L)return g[w==="userFacing"?0:g.length-1];if(f){let y=g.filter(x=>x.position===w);return y.length===1?y[0]:y[w==="userFacing"?0:y.length-1]}if(j.getUserAgentInfo().getOS().name==="iOS"){let y=ge(g,w);if(y)return y}return g.filter(y=>y.position===w).sort((y,x)=>y.label.localeCompare(x.label))[0]}function O(g,w){return j.isDesktopDevice()?ne(g,w):M(g,w)}i.getMainCameraForPosition=O;function E(g,w){return g.unshift(g.splice(w,1)[0])}function k(g,w){function f(x,P){let H=i.mainCameraForPositionOverridesOnDesktop.get(P);return H!=null&&x.includes(H)&&(x=x.filter(se=>se!==H),x.unshift(H)),x}let L=g.filter(x=>x.position==="userFacing"),y=g.filter(x=>x.position==="worldFacing");return j.isDesktopDevice()?(L=f(L,"userFacing"),y=f(y,"worldFacing")):g.every(x=>x.label==="")?y.reverse():(L.sort((x,P)=>x.label.localeCompare(P.label)),y.sort((x,P)=>x.label.localeCompare(P.label)),j.getUserAgentInfo().getOS().name==="iOS"&&(L.some((x,P)=>p(x.label)&&E(L,P)>=0),y.some((x,P)=>D(x.label)&&E(y,P)>=0),y.some((x,P)=>ae(x.label)&&E(y,P)>=0)||y.some((x,P)=>W(x.label)&&E(y,P)>=0))),w==="userFacing"?[...L,...y]:[...y,...L]}i.sortCamerasForCameraPosition=k;function Q(g,w){let f=g.getVideoTracks();if(f.length>0){let L=f[0],y;typeof L.getSettings=="function"&&(y=L.getSettings(),y.facingMode!=null&&y.facingMode.length>0&&(w.position=y.facingMode==="environment"?"worldFacing":"userFacing"));let{label:x=""}=L;x.length>0&&(w.label=x)}}i.adjustCameraFromMediaStream=Q;function J(g,w,f){if(i.deviceIdToCameraObjects.has(g.deviceId))return i.deviceIdToCameraObjects.get(g.deviceId);let{label:L="",deviceId:y}=g,x;return!j.isDesktopDevice()&&f.every(P=>P.label===""&&!i.deviceIdToCameraObjects.has(P.deviceId))?x=f.length===1||w+1<=Math.floor(f.length/2)?"userFacing":"worldFacing":x=c(L)?"worldFacing":"userFacing",{position:x,label:L,deviceId:y}}function re(g){let w=g.map((f,L,y)=>J(f,L,y)).map(f=>(f.deviceId!==""&&i.deviceIdToCameraObjects.set(f.deviceId,f),f)).filter(f=>!/\b(?:ir|infrared)\b/i.test(f.label)).filter(f=>!a.has(f.label)).filter(f=>!i.inaccessibleDeviceIds.has(f.deviceId));if(!j.isDesktopDevice()&&w.length>1&&!w.some(f=>f.position==="worldFacing")){let f=w.length-1,L=w.map(y=>{let x=/\b(\d+)mp?\b/i.exec(y.label);return x!=null?Number.parseInt(x[1],10):Number.NaN});L.some(y=>Number.isNaN(y))||(f=L.lastIndexOf(Math.max(...L))),w[f].position="worldFacing"}return w}async function Ye(){if(h!=null&&h.length>0&&h.every(g=>g.label===""&&!i.deviceIdToCameraObjects.has(g.deviceId)))try{return await u()({video:!0,audio:!1})}catch{}}function pe(g,w){var f,L;if(w.length>0&&g.length===w.length&&!w.every((y,x)=>g[x].deviceId===y.deviceId)){let y={};for(let[x,P]of g.entries()){let H=i.deviceIdToCameraObjects.get(P.deviceId);if(H==null||H.label!==((L=(f=w[x])==null?void 0:f.label)!=null?L:""))continue;let se=w[x].deviceId;y[H.deviceId]=se,i.inaccessibleDeviceIds.has(H.deviceId)&&i.inaccessibleDeviceIds.add(se),H.deviceId=se,i.deviceIdToCameraObjects.set(se,H)}o.log(o.Level.Debug,"Detected updated camera deviceId information and updated it accordingly",y)}}function Se(){typeof navigator.mediaDevices.addEventListener=="function"?navigator.mediaDevices.addEventListener("devicechange",l):navigator.mediaDevices.ondevicechange=l}async function Me(){let g,w=d();if(w)g=await w();else throw new rt({fullSupport:!1,scannerSupport:!0,missingFeatures:["mediaDevices"]});return g.filter(f=>f.kind==="videoinput")}async function Le(g=!1,w=!1){var f;let L=j.checkBrowserCompatibility();if(!L.fullSupport)throw new rt(L);if(Se(),h==null||g||A){A=!1;let x,P=h??[];h=[];try{h=await Me(),w||(x=await Ye(),x!=null&&(h=await Me())),o.log(o.Level.Debug,"Camera list (devices):",...h),pe(P,h)}catch(H){throw I(H),H}finally{for(let H of(f=x==null?void 0:x.getVideoTracks())!=null?f:[])H.stop()}}let y=re(h);return o.log(o.Level.Debug,"Camera list (cameras): ",...y),[...y]}i.getCameras=Le;async function xe(g){return o.log(o.Level.Debug,"Attempt to access camera (parameters):",g.video),new Promise((w,f)=>{window.setTimeout(()=>{let L=u()(g);if(L==null){f(new ie({name:"AbortError"}));return}w(L)},0)})}function Ie(g,w){let f={resizeMode:"none"};switch(g){case 0:return{...f,width:{min:2880,ideal:w==="fourToThree"?2880:3840,max:4096},height:{min:1800,ideal:2160,max:2400}};case 1:return{...f,width:{min:1440,ideal:w==="fourToThree"?1440:1920,max:2160},height:{min:900,ideal:1080,max:1440}};case 2:return{...f,width:{min:960,ideal:w==="fourToThree"?960:1280,max:1440},height:{min:480,ideal:720,max:960}};case 3:return{...f,width:{min:640,ideal:640,max:800},height:{min:360,ideal:w==="fourToThree"?480:360,max:640}};case 4:default:return{}}}i.getUserMediaVideoParameters=Ie;function he(g){g.deviceId!==""&&(o.log(o.Level.Debug,"Camera marked to be inaccessible:",g),i.inaccessibleDeviceIds.add(g.deviceId))}i.markCameraAsInaccessible=he;async function De(g,w,f){o.log(o.Level.Debug,"Attempt to access camera (camera):",g);let L={audio:!1,video:Ie(w,f)};g.deviceId===""?L.video.facingMode={ideal:g.position==="worldFacing"?"environment":"user"}:L.video.deviceId={exact:g.deviceId};try{let y=await xe(L);return Q(y,g),y}catch(y){throw I(y),["OverconstrainedError","NotReadableError","NotAllowedError"].includes(y.name)||he(g),y}}i.accessCameraStream=De})(R||(R={}));var st;(i=>{async function e(t,a){return R.getCameras(t??!1,a??!1)}i.getCameras=e})(st||(st={}));function Na(i,e,t){let a=i.createProgram();if(!a)throw new Error("Cannot create webgl program");return i.attachShader(a,e),i.attachShader(a,t),i.linkProgram(a),i.getProgramParameter(a,i.LINK_STATUS)?a:(o.log(o.Level.Error,"Program linking error:",i.getProgramInfoLog(a)),i.deleteProgram(a),null)}function Lt(i,e,t){let a=i.createShader(e);if(!a)throw new Error("Cannot create a shader");return i.shaderSource(a,t),i.compileShader(a),i.getShaderParameter(a,i.COMPILE_STATUS)?a:(o.log(o.Level.Error,"Shader compilation error:",i.getShaderInfoLog(a)),i.deleteShader(a),null)}var Oa=`
attribute vec2 a_position;
varying vec2 v_texcoord;

void main() {
  gl_Position = vec4(a_position, 0, 1);
  v_texcoord = a_position * 0.5 + 0.5;
}
`,Ta=`
precision mediump float;
varying vec2 v_texcoord;
uniform sampler2D u_texture;
uniform float x_spacing; // Uniform for x-spacing between pixels

// Function to calculate grayscale
float toGray(vec4 color) {
  return dot(color.rgb, vec3(0.299, 0.587, 0.114));
}

void main() {
  // Sample adjacent pixels with spacing of 1/width
  vec4 a = texture2D(u_texture, v_texcoord + vec2(0.0 * x_spacing, 0.0));
  vec4 b = texture2D(u_texture, v_texcoord + vec2(1.0 * x_spacing, 0.0));
  vec4 c = texture2D(u_texture, v_texcoord + vec2(2.0 * x_spacing, 0.0));
  vec4 d = texture2D(u_texture, v_texcoord + vec2(3.0 * x_spacing, 0.0));

  // Calculate grayscale values
  float grayscaleA = toGray(a);
  float grayscaleB = toGray(b);
  float grayscaleC = toGray(c);
  float grayscaleD = toGray(d);

  // Set the final color with grayscale values
  gl_FragColor = vec4(grayscaleA, grayscaleB, grayscaleC, grayscaleD);
}`,_a=class{constructor(e){this.colorType="GRAYSCALE",this._originalGLContext=e,this._canvas=document.createElement("canvas")}get _webglContext(){if(!this._ctx){if(this._ctx=this._canvas.getContext("webgl"),!this._ctx)throw new Error("Cannot get webgl context");this.setup()}return this._ctx}readFromSource(e){var t;this.updateCanvasSizeIfNeeded();let a=(t=e==null?void 0:e.videoWidth)!=null?t:this._originalGLContext.drawingBufferWidth,{drawingBufferWidth:r,drawingBufferHeight:s,TEXTURE_2D:n,RGBA:m,UNSIGNED_BYTE:h,TRIANGLES:A}=this._webglContext,b=r*s*4;(!this.pixelsData||this.pixelsData.length!==b)&&(this.pixelsData=new Uint8ClampedArray(b)),this._webglContext.viewport(0,0,r,s);let C=this._webglContext.getUniformLocation(this._shaderProgram,"x_spacing"),u=1/a;this._webglContext.uniform1f(C,u),this._webglContext.texImage2D(n,0,m,m,h,e),this._webglContext.drawArrays(A,0,6),this._webglContext.readPixels(0,0,r,s,m,h,this.pixelsData);let d=new Uint8ClampedArray(this.pixelsData.buffer,0,a*s);return{width:a,height:s,data:d,colorType:"GRAYSCALE"}}updateCanvasSizeIfNeeded(){(this._canvas.width!==this._originalGLContext.drawingBufferWidth/4||this._canvas.height!==this._originalGLContext.drawingBufferHeight)&&(this._canvas.width=this._originalGLContext.drawingBufferWidth/4,this._canvas.height=this._originalGLContext.drawingBufferHeight)}setup(){this.initShaderProgram(),this.initBuffers(),this.initTexture()}initShaderProgram(){let e=Lt(this._webglContext,this._webglContext.VERTEX_SHADER,Oa),t=Lt(this._webglContext,this._webglContext.FRAGMENT_SHADER,Ta);if(!e||!t)throw new Error("Shaders cannot be created");this._shaderProgram=Na(this._webglContext,e,t),this._webglContext.useProgram(this._shaderProgram)}initBuffers(){this._positionBuffer=this._webglContext.createBuffer(),this._webglContext.bindBuffer(this._webglContext.ARRAY_BUFFER,this._positionBuffer);let e=[-1,-1,-1,1,1,-1,1,-1,-1,1,1,1];this._webglContext.bufferData(this._webglContext.ARRAY_BUFFER,new Float32Array(e),this._webglContext.STATIC_DRAW);let t=this._webglContext.getAttribLocation(this._shaderProgram,"a_position");this._webglContext.enableVertexAttribArray(t),this._webglContext.bindBuffer(this._webglContext.ARRAY_BUFFER,this._positionBuffer),this._webglContext.vertexAttribPointer(t,2,this._webglContext.FLOAT,!1,0,0)}initTexture(){this._texture=this._webglContext.createTexture(),this._webglContext.bindTexture(this._webglContext.TEXTURE_2D,this._texture),this._webglContext.texParameteri(this._webglContext.TEXTURE_2D,this._webglContext.TEXTURE_WRAP_S,this._webglContext.CLAMP_TO_EDGE),this._webglContext.texParameteri(this._webglContext.TEXTURE_2D,this._webglContext.TEXTURE_WRAP_T,this._webglContext.CLAMP_TO_EDGE),this._webglContext.texParameteri(this._webglContext.TEXTURE_2D,this._webglContext.TEXTURE_MIN_FILTER,this._webglContext.LINEAR),this._webglContext.texParameteri(this._webglContext.TEXTURE_2D,this._webglContext.TEXTURE_MAG_FILTER,this._webglContext.LINEAR);let e=this._webglContext.getUniformLocation(this._shaderProgram,"u_texture");this._webglContext.uniform1i(e,0)}},ka=(i=>(i.RGBA="RGBA",i.GRAYSCALE="GRAYSCALE",i))(ka||{}),Ra=class{constructor(e){this.colorType="RGBA",this._contextWebGL=e}get _initialized(){return this._texture!=null&&this._framebuffer!=null}readFromSource(e){return this._initialized||this.setup(),this._pixelsDataLength=this._contextWebGL.drawingBufferWidth*this._contextWebGL.drawingBufferHeight*4,(this.pixelsData==null||this.pixelsData.byteLength!==this._pixelsDataLength)&&(this.pixelsData=void 0,this.pixelsData=new Uint8ClampedArray(this._pixelsDataLength)),this._contextWebGL.texImage2D(this._contextWebGL.TEXTURE_2D,0,this._contextWebGL.RGBA,this._contextWebGL.RGBA,this._contextWebGL.UNSIGNED_BYTE,e),this._contextWebGL.readPixels(0,0,this._contextWebGL.drawingBufferWidth,this._contextWebGL.drawingBufferHeight,this._contextWebGL.RGBA,this._contextWebGL.UNSIGNED_BYTE,this.pixelsData),{width:this._contextWebGL.drawingBufferWidth,height:this._contextWebGL.drawingBufferHeight,data:this.pixelsData,colorType:this.colorType}}setup(){this._texture=this._contextWebGL.createTexture(),this._texture==null&&o.log(o.Level.Warn,"Could not create texture from WebGLRenderingContext"),this._contextWebGL.bindTexture(this._contextWebGL.TEXTURE_2D,this._texture),this._framebuffer=this._contextWebGL.createFramebuffer(),this._framebuffer==null&&o.log(o.Level.Warn,"Could not create frameBuffer from WebGLRenderingContext"),this._contextWebGL.bindFramebuffer(this._contextWebGL.FRAMEBUFFER,this._framebuffer),this._contextWebGL.framebufferTexture2D(this._contextWebGL.FRAMEBUFFER,this._contextWebGL.COLOR_ATTACHMENT0,this._contextWebGL.TEXTURE_2D,this._texture,0),this._contextWebGL.texParameteri(this._contextWebGL.TEXTURE_2D,this._contextWebGL.TEXTURE_WRAP_S,this._contextWebGL.CLAMP_TO_EDGE),this._contextWebGL.texParameteri(this._contextWebGL.TEXTURE_2D,this._contextWebGL.TEXTURE_WRAP_T,this._contextWebGL.CLAMP_TO_EDGE),this._contextWebGL.texParameteri(this._contextWebGL.TEXTURE_2D,this._contextWebGL.TEXTURE_MIN_FILTER,this._contextWebGL.NEAREST),this._contextWebGL.texParameteri(this._contextWebGL.TEXTURE_2D,this._contextWebGL.TEXTURE_MAG_FILTER,this._contextWebGL.NEAREST)}},Fa=(i=>(i.CONTINUOUS="continuous",i.MANUAL="manual",i.NONE="none",i.SINGLE_SHOT="single-shot",i))(Fa||{}),ja=(i=>(i[i.ULTRA_HD=0]="ULTRA_HD",i[i.FULL_HD=1]="FULL_HD",i[i.HD=2]="HD",i[i.SD=3]="SD",i[i.NONE=4]="NONE",i))(ja||{}),Ba=(i=>(i.CAMERA_PROPERTIES="cameraProperties",i.CAMERA_ACCESS_ERROR="cameraAccessError",i))(Ba||{}),te=class B{constructor(){this.checkCameraVideoStreamAccessIfVisibleListener=this.checkCameraVideoStreamAccessIfVisible.bind(this),this.handleWebGLContextLostListener=this.handleWebGLContextLost.bind(this),this.listeners=new Map,this.mirrorImageOverrides=new Map,this.postStreamInitializationListener=this.postStreamInitialization.bind(this),this.triggerManualFocusListener=this.triggerManualFocus.bind(this),this.triggerZoomMoveListener=this.triggerZoomMove.bind(this),this.triggerZoomStartListener=this.triggerZoomStart.bind(this),this.videoResizeListener=this.handleVideoResize.bind(this),this.videoTrackEndedListener=this.videoTrackEndedRecovery.bind(this),this.videoTrackMuteListener=this.videoTrackMuteRecovery.bind(this),this._glFrameReaders={GRAYSCALE:null,RGBA:null,current:null},this._frameReaderType="RGBA",this.cameraPosition="worldFacing",this.gui={isCameraRecoveryVisible:()=>!1,setCameraRecoveryVisible:()=>{}},this.isWebGLSupported=!j.checkBrowserCompatibility().missingFeatures.includes("webGL"),this.videoElement=document.createElement("video"),this.canvas=document.createElement("canvas"),this.canvas.addEventListener("webglcontextlost",this.handleWebGLContextLostListener)}set imageData(e){this._glFrameReaders.current!=null&&(this._glFrameReaders.current.pixelsData=e)}get mediaStream(){return this._mediaStream}set mediaStream(e){this._mediaStream=e,e&&(this.mediaTrackCapabilitiesPromise=new Promise(t=>{this.mediaTrackCapabilitiesPromiseResolver=t}))}get canvas2dContext(){return this._canvas2dContext||(this._canvas2dContext=this.canvas.getContext("2d",{willReadFrequently:!0}),this._canvas2dContext==null&&o.log(o.Level.Warn,"Unable to get 2d canvas context"),this.handleVideoResize()),this._canvas2dContext}get canvasWebGLContext(){var e;if(!this._canvas2dContext&&!this._canvasWebGLContext){if(!this.isWebGLSupported){o.log(o.Level.Warn,"WebGL context not supported, falling back to 2d canvas context. This may impact the scanning performance.");return}let t=(e=this.canvas.getContext("webgl",{alpha:!1,antialias:!1}))!=null?e:this.canvas.getContext("experimental-webgl",{alpha:!1,antialias:!1});t!=null&&(this._canvasWebGLContext=t,this._glFrameReaders.GRAYSCALE=new _a(t),this._glFrameReaders.RGBA=new Ra(t),this._glFrameReaders.current=this._glFrameReaders[this._frameReaderType],o.log(o.Level.Debug,`Frame will be sent in ${this._frameReaderType} mode`),this.handleVideoResize())}return this._canvasWebGLContext}static instance(){return B._instance==null&&(B._instance=new B),B._instance}requestVideoFrame(e){return"requestVideoFrameCallback"in HTMLVideoElement.prototype?this.videoElement.requestVideoFrameCallback(e):requestAnimationFrame(e)}cancelVideoFrame(e){if("cancelVideoFrameCallback"in HTMLVideoElement.prototype){this.videoElement.cancelVideoFrameCallback(e);return}cancelAnimationFrame(e)}addListener(e,t){var a;let r=(a=this.listeners.get(e))!=null?a:[];r.includes(t)||this.listeners.set(e,[...r,t])}async applyCameraSettings(e){if(this.selectedCameraSettings=e,this.activeCamera==null)throw new ie(B.noCameraErrorParameters);return this.initializeCameraWithSettings(this.activeCamera,e)}captureImage(){var e;if(((e=this.mediaStream)==null?void 0:e.active)!=null){if(this.canvasWebGLContext!=null)return this.captureImageForWebGLContext();if(this.canvas2dContext!=null)return this.captureImageFor2dContext()}return null}async initializeCameraWithSettings(e,t){if(this.cameraInitializationPromise&&await this.cameraInitializationPromise,e==null)throw new ie(B.noCameraErrorParameters);return this.setSelectedCamera(e),this.selectedCameraSettings=t,this.activeCameraSettings=t,this.cameraInitializationPromise=this.initializeCameraAndCheckUpdatedSettings(e),this.cameraInitializationPromise}isMirrorImageEnabled(){if(this.selectedCamera&&this.activeCamera){let e=this.mirrorImageOverrides.get(this.activeCamera);return e??this.activeCamera.position==="userFacing"}return!1}isPinchToZoomEnabled(){return this.pinchToZoomEnabled}isTapToFocusEnabled(){return this.tapToFocusEnabled}async isTorchAvailable(){var e;return this.mediaStream?(await this.waitForCapabilities(),((e=this.mediaTrackCapabilities)==null?void 0:e.torch)===!0):!1}async playVideo(){return new Promise(e=>{this._canvas2dContext&&this._canvas2dContext.clearRect(0,0,this.canvas.width,this.canvas.height);let t=this.videoElement.play();t==null?e():t.then(e).catch(()=>{e()})})}async reinitializeCamera(){if(this.activeCamera==null)o.log(o.Level.Debug,"Camera reinitialization delayed");else{o.log(o.Level.Debug,"Reinitialize camera:",this.activeCamera);try{let e=this.activeCamera;await this.stopStream(),await this.initializeCameraWithSettings(e,this.activeCameraSettings)}catch(e){throw o.log(o.Level.Warn,"Couldn't access camera:",this.activeCamera,e),this.emit("cameraAccessError",e),e}}}removeListener(e,t){var a;let r=((a=this.listeners.get(e))!=null?a:[]).filter(s=>s!==t);this.listeners.set(e,r)}async setCameraPosition(e){var t;this.setInitialCameraPosition(e);let a=R.getMainCameraForPosition(await R.getCameras(),e);if(a&&a.deviceId!==((t=this.selectedCamera)==null?void 0:t.deviceId))return this.initializeCameraWithSettings(a,this.selectedCameraSettings)}async setExposure(e){var t,a,r,s,n,m,h,A;let b=(a=(t=this.mediaStream)==null?void 0:t.getVideoTracks())!=null?a:[];if(b.length===0||typeof b[0].applyConstraints!="function")return;await this.waitForCapabilities();let C=e.time!=null&&e.time>0?"manual":"continuous";if(((s=(r=this.mediaTrackCapabilities)==null?void 0:r.exposureMode)==null?void 0:s.includes(C))===!0){if(await b[0].applyConstraints({advanced:[{exposureMode:C}]}),e.time!=null&&e.time>0&&this.mediaTrackCapabilities.exposureTime){let u=Math.max((n=this.mediaTrackCapabilities.exposureTime.min)!=null?n:.01,Math.min(e.time,(m=this.mediaTrackCapabilities.exposureTime.max)!=null?m:1e5));await b[0].applyConstraints({advanced:[{exposureTime:u}]})}else if(e.compensation!=null&&C==="continuous"&&this.mediaTrackCapabilities.exposureCompensation){let u=Math.max((h=this.mediaTrackCapabilities.exposureCompensation.min)!=null?h:-10,Math.min(e.compensation,(A=this.mediaTrackCapabilities.exposureCompensation.max)!=null?A:10));await b[0].applyConstraints({advanced:[{exposureCompensation:u}]})}}}async setFocus(e){var t,a,r,s,n;if(!this.mediaStream)return;let m=this.mediaStream.getVideoTracks();if(m.length>0&&typeof m[0].applyConstraints=="function"){await this.waitForCapabilities();let h=e>=0?"manual":"continuous";if(((a=(t=this.mediaTrackCapabilities)==null?void 0:t.focusMode)==null?void 0:a.includes(h))===!0&&(await m[0].applyConstraints({advanced:[{focusMode:h}]}),h==="manual"&&this.mediaTrackCapabilities.focusDistance)){let A=Math.max(0,Math.min(e,1))*(((r=this.mediaTrackCapabilities.focusDistance.max)!=null?r:1e3)-((s=this.mediaTrackCapabilities.focusDistance.min)!=null?s:.01))+((n=this.mediaTrackCapabilities.focusDistance.min)!=null?n:.01);await m[0].applyConstraints({advanced:[{focusDistance:A}]})}}}async setFrameRate(e){var t,a,r;if(this.mediaStream&&(await this.waitForCapabilities(),(t=this.mediaTrackCapabilities)!=null&&t.frameRate)){let s=this.mediaStream.getVideoTracks();if(s.length>0&&typeof s[0].applyConstraints=="function"){let n=Math.min((a=this.mediaTrackCapabilities.frameRate.max)!=null?a:240,(r=e.max)!=null?r:240);await s[0].applyConstraints({advanced:[{frameRate:n}]})}}}setInitialCameraPosition(e){this.cameraPosition=e}setInteractionOptions(e,t,a){this.torchToggleEnabled=e,this.tapToFocusEnabled=t,this.pinchToZoomEnabled=a}setMirrorImageEnabled(e,t){this.selectedCamera&&(e?(this.videoElement.classList.add(B.MIRRORED_CLASS_NAME),this.canvas.classList.add(B.MIRRORED_CLASS_NAME)):(this.videoElement.classList.remove(B.MIRRORED_CLASS_NAME),this.canvas.classList.remove(B.MIRRORED_CLASS_NAME)),t&&this.mirrorImageOverrides.set(this.selectedCamera,e))}setPinchToZoomEnabled(e){this.pinchToZoomEnabled=e,this.mediaStream&&(this.pinchToZoomEnabled?this.enablePinchToZoomListeners():this.disablePinchToZoomListeners())}setSelectedCamera(e){this.selectedCamera=e}setSelectedCameraSettings(e){this.selectedCameraSettings=e}setTapToFocusEnabled(e){this.tapToFocusEnabled=e,this.mediaStream&&(this.tapToFocusEnabled?this.enableTapToFocusListeners():this.disableTapToFocusListeners())}async setTorchEnabled(e){var t;if(this.mediaStream&&((t=this.mediaTrackCapabilities)==null?void 0:t.torch)===!0){this.torchEnabled=e;let a=this.mediaStream.getVideoTracks();a.length>0&&typeof a[0].applyConstraints=="function"&&await a[0].applyConstraints({advanced:[{torch:e}]})}}async setZoom(e){var t,a,r;if(this.mediaStream&&(await this.waitForCapabilities(),(t=this.mediaTrackCapabilities)!=null&&t.zoom)){let s=this.mediaStream.getVideoTracks();if(s.length>0&&typeof s[0].applyConstraints=="function"){let n=Math.max((a=this.mediaTrackCapabilities.zoom.min)!=null?a:1,Math.min(e,(r=this.mediaTrackCapabilities.zoom.max)!=null?r:16));await s[0].applyConstraints({advanced:[{zoom:n}]})}}}async setupCameras(){return this.cameraSetupPromise?this.cameraSetupPromise:(this.cameraSetupPromise=this.setupCamerasAndStream(),this.cameraSetupPromise)}pauseStream(){if(!this.mediaStream)return;let e=this.mediaStream.getVideoTracks()[0];e.enabled=!1,o.log(o.Level.Debug,"Pause camera video stream",this.mediaStream)}resumeStream(){if(!this.mediaStream)return;let e=this.mediaStream.getVideoTracks()[0];e.enabled=!0,o.log(o.Level.Debug,"Resume camera video stream",this.mediaStream)}async stopStream(e=!1){this.activeCamera&&(this.activeCamera.currentResolution=void 0),this.activeCamera=void 0,this.torchEnabled=!1,this.mediaStream&&(o.log(o.Level.Debug,`Stop camera video stream access${e?" (abort access detection)":""}:`,this.mediaStream),document.removeEventListener("visibilitychange",this.checkCameraVideoStreamAccessIfVisibleListener),window.clearTimeout(this.cameraAccessTimeout),window.clearInterval(this.videoMetadataCheckInterval),window.clearTimeout(this.getCapabilitiesTimeout),window.clearTimeout(this.manualFocusWaitTimeout),window.clearTimeout(this.manualToAutofocusResumeTimeout),window.clearInterval(this.autofocusInterval),this.videoElement.pause(),await new Promise(t=>{setTimeout(()=>{var a,r,s;for(let n of(r=(a=this.mediaStream)==null?void 0:a.getVideoTracks())!=null?r:[])n.removeEventListener("ended",this.videoTrackEndedListener),n.stop();this.videoElement.srcObject=null,this._canvas2dContext&&this._canvas2dContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.mediaStream=void 0,this.mediaTrackCapabilities=void 0,this.mediaTrackCapabilitiesPromise=void 0,this.mediaTrackCapabilitiesPromiseResolver=void 0,e||(s=this.abortedCameraInitializationResolveCallback)==null||s.call(this),t()},0)}))}stopVideoTracks(){if(this.mediaStream!=null)for(let e of this.mediaStream.getVideoTracks())e.stop()}async toggleTorch(){this.torchEnabled=!this.torchEnabled,await this.setTorchEnabled(this.torchEnabled)}updateCanvasVideoImage(){this.canvas2dContext.drawImage(this.videoElement,0,0)}async waitForCapabilities(){var e;return(e=this.mediaTrackCapabilitiesPromise)!=null?e:Promise.resolve()}setFrameReaderType(e){this._frameReaderType=e,this._glFrameReaders.current=this._glFrameReaders[e],o.log(o.Level.Debug,`Change frame reader type. Frames will be sent in ${this._frameReaderType} mode`)}async allowPictureInPicture(e){e?(this.videoElement.disablePictureInPicture=!1,this.videoElement.removeAttribute("controlslist"),this.videoElement.removeAttribute("disablepictureinpicture")):(this.videoElement.disablePictureInPicture=!0,this.videoElement.setAttribute("controlslist","nodownload"),this.videoElement.setAttribute("disablepictureinpicture","true")),await this.reinitializeCamera()}async accessAutoselectedCamera(e){let t=R.sortCamerasForCameraPosition(e,this.cameraPosition),a=t.shift();for(;a;)try{await this.initializeCameraWithSettings(a,this.selectedCameraSettings);return}catch(r){if(this.setSelectedCamera(),t.length>0){o.log(o.Level.Warn,"Couldn't access camera:",a,r),a=t.shift();continue}throw r}throw new ie(B.noCameraErrorParameters)}async accessInitialCamera(){let e={position:this.cameraPosition,deviceId:"",label:""};try{await this.initializeCameraWithSettings(e,this.selectedCameraSettings)}catch{}finally{this.setSelectedCamera()}return e}recreateCanvas(){this.canvas.removeEventListener("webglcontextlost",this.handleWebGLContextLostListener),this._canvasWebGLContext=void 0,this._canvas2dContext=void 0;let e=document.createElement("canvas");e.addEventListener("webglcontextlost",this.handleWebGLContextLostListener),e.width=this.canvas.width,e.height=this.canvas.height,e.className=this.canvas.className,this.canvas=e}captureImageFor2dContext(){if(!this.isVideoAndContextStateValid())return null;let{width:e,height:t}=this.canvas;return{colorType:"RGBA",data:this.canvas2dContext.getImageData(0,0,e,t).data,width:e,height:t}}captureImageForWebGLContext(){if(!this.isVideoAndContextStateValid()||!this.canvasWebGLContext||this.canvasWebGLContext.drawingBufferWidth<=2||this.canvasWebGLContext.drawingBufferHeight<=2||this._glFrameReaders.current==null)return null;let e=this._glFrameReaders.current.readFromSource(this.videoElement);if(e.data[3]!==255&&e.colorType==="RGBA"){if(o.log(o.Level.Warn,"Detected incorrect GPU accelerated WebGL image processing, switching to canvas mode"),this.recreateCanvas(),this.canvas2dContext==null)throw new Error("Unable to get 2d canvas context");return this.captureImage()}return e}async checkCameraAccess(e){return new Promise((t,a)=>{this.cameraAccessRejectCallback=r=>{o.log(o.Level.Debug,"Camera video stream access failure (video data load timeout):",e),this.gui.setCameraRecoveryVisible(!0),a(r)},this.setCameraAccessTimeout()})}checkCameraVideoStreamAccessIfVisible(){document.visibilityState==="visible"&&(o.log(o.Level.Debug,"Page is visible again, waiting for camera video stream start..."),document.removeEventListener("visibilitychange",this.checkCameraVideoStreamAccessIfVisibleListener),this.setCameraAccessTimeout())}async checkVideoMetadata(e){return new Promise((t,a)=>{this.videoElement.onloadeddata=()=>{if(this.videoElement.onloadeddata=null,window.clearTimeout(this.cameraAccessTimeout),this.videoElement.videoWidth>2&&this.videoElement.videoHeight>2&&this.videoElement.currentTime>0){this.updateActiveCameraCurrentResolution(e),o.log(o.Level.Debug,"Camera video stream access success:",e),t();return}let r=performance.now();window.clearInterval(this.videoMetadataCheckInterval),this.videoMetadataCheckInterval=window.setInterval(async()=>{if(this.videoElement.videoWidth<=2||this.videoElement.videoHeight<=2||this.videoElement.currentTime===0){if(performance.now()-r>B.videoMetadataCheckTimeoutMs){o.log(o.Level.Warn,"Camera video stream access failure (valid video metadata timeout):",e),window.clearInterval(this.videoMetadataCheckInterval),await this.stopStream(!0),a(new ie(B.notReadableErrorParameters));return}return}window.clearInterval(this.videoMetadataCheckInterval),this.updateActiveCameraCurrentResolution(e),o.log(o.Level.Debug,"Camera video stream access success:",e),t()},B.videoMetadataCheckIntervalMs)}})}disablePinchToZoomListeners(){this.videoElement.removeEventListener("touchstart",this.triggerZoomStartListener),this.videoElement.removeEventListener("touchmove",this.triggerZoomMoveListener)}disableTapToFocusListeners(){for(let e of["touchend","mousedown"])this.videoElement.removeEventListener(e,this.triggerManualFocusListener)}emit(e,t){var a;let r=(a=this.listeners.get(e))!=null?a:[];for(let s of r)s(t)}enablePinchToZoomListeners(){this.videoElement.addEventListener("touchstart",this.triggerZoomStartListener),this.videoElement.addEventListener("touchmove",this.triggerZoomMoveListener)}enableTapToFocusListeners(){for(let e of["touchend","mousedown"])this.videoElement.addEventListener(e,this.triggerManualFocusListener)}getActiveCamera(e,t,a){return e.length===1?e[0]:e.find(r=>r.deviceId===a||r.label!==""&&r.label===t)}getInitialCameraResolutionConstraint(e){var t;let a;switch((t=this.activeCameraSettings)==null?void 0:t.preferredResolution){case"uhd4k":{a=0;break}case"fullHd":{a=1;break}case"hd":default:{a=2;break}}return a}async handleCameraInitializationError(e,t,a){if(!["OverconstrainedError","NotReadableError"].includes(a.name)||a.name==="NotReadableError"&&t===4)throw o.log(o.Level.Debug,"Camera video stream access failure (unrecoverable error)",e,a),a.name!=="NotAllowedError"&&R.markCameraAsInaccessible(e),a;if(a.name==="OverconstrainedError"&&t===4){if(e.deviceId==="")throw o.log(o.Level.Warn,"Camera video stream access failure (no camera with such type error)",e,a),a;o.log(o.Level.Warn,"Detected non-existent deviceId error, attempt to find and reaccess updated camera",e,a);let r=e.deviceId;if(await R.getCameras(!0),r===e.deviceId)throw o.log(o.Level.Warn,"Camera video stream access failure (updated camera not found after non-existent deviceId error)",e,a),R.markCameraAsInaccessible(e),a;return o.log(o.Level.Warn,"Updated camera found (recovered from non-existent deviceId error), attempt to access it",e),this.initializeCameraForResolution(e)}return this.initializeCameraForResolution(e,t+1)}handleVideoResize(){if(!(this.videoElement.videoWidth<=2||this.videoElement.videoHeight<=2)){if(this.activeCamera&&this.updateActiveCameraCurrentResolution(this.activeCamera),this.canvasWebGLContext!=null){if(this.canvas.width===this.videoElement.videoWidth&&this.canvas.height===this.videoElement.videoHeight)return;this.canvas.width=this.videoElement.videoWidth,this.canvas.height=this.videoElement.videoHeight,this.canvasWebGLContext.viewport(0,0,this.canvasWebGLContext.drawingBufferWidth,this.canvasWebGLContext.drawingBufferHeight)}else if(this.canvas2dContext!=null){if(this.canvas.width===this.videoElement.videoWidth&&this.canvas.height===this.videoElement.videoHeight)return;this.canvas.width=this.videoElement.videoWidth,this.canvas.height=this.videoElement.videoHeight}}}handleWebGLContextLost(){o.log(o.Level.Warn,"WebGL context has been lost, restoring..."),this._canvasWebGLContext=void 0,this.canvasWebGLContext?(this.handleVideoResize(),o.log(o.Level.Warn,"WebGL context restored")):o.log(o.Level.Error,"WebGL context restore failed")}async initializeCameraAndCheckUpdatedSettings(e){var t,a,r,s,n;try{if(await this.initializeCameraForResolution(e),this.selectedCameraSettings!==this.activeCameraSettings&&(this.selectedCameraSettings==null||this.activeCameraSettings==null||Object.keys(this.selectedCameraSettings).some(u=>{var d,l;return((d=this.selectedCameraSettings)==null?void 0:d[u])!==((l=this.activeCameraSettings)==null?void 0:l[u])}))){this.activeCameraSettings=this.selectedCameraSettings,await this.initializeCameraAndCheckUpdatedSettings(e);return}this.activeCameraSettings&&this.activeCameraSettings.zoomFactor>1&&await this.setZoom(this.activeCameraSettings.zoomFactor);let m=(t=this.activeCameraSettings)==null?void 0:t.getProperty("minFrameRate"),h=(a=this.activeCameraSettings)==null?void 0:a.getProperty("maxFrameRate");(m!=null||h!=null)&&await this.setFrameRate({min:m,max:h});let A=(r=this.activeCameraSettings)==null?void 0:r.getProperty("manualLensPosition");A!=null&&await this.setFocus(A);let b=(s=this.activeCameraSettings)==null?void 0:s.getProperty("exposureTargetBias"),C=(n=this.activeCameraSettings)==null?void 0:n.getProperty("exposureDuration");(b!=null||C!=null)&&await this.setExposure({compensation:b,time:C})}finally{this.cameraInitializationPromise=void 0}}async initializeCameraForResolution(e,t){var a;this.gui.setCameraRecoveryVisible(!1);let r=t??this.getInitialCameraResolutionConstraint(e);this.mediaStream!=null&&e.deviceId!==""&&((a=this.activeCamera)==null?void 0:a.deviceId)===e.deviceId?await(j.isIPhone()?this.initializeStreamForResolution(e,r):this.updateStreamForResolution(e,r)):await this.initializeStreamForResolution(e,r)}async initializeStreamForResolution(e,t){var a;await this.stopStream();try{let r=(a=this.activeCameraSettings)==null?void 0:a.getProperty("preferredAspectRatio"),s=await R.accessCameraStream(e,t,r);if(o.log(o.Level.Debug,"Camera accessed, waiting for camera video stream start..."),typeof s.getVideoTracks()[0].getSettings=="function"){let n=s.getVideoTracks()[0].getSettings();if(n.width!=null&&n.height!=null&&(n.width===2||n.height===2)){if(o.log(o.Level.Debug,"Camera video stream access failure (invalid video metadata):",e),t===4)throw new ie(B.notReadableErrorParameters);return await this.stopStream(),this.initializeStreamForResolution(e,t+1)}}this.mediaStream=s;for(let n of this.mediaStream.getVideoTracks())n.addEventListener("ended",this.videoTrackEndedListener),n.addEventListener("mute",this.videoTrackMuteListener),n.addEventListener("unmute",this.videoTrackMuteListener);try{await this.setupCameraStreamVideo(e,s)}catch(n){if(t===4)throw n;return this.initializeStreamForResolution(e,t+1)}}catch(r){return this.handleCameraInitializationError(e,t,r)}}isVideoAndContextStateValid(){return this.videoElement.readyState===4&&this.videoElement.videoWidth>2&&this.videoElement.videoHeight>2&&this.canvas.width>2&&this.canvas.height>2}postStreamInitialization(){window.clearTimeout(this.getCapabilitiesTimeout),this.getCapabilitiesTimeout=window.setTimeout(()=>{this.storeStreamCapabilities(),this.setupAutofocus()},B.getCapabilitiesTimeoutMs)}async recoverStreamIfNeeded(){var e,t;let a=(e=this.mediaStream)==null?void 0:e.getVideoTracks();((t=a==null?void 0:a[0])==null?void 0:t.readyState)==="ended"&&await this.reinitializeCamera()}reportCameraProperties(e,t,a=!0){this.emit("cameraProperties",{deviceId:e,isFrontFacing:t==="userFacing",hasAutofocus:a})}setCameraAccessTimeout(){window.clearTimeout(this.cameraAccessTimeout),this.cameraAccessTimeout=window.setTimeout(async()=>{var e;document.visibilityState==="visible"?(await this.stopStream(!0),(e=this.cameraAccessRejectCallback)==null||e.call(this,new ie(B.notReadableErrorParameters))):(o.log(o.Level.Debug,"Page is currently not visible, delay camera video stream access detection"),document.addEventListener("visibilitychange",this.checkCameraVideoStreamAccessIfVisibleListener))},B.cameraAccessTimeoutMs)}setupAutofocus(){if(window.clearTimeout(this.manualFocusWaitTimeout),window.clearTimeout(this.manualToAutofocusResumeTimeout),this.mediaStream&&this.mediaTrackCapabilities){let e=this.mediaTrackCapabilities.focusMode;Array.isArray(e)&&!e.includes("continuous")&&e.includes("single-shot")&&(window.clearInterval(this.autofocusInterval),this.autofocusInterval=window.setInterval(this.triggerAutoFocus.bind(this),B.autofocusIntervalMs))}}async setupCameraStreamVideo(e,t){this.videoElement.addEventListener("loadedmetadata",this.postStreamInitializationListener),this.videoElement.addEventListener("resize",this.videoResizeListener),this.tapToFocusEnabled&&this.enableTapToFocusListeners(),this.pinchToZoomEnabled&&this.enablePinchToZoomListeners();let a=Promise.race([this.checkCameraAccess(e),this.checkVideoMetadata(e),new Promise(r=>{this.abortedCameraInitializationResolveCallback=r})]);return this.videoElement.srcObject=t,this.videoElement.load(),await this.playVideo(),this.handleVideoResize(),this.reportCameraProperties(e.deviceId,e.position),a}async setupCamerasAndStream(){var e,t;try{let a;this.selectedCamera==null&&(a=await this.accessInitialCamera());let r=await R.getCameras(!1,!0),s=(t=(e=this.mediaStream)==null?void 0:e.getVideoTracks()[0])==null?void 0:t.getSettings().deviceId;if(this.mediaStream&&a){let n=this.getActiveCamera(r,a.label,s);if(n){if(R.adjustCameraFromMediaStream(this.mediaStream,n),j.isDesktopDevice()&&(R.setMainCameraForPositionOverridesOnDesktop(this.cameraPosition,n),R.setMainCameraForPositionOverridesOnDesktop(n.position,n)),r.length===1||R.getMainCameraForPosition(r,this.cameraPosition)===n){o.log(o.Level.Debug,"Initial camera access was correct (main camera), keep camera:",n),this.setSelectedCamera(n),this.updateActiveCameraCurrentResolution(n),await this.recoverStreamIfNeeded();return}o.log(o.Level.Debug,"Initial camera access was incorrect (not main camera), change camera",{...a,deviceId:s})}else o.log(o.Level.Debug,"Initial camera access was incorrect (unknown camera), change camera",{...a,deviceId:s})}if(this.selectedCamera==null){await this.accessAutoselectedCamera(r);return}await this.initializeCameraWithSettings(this.selectedCamera,this.selectedCameraSettings)}finally{this.cameraSetupPromise=void 0}}storeStreamCapabilities(){var e;if(this.mediaStream){let t=this.mediaStream.getVideoTracks();t.length>0&&typeof t[0].getCapabilities=="function"&&(this.mediaTrackCapabilities=t[0].getCapabilities()),this.mediaTrackCapabilitiesPromiseResolver&&this.mediaTrackCapabilitiesPromiseResolver()}this.activeCamera&&this.reportCameraProperties(this.activeCamera.deviceId,this.activeCamera.position,((e=this.mediaTrackCapabilities)==null?void 0:e.focusMode)==null||this.mediaTrackCapabilities.focusMode.includes("continuous"))}async triggerAutoFocus(){await this.triggerFocusMode("single-shot")}async triggerFocusMode(e){if(this.mediaStream){let t=this.mediaStream.getVideoTracks();if(t.length>0&&typeof t[0].applyConstraints=="function")try{await t[0].applyConstraints({advanced:[{focusMode:e}]})}catch{}}}async triggerManualFocus(e){if(e){if(e.preventDefault(),e.type==="touchend"&&e.touches.length>0)return;if(this.pinchToZoomDistance!=null){this.pinchToZoomDistance=void 0;return}}if(window.clearTimeout(this.manualFocusWaitTimeout),window.clearTimeout(this.manualToAutofocusResumeTimeout),!this.mediaStream||!this.mediaTrackCapabilities)return;let t=this.mediaTrackCapabilities.focusMode;Array.isArray(t)&&t.includes("single-shot")&&(t.includes("continuous")&&t.includes("manual")?await this.triggerManualFocusForContinuous():t.includes("continuous")||await this.triggerManualFocusForSingleShot())}async triggerManualFocusForContinuous(){var e;if(!this.mediaStream)return;this.manualToAutofocusResumeTimeout=window.setTimeout(async()=>{await this.triggerFocusMode("continuous")},B.manualToAutofocusResumeTimeoutMs);let t=!0,a=this.mediaStream.getVideoTracks();a.length>0&&typeof a[0].getConstraints=="function"&&(t=((e=a[0].getConstraints().advanced)==null?void 0:e.some(r=>r.focusMode==="manual"))===!0),t?(await this.triggerFocusMode("continuous"),this.manualFocusWaitTimeout=window.setTimeout(async()=>{await this.triggerFocusMode("manual")},B.manualFocusWaitTimeoutMs)):await this.triggerFocusMode("manual")}async triggerManualFocusForSingleShot(){window.clearInterval(this.autofocusInterval),this.manualToAutofocusResumeTimeout=window.setTimeout(()=>{this.autofocusInterval=window.setInterval(this.triggerAutoFocus.bind(this),B.autofocusIntervalMs)},B.manualToAutofocusResumeTimeoutMs);try{await this.triggerFocusMode("single-shot")}catch{}}async triggerZoomMove(e){this.pinchToZoomDistance==null||(e==null?void 0:e.touches.length)!==2||e.preventDefault()}triggerZoomStart(e){var t,a,r,s;if((e==null?void 0:e.touches.length)!==2||(e.preventDefault(),this.pinchToZoomDistance=Math.hypot((e.touches[1].screenX-e.touches[0].screenX)/screen.width,(e.touches[1].screenY-e.touches[0].screenY)/screen.height),!this.mediaStream||!((t=this.mediaTrackCapabilities)!=null&&t.zoom)))return;let n=this.mediaStream.getVideoTracks();if(n.length===0||typeof n[0].getConstraints!="function")return;this.pinchToZoomInitialZoom=(a=this.mediaTrackCapabilities.zoom.min)!=null?a:1;let m=n[0].getConstraints();if(m.advanced){let h=(r=m.advanced.find(A=>"zoom"in A))==null?void 0:r.zoom;h!=null&&(this.pinchToZoomInitialZoom=typeof h=="number"?h:(s=h.ideal)!=null?s:1)}}updateActiveCameraCurrentResolution(e){this.videoElement.videoWidth>2&&this.videoElement.videoHeight>2&&(e.currentResolution={width:this.videoElement.videoWidth,height:this.videoElement.videoHeight}),e.deviceId!==""&&(this.activeCamera=e,this.setMirrorImageEnabled(this.isMirrorImageEnabled(),!1))}async updateStreamForResolution(e,t){var a;if(this.mediaStream==null)await this.initializeCameraForResolution(e,t);else try{let r=(a=this.activeCameraSettings)==null?void 0:a.getProperty("preferredAspectRatio");o.log(o.Level.Debug,"Setting new resolution for active camera video stream..."),await this.mediaStream.getVideoTracks()[0].applyConstraints(R.getUserMediaVideoParameters(t,r)),await new Promise(n=>{this.videoElement.addEventListener("timeupdate",()=>{n()},{once:!0})});let s=this.mediaStream.getVideoTracks()[0].getSettings();o.log(o.Level.Debug,"New active camera video stream resolution set",{width:s.width,height:s.height})}catch(r){if(t===4)throw r;await this.updateStreamForResolution(e,t+1)}}async videoTrackEndedRecovery(){if(document.visibilityState==="visible")try{o.log(o.Level.Debug,'Detected video track "ended" event, try to reinitialize camera'),await this.reinitializeCamera()}catch{}else o.log(o.Level.Debug,"Page is currently not visible, delay camera reinitialization until visible"),document.addEventListener("visibilitychange",this.checkCameraVideoStreamAccessIfVisibleListener)}videoTrackMuteRecovery(e){if(this.videoElement.onloadeddata!=null){o.log(o.Level.Debug,`Detected video track "${e.type}" event, delay camera video stream access detection`),this.setCameraAccessTimeout();return}let t=e.type==="mute";t!==this.gui.isCameraRecoveryVisible()&&(o.log(o.Level.Debug,`Detected video track "${e.type}" event, ${t?"enable":"disable"} camera recovery`),this.gui.setCameraRecoveryVisible(t))}};te.autofocusIntervalMs=1500,te.cameraAccessTimeoutMs=4e3,te.getCapabilitiesTimeoutMs=500,te.manualFocusWaitTimeoutMs=400,te.manualToAutofocusResumeTimeoutMs=5e3,te.noCameraErrorParameters={name:"NoCameraAvailableError",message:"No camera available"},te.notReadableErrorParameters={name:"NotReadableError",message:"Could not initialize camera correctly"},te.videoMetadataCheckIntervalMs=50,te.videoMetadataCheckTimeoutMs=4e3,te.MIRRORED_CLASS_NAME=Y.MIRRORED_CLASS_NAME,te._instance=null;var U=te,Zt=(i=>(i.On="on",i.Off="off",i.Standby="standby",i.Starting="starting",i.Stopping="stopping",i.BootingUp="bootingUp",i.WakingUp="wakingUp",i.GoingToSleep="goingToSleep",i.ShuttingDown="shuttingDown",i))(Zt||{}),Kt=(i=>(i.On="on",i.Off="off",i))(Kt||{}),Pa=(i=>(i.WorldFacing="worldFacing",i.UserFacing="userFacing",i))(Pa||{}),nt=(i=>(i.Auto="auto",i.HD="hd",i.FullHD="fullHd",i.UHD4K="uhd4k",i))(nt||{}),ot=(i=>(i.None="none",i.Manual="manual",i.ManualUntilCapture="manualUntilCapture",i.AutoOnLocation="autoOnLocation",i))(ot||{});function Fe(i){var e;return((e=i==null?void 0:i.toJSONObject())==null?void 0:e.type)==="camera"}var ue=class Xt{constructor(e){if(this.preferredResolution=Z.Camera.Settings.preferredResolution,this.zoomFactor=Z.Camera.Settings.zoomFactor,this.zoomGestureZoomFactor=Z.Camera.Settings.zoomGestureZoomFactor,this.focus={focusGestureStrategy:Z.Camera.Settings.focusGestureStrategy},e!=null)for(let t of Object.getOwnPropertyNames(e))this[t]=e[t]}get focusGestureStrategy(){return this.focus.focusGestureStrategy}set focusGestureStrategy(e){this.focus.focusGestureStrategy=e}static fromJSON(e){let t=new Xt;return t.preferredResolution=e.preferredResolution,t.zoomFactor=e.zoomFactor,t.zoomGestureZoomFactor=e.zoomGestureZoomFactor,t.focusGestureStrategy=e.focusGestureStrategy,t}setProperty(e,t){this[e]=t}getProperty(e){return this[e]}toJSONObject(){let e={preferredResolution:this.preferredResolution,zoomFactor:this.zoomFactor,zoomGestureZoomFactor:this.zoomGestureZoomFactor,focus:{focusGestureStrategy:this.focus.focusGestureStrategy}},t={};for(let a of Object.keys(this))[...Object.keys(e),"focusGestureStrategy"].includes(a)||(t[a]=this[a]);return{...e,...t}}},St=class ze{constructor(e){this.deviceId="",this.type="camera",this._currentState="off",this._settings=new ue,this._desiredTorchState="off",this._desiredState="off",this.listeners=[],this._context=null,this.stateTransitionStrategyMap={off:{on:this.transitionFromStateOffToOn.bind(this),standby:this.transitionFromStateOffToStandby.bind(this)},on:{off:this.transitionFromStateOnToOff.bind(this),standby:this.transitionFromStateOnToStandby.bind(this)},standby:{off:this.transitionFromStateStandbyToOff.bind(this),on:this.transitionFromStateStandbyToOn.bind(this)}},this.cameraManager=e??U.instance(),this.updateCanvasVideoImage=this.updateCanvasVideoImage.bind(this),this.captureAndSend=this.captureAndSend.bind(this)}static get default(){let e=new ze;return e.position="worldFacing",e}get desiredState(){return this._desiredState}get settings(){return this._settings}get currentResolution(){var e;return(e=this._currentResolution)!=null?e:null}get context(){return this._context}set context(e){this._context=e,this._context&&this.currentState==="on"&&this.startSendingCapturesToWorker()}get currentState(){return this._currentState}static atPosition(e){if(Z.Camera.availablePositions.includes(e)){let t=new ze;return t.position=e,t}return o.log(o.Level.Warn,`invalid CameraPosition: "${e}"`),null}static fromDeviceCamera(e){let t=ze.atPosition(e.position);return t.deviceId=e.deviceId,t.label=e.label,t}async switchToDesiredState(e){var t,a;return this.currentTransitionStrategyPromise&&await this.currentTransitionStrategyPromise,this.currentTransitionStrategyPromise=(a=(t=this.stateTransitionStrategyMap[this.currentState])==null?void 0:t[e])==null?void 0:a.call(t).catch(r=>{if(r instanceof DOMException&&r.message==="The associated Track is in an invalid state"){o.log(o.Level.Warn,r);return}throw r}),this.currentTransitionStrategyPromise}getDesiredTorchState(){return this._desiredTorchState}async setDesiredTorchState(e){this._desiredTorchState=e,await this.cameraManager.setTorchEnabled(this._desiredTorchState==="on"),await this.notifyContext({type:"torchState",newValue:this._desiredTorchState})}async isTorchAvailable(){return this.cameraManager.isTorchAvailable()}addListener(e){e!=null&&(this.listeners.includes(e)||this.listeners.push(e))}removeListener(e){e!=null&&this.listeners.includes(e)&&this.listeners.splice(this.listeners.indexOf(e),1)}async applySettings(e){var t;this._settings=new ue(e);let a=this.settings.getProperty("grayScaleFrameReader");if(this.cameraManager.setFrameReaderType(a?"GRAYSCALE":"RGBA"),this.currentState==="on"){let r=this.cameraManager.activeCameraSettings;(r==null?void 0:r.preferredResolution)!==this.settings.preferredResolution&&(await this.cameraManager.applyCameraSettings(this.settings),(t=this.cameraManager.activeCamera)!=null&&t.currentResolution&&(this._currentResolution={width:this.cameraManager.activeCamera.currentResolution.width,height:this.cameraManager.activeCamera.currentResolution.height})),await this.cameraManager.setZoom(this.settings.zoomFactor);let s=this.settings.getProperty("minFrameRate"),n=this.settings.getProperty("maxFrameRate");(s!=null||n!=null)&&await this.cameraManager.setFrameRate({min:s,max:n});let m=this.settings.getProperty("manualLensPosition");m!=null&&await this.cameraManager.setFocus(m);let h=this.settings.getProperty("exposureTargetBias"),A=this.settings.getProperty("exposureDuration");(h!=null||A!=null)&&await this.cameraManager.setExposure({compensation:h,time:A})}return this.notifyContext({type:"cameraSettings",newValue:this.settings})}toJSONObject(){return{type:this.type,position:this.position,settings:this.settings.toJSONObject(),desiredState:this.desiredState,desiredTorchState:this._desiredTorchState}}getMirrorImageEnabled(){var e;return(e=this._desiredMirrorImageEnabled)!=null?e:this.cameraManager.isMirrorImageEnabled()}async setMirrorImageEnabled(e){this._desiredMirrorImageEnabled=e,this.cameraManager.setMirrorImageEnabled(e,!0),this.context&&await this.context.setFrameSource(this)}getCurrentState(){return this._currentState}async setCurrentState(e){if(e!==this._currentState){this._currentState=e,this.notifyListeners();try{if(await this.notifyContext({type:"frameSourceState",newValue:e}),e==="on"){this.startSendingCapturesToWorker();return}}catch{o.log(o.Level.Warn,"Error while notifying context about new state of Camera")}}}async setupCamera(){if(this.cameraManager.setSelectedCameraSettings(this.settings),this.deviceId!==""){let e=(await st.getCameras()).find(t=>t.deviceId===this.deviceId);e&&(this.cameraManager.setInitialCameraPosition(e.position),this.cameraManager.setSelectedCamera(e))}else this.cameraManager.setSelectedCamera(),this.cameraManager.setInitialCameraPosition(this.position);await this.cameraManager.setupCameras(),typeof this._desiredMirrorImageEnabled=="boolean"?this.cameraManager.setMirrorImageEnabled(this._desiredMirrorImageEnabled,!0):this.cameraManager.setMirrorImageEnabled(this.cameraManager.isMirrorImageEnabled(),!1),this.context&&await this.context.setFrameSource(this),this.cameraManager.activeCamera&&(this.label=this.cameraManager.activeCamera.label,this.position=this.cameraManager.activeCamera.position,this.deviceId=this.cameraManager.activeCamera.deviceId,this._currentResolution=this.cameraManager.activeCamera.currentResolution)}async notifyContext(e){if(this.context)return this.context.update([e])}notifyListeners(){for(let e of this.listeners)e.didChangeState&&e.didChangeState(this,this.currentState)}updateCanvasVideoImage(){this.currentState==="on"&&this.context&&(this.cameraManager.updateCanvasVideoImage(),this._lastCanvasVideoPreviewAnimationFrame=this.cameraManager.requestVideoFrame(this.updateCanvasVideoImage))}async captureAndSend(){if(this.currentState!=="on"||!this.context)return;if(!this.context.hasEnabledMode()){this._lastCaptureRequestAnimationFrame=this.cameraManager.requestVideoFrame(this.captureAndSend);return}let e=null;try{e=this.cameraManager.captureImage()}catch(t){o.log(o.Level.Warn,t.message)}finally{if(e!=null)try{this.cameraManager.imageData=(await this.context.sendFrameToProcessor(e)).data}catch{}this._lastCaptureRequestAnimationFrame=this.cameraManager.requestVideoFrame(this.captureAndSend)}}startSendingCapturesToWorker(){this._lastCanvasVideoPreviewAnimationFrame!=null&&this.cameraManager.cancelVideoFrame(this._lastCanvasVideoPreviewAnimationFrame),this._lastCaptureRequestAnimationFrame!=null&&this.cameraManager.cancelVideoFrame(this._lastCaptureRequestAnimationFrame),this.captureAndSend()}async transitionFromStateOffToOn(){if(!(this.currentState==="on"||this.currentState==="starting"||this.currentState==="wakingUp")){this._desiredState="on",await this.setCurrentState("starting");try{await this.setupCamera(),await this.setCurrentState("on")}catch(e){throw o.log(o.Level.Error,e),await this.setCurrentState("off"),e}}}async transitionFromStateOffToStandby(){if(!(this.currentState==="standby"||this.currentState==="bootingUp"||this.currentState==="goingToSleep")){if(await this.isAndroidWebView()){o.log(o.Level.Warn,'Warning: "Standby" state does not work inside web views. Falling back to state "On".'),await this.transitionFromStateOffToOn();return}this._desiredState="standby",await this.setCurrentState("bootingUp");try{await this.setupCamera(),this.cameraManager.pauseStream(),await this.setCurrentState("standby")}catch(e){throw o.log(o.Level.Error,e),await this.setCurrentState("off"),e}await this.setCurrentState("standby"),await this.setDesiredTorchState("off")}}async transitionFromStateOnToOff(){this.currentState==="off"||this.currentState==="stopping"||(this._desiredState="off",await this.setCurrentState("stopping"),await this.cameraManager.stopStream(),await this.setCurrentState("off"),await this.setDesiredTorchState("off"))}async transitionFromStateOnToStandby(){if(!(this.currentState==="standby"||this.currentState==="bootingUp"||this.currentState==="goingToSleep")){if(await this.isAndroidWebView()){o.log(o.Level.Warn,'Warning: "Standby" state does not work inside web views. Falling back to state "Off".'),await this.transitionFromStateOnToOff();return}this._desiredState="standby",await this.setCurrentState("goingToSleep"),this.cameraManager.pauseStream(),await this.setCurrentState("standby"),await this.setDesiredTorchState("off")}}async transitionFromStateStandbyToOff(){this.currentState==="off"||this.currentState==="stopping"||(this._desiredState="off",await this.setCurrentState("shuttingDown"),await this.cameraManager.stopStream(),await this.setCurrentState("off"),await this.setDesiredTorchState("off"))}async transitionFromStateStandbyToOn(){this.currentState==="on"||this.currentState==="starting"||this.currentState==="wakingUp"||(this._desiredState="on",await this.setCurrentState("wakingUp"),this.cameraManager.resumeStream(),await this.setCurrentState("on"))}async isAndroidWebView(){return this._isAndroidWebView==null&&(this._isAndroidWebView=await j.isAndroidWebView()),this._isAndroidWebView}},za=(i=>(i.Idle="idle",i.Pressed="pressed",i))(za||{}),Ct=class{constructor(e,t){this.state="idle",this.isHover=!1,this.control=e,this.domHost=t,this.onTouchStartListener=this.onTouchStart.bind(this),this.onMouseEnterListener=this.onMouseEnter.bind(this),this.onMouseLeaveListener=this.onMouseLeave.bind(this),this.onClickListener=this.onClick.bind(this),this.setup()}get frameSource(){var e,t;return(t=(e=this.control.view)==null?void 0:e.getContext())==null?void 0:t.frameSource}get context(){var e;return(e=this.control.view)==null?void 0:e.getContext()}async install(){this.button||this.setup();let e=await this.canShow();return e?(this.updateButtonBackground(this.button,this.getImageFromState()),this.show()):this.hide(),e}remove(e=!1){e&&this.button?(this.button.removeEventListener("mouseenter",this.onMouseEnterListener),this.button.removeEventListener("mouseleave",this.onMouseLeaveListener),this.button.removeEventListener("touchstart",this.onTouchStartListener),this.button.removeEventListener("click",this.onClickListener),this.button.remove(),this.isHover=!1,this.button=void 0):this.hide()}hide(){this.button&&(this.button.style.display="none")}show(){this.button&&(this.button.style.display="block")}setupButton(){let e=document.createElement("button");return e.type="button",e.style.display="none",e.className=`scandit-control-widget scandit-control-widget-${this.control.type}`,this.updateButtonBackground(e,this.getImageFromState()),this.domHost.append(e),e.addEventListener("mouseenter",this.onMouseEnterListener),e.addEventListener("mouseleave",this.onMouseLeaveListener),j.isDesktopDevice()||e.addEventListener("touchstart",this.onTouchStartListener),e.addEventListener("click",this.onClickListener),e.setAttribute("aria-pressed",String(this.state==="pressed")),this.button=e,this.button}setup(){this.setupButton()}onTouchStart(){var e,t;(e=this.button)==null||e.removeEventListener("mouseenter",this.onMouseEnterListener),(t=this.button)==null||t.removeEventListener("mouseleave",this.onMouseLeaveListener)}onMouseEnter(){this.isHover=!0,this.updateButtonBackground(this.button,this.getImageFromState())}onMouseLeave(){this.isHover=!1,this.updateButtonBackground(this.button,this.getImageFromState())}onClick(){var e;this.state=this.state==="pressed"?"idle":"pressed",this.buttonClicked(),this.updateButtonBackground(this.button,this.getImageFromState()),(e=this.button)==null||e.setAttribute("aria-pressed",String(this.state==="pressed"))}updateButtonBackground(e,t){t!=null&&e!=null&&(e.style.backgroundImage=`url(${JSON.stringify(t)})`)}},Wa=class extends Ct{constructor(e,t){super(e,t)}async buttonClicked(){await this.frameSource.setDesiredTorchState(this.retrieveTorchState()==="on"?"off":"on")}async canShow(){return this.isTorchAvailable()}getImageFromState(){return this.retrieveTorchState()==="on"?this.isHover?this.control.torchOnPressedImage:this.control.torchOnImage:this.isHover?this.control.torchOffPressedImage:this.control.torchOffImage}setup(){if(this.control.torchOffImage==null||this.control.torchOnImage==null){o.log(o.Level.Warn,"TorchSwitchControl icon is not set or is empty, the control will not be rendered.");return}super.setup()}async isTorchAvailable(){return Fe(this.frameSource)?this.frameSource.isTorchAvailable():!1}retrieveTorchState(){return Fe(this.frameSource)?this.frameSource.getDesiredTorchState():"off"}},Ua=class We extends Ct{constructor(e,t){super(e,t)}static get Camera(){return St}static get CameraAccess(){return R}async canShow(){return(await We.CameraAccess.getCameras()).length>1}getImageFromState(){return this.isHover?this.control.pressedImage:this.control.idleImage}async buttonClicked(){if(this.isTransitioning)return;let e=await this.getNextDeviceCamera();e&&await this.switchCameras(e)}setup(){if(this.control.idleImage==null){o.log(o.Level.Warn,"CameraSwitchControl idle icon is not set or is empty, the control will not be rendered.");return}super.setup()}async getNextDeviceCamera(){var e,t;let a=await We.CameraAccess.getCameras(),r=this.frameSource?this.frameSource:null,s=(e=r==null?void 0:r.cameraManager.activeCamera)==null?void 0:e.deviceId,n=a.findIndex(m=>m.deviceId===s);return n>-1?(t=a[n+1])!=null?t:a[0]:a.length>0?a[0]:null}async switchCameras(e){var t;this.isTransitioning=!0;let a=this.frameSource;a!=null&&await a.switchToDesiredState("off");let r=new We.Camera;r.deviceId=e.deviceId,a!=null&&await r.applySettings(new ue(a.settings)),await r.switchToDesiredState("on"),await((t=this.context)==null?void 0:t.setFrameSource(r)),this.isTransitioning=!1}},Va=class Ue extends Ct{constructor(e,t){super(e,t)}static get Camera(){return St}static get CameraAccess(){return R}async install(){let e=await super.install();return e&&await this.setInitialCamera(),e}async canShow(){return!j.isIOSDeviceWithExtendedCameraAccess()||!Fe(this.frameSource)?!1:R.isIOSBackDualWideCameraLabel(this.frameSource.label)||R.isIOSBackCameraLabel(this.frameSource.label)||R.isIOSUltraWideBackCameraLabel(this.frameSource.label)}getImageFromState(){return this.isUltraWideBackCamera()?this.isHover?this.control.cameraFOVUltraWidePressedImage:this.control.cameraFOVUltraWideImage:this.isHover?this.control.cameraFOVWidePressedImage:this.control.cameraFOVWideImage}async buttonClicked(){if(this.isTransitioning)return;let e=await this.getAlternativeDeviceCamera();e&&await this.switchCameras(e)}async setInitialCamera(){var e,t;if(!this.isTransitioning&&!R.isIOSBackCameraLabel((t=(e=this.frameSource)==null?void 0:e.label)!=null?t:"")){let a=(await Ue.CameraAccess.getCameras()).find(r=>R.isIOSBackCameraLabel(r.label));a&&await this.switchCameras(a)}}setup(){if(this.control.cameraFOVUltraWideImage==null||this.control.cameraFOVWideImage==null){o.log(o.Level.Warn,"CameraFOVSwitchControl icon is not set or is empty, the control will not be rendered.");return}super.setup()}isUltraWideBackCamera(){return Fe(this.frameSource)?R.isIOSUltraWideBackCameraLabel(this.frameSource.label):!1}async getAlternativeDeviceCamera(){return(await Ue.CameraAccess.getCameras()).find(e=>this.isUltraWideBackCamera()?R.isIOSBackCameraLabel(e.label):R.isIOSUltraWideBackCameraLabel(e.label))}async switchCameras(e){var t;this.isTransitioning=!0;let a=this.frameSource;a!=null&&await a.switchToDesiredState("off");let r=new Ue.Camera;r.deviceId=e.deviceId,a!=null&&await r.applySettings(new ue(a.settings)),await r.switchToDesiredState("on"),await((t=this.context)==null?void 0:t.setFrameSource(r)),this.isTransitioning=!1}};function Ga(){return`
    .${S.CONTAINER_CLASS_NAME}::before {
      content: " ";
      position: absolute;
      top: 0;
      left: 0;
      width: 1px;
      height: 1px;
      background-color: white;
      pointer-events: none;
      opacity: 0;
      animation: scandit-rotation 1s linear infinite;
    }

    @keyframes scandit-rotation {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }

    .${S.CONTAINER_CLASS_NAME} {
      display: flex;
      /* Without this the flex child overflows its parent on Chrome mobile: */
      flex-direction: column;
      width: 100%;
      height: 100%;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .${S.PAINTBOARDS_CONTAINER_CLASS_NAME} {
      position: relative;
      width: 100%;
      height: inherit;
    }

    .${S.PAINTBOARD_CLASS_NAME} {
      position: relative;
      width: 100%;
      height: 100%;
      min-width: 1px;
      min-height: 1px;
      background-color: black;
      aspect-ratio: 16 / 9;
    }

    .${S.PAINTBOARD_CLASS_NAME}.${S.PAINTBOARD_CLASS_NAME_STATE_ON} {
      aspect-ratio: auto
    }

    .${S.PAINTBOARD_CLASS_NAME} video {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: opacity 300ms;
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.MIRRORED_CLASS_NAME} {
      transform: scale(-1, 1);
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.CAMERA_RECOVERY_CLASS_NAME} {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 5;
      cursor: pointer;
      background-color: #000;
      color: #fff;
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.ERROR_CLASS_NAME} {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 6;
      color: white;
      background-color: rgba(0,0,0,0.5);
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.HINT_CONTAINER_CLASS_NAME} {
      position: absolute;
      width: 100%;
      top: 5vh;
      bottom: 5vh;
      display: grid;
      pointer-events: none;
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.HINT_CLASS_NAME} {
      width: fit-content;
      color: black;
      background-color: white;
      padding: 10px;
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.CAMERA_RECOVERY_CLASS_NAME}[hidden],
    .${S.PAINTBOARD_CLASS_NAME} .${S.ERROR_CLASS_NAME}[hidden] {
      display: none;
    }
    .${S.PAINTBOARD_CLASS_NAME} .${S.HINT_CLASS_NAME}[hidden] {
      display: none;
    }

    .${S.PAINTBOARD_CLASS_NAME} canvas {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      object-fit: cover;
      transition: opacity 300ms;
      pointer-events: none;
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.CONTROLS_CLASS_NAME} {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.CONTROL_WIDGET_CLASS_NAME}-${S.TORCH_SWITCH_CONTROL_CLASS_NAME} {
      position: absolute;
      top: 24px;
      left: 16px;
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.CONTROL_WIDGET_CLASS_NAME}-${S.CAMERA_SWITCH_CONTROL_CLASS_NAME} {
      position: absolute;
      top: 24px;
      right: 16px;
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.CONTROL_WIDGET_CLASS_NAME}-${S.CAMERA_FOV_SWITCH_CONTROL_CLASS_NAME} {
      position: absolute;
      bottom: 24px;
      right: 24px;
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME} {
      -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 100%;
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME} label {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME} label input[type="file"] {
      position: absolute;
      top: -9999px;
    }

    .${S.PAINTBOARD_CLASS_NAME} .${S.SINGLE_IMAGE_UPLOADER_CONTAINER_CLASS_NAME} label button {
      pointer-events: none;
    }

    .${S.CONTROL_WIDGET_CLASS_NAME} {
      width: 32px;
      height: 32px;
      background-color: transparent;
      background-repeat: no-repeat;
      border: none;
      cursor: pointer;
    }

    .${S.CONTROL_WIDGET_CLASS_NAME} + .${S.CONTROL_WIDGET_CLASS_NAME} {
      margin-left: 16px;
    }

    .${S.FROZEN_FRAME} {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 1;
    }
    
    .${S.FROZEN_FRAME}[hidden] {
      opacity: 0;
      pointer-events: none;
      visibility: hidden;
    }
  `}var Ja=new Set,lt=Ja,xt=class ei{constructor(e){this.element=e,this.setupListeners(),this.cacheDOMRect()}get width(){return this.cachedDOMRect.width}get height(){return this.cachedDOMRect.height}static areEquivalentJSONStates(e,t){return!e||!t?!1:e.size.isSameAs(t.size)&&e.visible===t.visible}onStateChanged(e){this.onStateChangedListener=e}onDisconnected(e){this.onDisconnectedListener=e}toJSONObject(){return{size:new $t(new z(this.width,"pixel"),new z(this.height,"pixel")),visible:this.isVisible()}}isSameAs(e){return ei.areEquivalentJSONStates(this.toJSONObject(),e.toJSONObject())}removeListeners(){this.resizeObserver.disconnect(),this.mutationObserver.disconnect()}isVisible(){return this.width>0&&this.height>0||this.element.getClientRects().length>0}setupListeners(){this.resizeObserver=new ResizeObserver(this.onSizeChange.bind(this)),this.resizeObserver.observe(this.element),this.mutationObserver=new MutationObserver(this.onMutation.bind(this)),this.element.parentElement&&this.mutationObserver.observe(this.element.parentElement,{childList:!0})}onSizeChange(e){var t;this.cacheDOMRect(e),document.contains(this.element)&&((t=this.onStateChangedListener)==null||t.call(this))}onMutation(e){var t;let a=e.find(({type:r})=>r==="childList");if(a){for(let r of a.removedNodes)if(r===this.element&&!document.contains(this.element)){(t=this.onDisconnectedListener)==null||t.call(this);return}}}cacheDOMRect(e){let t;Array.isArray(e)&&e.length>0&&(t=e[0].contentRect),t==null&&(t=this.element.getBoundingClientRect()),this.cachedDOMRect=t}},V={PROGRESSBAR_CONTAINER:"scandit-progressbar-container",MESSAGE:"scandit-progressbar-message",HIDE:"scandit-progressbar-hide"},$a=`
    @media (prefers-color-scheme: dark) {
      .${V.PROGRESSBAR_CONTAINER} {
        --foreground-color: white;
        --background-color: black;
      }
    }

    @media (prefers-color-scheme: light) {
      .${V.PROGRESSBAR_CONTAINER} {
        --foreground-color: black;
        --background-color: white;
      }
    }
    
    .${V.PROGRESSBAR_CONTAINER} {
      --accent-color: #62d1da;
      --secondary-color: #dae1e7;
      --100-w: 15rem;
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1;
      background-color: var(--background-color);
    }
    
    .${V.PROGRESSBAR_CONTAINER}.${V.HIDE} {
       display: none;
    }
    
    .${V.PROGRESSBAR_CONTAINER} .${V.MESSAGE} {
      text-align: center;
      font-family: "Open Sans", sans-serif;
      margin-bottom: 1rem;
      color: var(--foreground-color);
    }
    
    .${V.PROGRESSBAR_CONTAINER} [role="progressbar"] {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      position: relative;
      overflow: hidden;
      border: none;
      width: var(--100-w);
      height: 0.5rem;
    }
    
    .${V.PROGRESSBAR_CONTAINER} [role="progressbar"]::before,
    .${V.PROGRESSBAR_CONTAINER} [role="progressbar"]::after {
      content: " ";
      position: absolute;
      top: 0;
      left: 0;
      background: var(--accent-color);
      height: 0.5rem;
      border-radius: 0.5rem;
    }
    
    .${V.PROGRESSBAR_CONTAINER} [role="progressbar"]:not([aria-valuenow])::after {
      width: calc(var(--100-w) / 3.5);
      animation: indeterminate-progress-bar 2.5s ease infinite;
      z-index: 1;
    }

    .${V.PROGRESSBAR_CONTAINER} [role="progressbar"][aria-valuenow]::after {
      width: 0;
      animation: none;
    }
    
    .${V.PROGRESSBAR_CONTAINER} [role="progressbar"][aria-valuenow]::before {
      width: calc(var(--aria-valuenow) * 1%);
      background-color: var(--accent-color);
      border-radius: 0.5rem;
      transition: width 0.3s linear;
    }
    
    .${V.PROGRESSBAR_CONTAINER} [role="progressbar"] {
      background-color: var(--secondary-color);
      border-radius: 0.5rem;
    }
    
    @-webkit-keyframes indeterminate-progress-bar {
      0% {
        left: 0%;
      }
      50% {
        left: calc(var(--100-w) - var(--100-w) / 3.5);
      }
    }
    
    @keyframes indeterminate-progress-bar {
      0% {
        left: 0%;
      }
      50% {
        left: calc(var(--100-w) - var(--100-w) / 3.5);
      }
    }
`,Ha=$a,Ee=class ke{constructor(){this.translations=new Map}static getInstance(){return ke.instance==null&&(ke.instance=new ke),ke.instance}get(e){var t;return(t=this.translations.get(e))!=null?t:""}getAll(){return{...this.translations}}update(e){this.translations=new Map(Object.entries({...Object.fromEntries(this.translations),...e}))}updateIfMissing(e){for(let[t,a]of Object.entries(e))this.translations.has(t)||this.translations.set(t,a)}},Ya=`
    <div>
      <div class="${V.MESSAGE}" id="scandit-loadinglabel"></div>
      <div id="scandit-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-labelledby="scandit-loadinglabel" />
    </div>
`,et="aria-valuenow",qa="aria-valuemin",Qa="aria-valuemax",ti=class Ve{constructor(){this._mounted=!1,this._htmlRoot=null,this._progress=null,this._message=null}set value(e){var t,a,r,s,n,m;if(!this._mounted)return;if(e==null){(t=this._progress)==null||t.removeAttribute(et),(a=this._progress)==null||a.removeAttribute("style");return}let h=Number((r=this._progress)==null?void 0:r.getAttribute(qa)),A=Number((s=this._progress)==null?void 0:s.getAttribute(Qa));if(e>=h&&e<=A){let b=String(e);(n=this._progress)==null||n.setAttribute(et,b),(m=this._progress)==null||m.setAttribute("style",`--aria-valuenow: ${b}`)}}get value(){var e;let t=(e=this._progress)==null?void 0:e.getAttribute(et);if(t===null)return null;let a=Number(t);return Number.isNaN(a)?null:a}set message(e){this._message&&(this._message.textContent=e)}get message(){var e,t;return(t=(e=this._message)==null?void 0:e.textContent)!=null?t:""}mount(e){var t;if(this._mounted)return;if(!document.head.querySelector(`[data-component=${Ve.componentName}]`)){let r=document.createElement("style");r.dataset.component=Ve.componentName,r.append(document.createTextNode(Ha)),document.head.append(r)}let a=document.createElement("div");a.classList.add(V.PROGRESSBAR_CONTAINER),a.classList.add(V.HIDE),a.innerHTML=Ya,(t=e.parentNode)==null||t.replaceChild(a,e),this._htmlRoot=a,this._progress=this._htmlRoot.querySelector("[role=progressbar]"),this._message=this._htmlRoot.querySelector(`.${V.MESSAGE}`),this.message=Ee.getInstance().get("core.view.loading"),this._mounted=!0}unmount(){var e,t;this._mounted&&((e=this._htmlRoot)==null||e.remove(),(t=document.head.querySelector(`[data-component=${Ve.componentName}]`))==null||t.remove(),this._mounted=!1)}show(){this._mounted&&this._htmlRoot&&this._htmlRoot.classList.remove(V.HIDE)}hide(){this._mounted&&this._htmlRoot&&this._htmlRoot.classList.add(V.HIDE)}};ti.componentName="ProgressBarView";var Za=ti,Ka=Za,fe={SINGLE_IMAGE_UPLOADER_CONTAINER:"scandit-single-image-uploader-container"},Pe={SINGLE_IMAGE_UPLOADER_CONTAINER_STYLE:{backgroundColor:"#FFFFFF"},SINGLE_IMAGE_UPLOADER_ICON_STYLE:{fill:"#121619"},SINGLE_IMAGE_UPLOADER_INFORMATION_STYLE:{color:"#121619",marginBottom:"2em"},SINGLE_IMAGE_UPLOADER_BUTTON_STYLE:{color:"#FFFFFF",backgroundColor:"#121619",fontWeight:"bold",padding:"1.25em",width:"12em",textAlign:"center",textTransform:"uppercase"}},Xa=`
  .${fe.SINGLE_IMAGE_UPLOADER_CONTAINER} {
    -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
  }

  .${fe.SINGLE_IMAGE_UPLOADER_CONTAINER} label {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .${fe.SINGLE_IMAGE_UPLOADER_CONTAINER} label input[type="file"] {
    position: absolute;
    top: -9999px;
  }

  .${fe.SINGLE_IMAGE_UPLOADER_CONTAINER} label div {
    user-select: none;
  }

  .${fe.SINGLE_IMAGE_UPLOADER_CONTAINER} label input[type="file"]:disabled + div {
    opacity: 0.5;
  }
`,ut=class ve{constructor(e){this.canUploadFile=!1,this._mounted=!1,this._loading=!1,this._htmlRoot=void 0,this._canvas=void 0,this._onInputCheck=void 0,this._onBeforeFileRead=void 0,this._onImageLoadError=void 0,this._onFileReaderError=void 0,this._onCaptureReady=void 0,this._resizedImageSizeLimit=1440,this._inputElement=void 0,this._buttonElement=void 0,this._chooseImageText="",this._settings=e}get canvas(){return this._canvas||(this._canvas=document.createElement("canvas")),this._canvas}get canvasContext(){return this._canvasContext||(this._canvasContext=this.canvas.getContext("2d",{willReadFrequently:!0})),this._canvasContext}mount(e){var t;if(this._mounted)return;if(!document.head.querySelector(`[data-component=${ve.componentName}]`)){let l=document.createElement("style");l.dataset.component=ve.componentName,l.textContent=Xa,document.head.append(l)}let a=document.createElement("div");a.className=fe.SINGLE_IMAGE_UPLOADER_CONTAINER,Object.assign(a.style,Pe.SINGLE_IMAGE_UPLOADER_CONTAINER_STYLE,this._settings.containerStyle),e.append(a);let{iconElement:r,iconStyle:s,informationElement:n,informationStyle:m,buttonElement:h,buttonStyle:A,onlyCameraCapture:b}=this._settings;Object.assign(r.style,Pe.SINGLE_IMAGE_UPLOADER_ICON_STYLE,s,{maxWidth:"100px",maxHeight:"100px"}),a.append(r),n.hasAttribute(ve.DEFAULT_DOM_ATTRIBUTE)&&(Object.assign(n.style,Pe.SINGLE_IMAGE_UPLOADER_INFORMATION_STYLE,m),n.textContent=Ee.getInstance().get("core.singleImageUploader.title")),a.append(n);let C=document.createElement("input");C.type="file",C.accept="image/*",b&&(C.capture="environment",C.dataset.onlyCaptureOnMobile="environment"),C.addEventListener("change",l=>{this.onFileUpload(l)}),C.addEventListener("click",l=>{var c;(c=this._onInputCheck)==null||c.call(this,l)}),C.addEventListener("keydown",l=>{var c;(c=this._onInputCheck)==null||c.call(this,l)});let u=document.createElement("label");u.append(C),h.hasAttribute(ve.DEFAULT_DOM_ATTRIBUTE)&&(Object.assign(h.style,Pe.SINGLE_IMAGE_UPLOADER_BUTTON_STYLE,A),h.textContent=Ee.getInstance().get("core.singleImageUploader.button")),u.append(h),a.append(u);let d=document.createRange().createContextualFragment(atob(ta)).firstElementChild;Object.assign(d.style,{position:"absolute",bottom:"1em",right:"1em",width:"10em"}),a.append(d),this._htmlRoot=a,this._mounted=!0,this._inputElement=C,this._buttonElement=h,this._chooseImageText=(t=h.textContent)!=null?t:""}unmount(){var e,t;this._mounted&&((e=this._htmlRoot)==null||e.remove(),(t=document.head.querySelector(`[data-component=${ve.componentName}]`))==null||t.remove(),this._mounted=!1)}setButtonState(e){this._inputElement&&(this._inputElement.disabled=e==="disabled")}getButtonState(){return this._inputElement?this._inputElement.disabled?"disabled":"enabled":"disabled"}getLastUploadedImage(){return this.canvasContext.getImageData(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height)}onInputCheck(e){this._onInputCheck=e}onBeforeFileRead(e){this._onBeforeFileRead=e}onImageLoadError(e){this._onImageLoadError=e}onFileReaderError(e){this._onFileReaderError=e}onCaptureReady(e){this._onCaptureReady=e}setLoading(e){this._buttonElement&&(this.setButtonState(e?"disabled":"enabled"),this._buttonElement.textContent=e?"...":this._chooseImageText,this._loading=e)}getResizedImageDimensions(e,t){return e<=this._resizedImageSizeLimit&&t<=this._resizedImageSizeLimit?{width:e,height:t}:e>t?{width:this._resizedImageSizeLimit,height:Math.round(t/e*this._resizedImageSizeLimit)}:{width:Math.round(e/t*this._resizedImageSizeLimit),height:this._resizedImageSizeLimit}}onImageLoad(e){var t;let{height:a,width:r}=this.getResizedImageDimensions(e.naturalWidth,e.naturalHeight);this.canvasContext.canvas.width=r,this.canvasContext.canvas.height=a,this.canvasContext.drawImage(e,0,0,r,a);let s={data:this.canvasContext.getImageData(0,0,r,a).data,width:r,height:a};(t=this._onCaptureReady)==null||t.call(this,s)}onFileReaderLoad(e,t,a){e.value="",t.result!=null&&(a.addEventListener("load",()=>{this.onImageLoad(a),this.setLoading(!1)},{once:!0}),a.addEventListener("error",r=>{var s;(s=this._onImageLoadError)==null||s.call(this,r),this.setLoading(!1)},{once:!0}),a.src=t.result)}onFileUpload(e){var t;this.setLoading(!0);let a=e.currentTarget,{files:r}=a;if(r==null||r.length===0){this.setLoading(!1);return}if((t=this._onBeforeFileRead)==null||t.call(this,e),!this.canUploadFile){a.value="",o.log(o.Level.Warn,"Can't upload file"),this.setLoading(!1);return}let s=new Image,n=new FileReader;n.addEventListener("load",()=>{this.onFileReaderLoad(a,n,s)}),n.addEventListener("error",m=>{var h;(h=this._onFileReaderError)==null||h.call(this,m),this.setLoading(!1)}),n.readAsDataURL(r[0])}};ut.componentName="SingleImageUploaderView",ut.DEFAULT_DOM_ATTRIBUTE="data-scandit-default";var er=ut,tr=(i=>(i.Nonzero="nonzero",i.Evenodd="evenodd",i))(tr||{}),ir=class{constructor(){this.pathWinding="nonzero"}drawSingleCommand(e,t){switch(e){case 0:{this.addLine(t);break}case 1:{this.addArc(t);break}case 2:{this.addCircle(t);break}case 3:{this.addRectangle(t);break}case 4:{this.addRoundedRectangle(t);break}case 5:{this.beginPath(t);break}case 6:{this.closePath(t);break}case 7:{this.fill(t);break}case 8:{this.stroke(t);break}case 10:{this.setStrokeWidth(t);break}case 11:{this.setFillColor(t);break}case 12:{this.setStrokeColor(t);break}case 13:{this.moveTo(t);break}case 14:{this.lineTo(t);break}case 15:{this.saveState(t);break}case 16:{this.restoreState(t);break}case 17:{this.translate(t);break}case 19:{this.bezierTo(t);break}case 20:{this.transform(t);break}case 21:{this.scale(t);break}case 22:{this.addPathWinding(t);break}case 9:case 18:default:{zi(e);break}}}beginPath(e){this.context.beginPath()}closePath(e){this.context.closePath()}setStrokeColor(e){let t=e.extractColor();this.context.strokeStyle=this.colorToRgbaString(t)}setFillColor(e){let t=e.extractColor();this.context.fillStyle=this.colorToRgbaString(t)}fill(e){this.context.fill(this.pathWinding)}stroke(e){this.context.stroke()}addLine(e){let t=e.extractFloat(),a=e.extractFloat();this.context.moveTo(t,a);let r=e.extractFloat(),s=e.extractFloat();this.context.lineTo(r,s)}lineTo(e){let t=e.extractFloat(),a=e.extractFloat();this.context.lineTo(t,a)}moveTo(e){let t=e.extractFloat(),a=e.extractFloat();this.context.moveTo(t,a)}addRectangle(e){let t=e.extractFloat(),a=e.extractFloat(),r=e.extractFloat(),s=e.extractFloat();this.context.rect(t,a,r,s)}addRoundedRectangle(e){let t=e.extractFloat(),a=e.extractFloat(),r=e.extractFloat(),s=e.extractFloat(),n=e.extractFloat();this.context.moveTo(t+n,a),this.context.lineTo(t+r-n,a),this.context.quadraticCurveTo(t+r,a,t+r,a+n),this.context.lineTo(t+r,a+s-n),this.context.quadraticCurveTo(t+r,a+s,t+r-n,a+s),this.context.lineTo(t+n,a+s),this.context.quadraticCurveTo(t,a+s,t,a+s-n),this.context.lineTo(t,a+n),this.context.quadraticCurveTo(t,a,t+n,a),this.context.closePath()}setStrokeWidth(e){this.context.lineWidth=e.extractFloat()}addArc(e){let t=e.extractFloat(),a=e.extractFloat(),r=e.extractFloat(),s=e.extractFloat(),n=e.extractFloat(),m=e.extractBoolean();this.context.arc(t,a,r,s,n,m)}addCircle(e){let t=e.extractFloat(),a=e.extractFloat(),r=e.extractFloat();this.context.arc(t,a,r,0,Math.PI*2)}bezierTo(e){let t=e.extractFloat(),a=e.extractFloat(),r=e.extractFloat(),s=e.extractFloat(),n=e.extractFloat(),m=e.extractFloat();this.context.bezierCurveTo(t,a,r,s,n,m)}saveState(e){this.context.save()}restoreState(e){this.context.restore()}translate(e){let t=e.extractFloat(),a=e.extractFloat();this.context.translate(t,a)}transform(e){let t=e.extractFloat(),a=e.extractFloat(),r=e.extractFloat(),s=e.extractFloat(),n=e.extractFloat(),m=e.extractFloat();this.context.transform(t,a,r,s,n,m)}scale(e){let t=e.extractFloat();this.context.scale(t,t)}addPathWinding(e){let t=e.extractBoolean();this.pathWinding=t?"nonzero":"evenodd"}colorToRgbaString(e){return`rgba(${e.r},${e.g},${e.b},${e.a})`}},ar=(i=>(i[i.AddLine=0]="AddLine",i[i.AddArc=1]="AddArc",i[i.AddCircle=2]="AddCircle",i[i.AddRect=3]="AddRect",i[i.AddRoundedRect=4]="AddRoundedRect",i[i.BeginPath=5]="BeginPath",i[i.ClosePath=6]="ClosePath",i[i.Fill=7]="Fill",i[i.Stroke=8]="Stroke",i[i.Clear=9]="Clear",i[i.SetStrokeWidth=10]="SetStrokeWidth",i[i.SetFillColor=11]="SetFillColor",i[i.SetStrokeColor=12]="SetStrokeColor",i[i.MoveTo=13]="MoveTo",i[i.LineTo=14]="LineTo",i[i.SaveState=15]="SaveState",i[i.RestoreState=16]="RestoreState",i[i.Translate=17]="Translate",i[i.ScaleAroundPoint=18]="ScaleAroundPoint",i[i.BezierTo=19]="BezierTo",i[i.Transform=20]="Transform",i[i.Scale=21]="Scale",i[i.AddPathWinding=22]="AddPathWinding",i))(ar||{}),rr=class{constructor(e){this._index=0,this._view=new DataView(e.buffer),this._index=0}extractCommandType(){let e=this._view.getUint8(this._index);return this._index+=1,e}extractFloat(){let e=this._view.getFloat32(this._index,!0);return this._index+=4,e}extractBoolean(){let e=this._view.getUint8(this._index);return this._index+=1,e!==0}extractColor(){let e=this._view.getUint8(this._index),t=this._view.getUint8(this._index+1),a=this._view.getUint8(this._index+2),r=this._view.getUint8(this._index+3)/256;return this._index+=4,{r:e,g:t,b:a,a:r}}isConsumed(){return this._index>=this._view.byteLength}},sr=(i=>(i.Nonzero="nonzero",i.Evenodd="evenodd",i))(sr||{}),ii=class ct extends ir{constructor(e){super(),this._context=null,this.isNextDrawPending=!1,this.latestCommands=new Uint8Array([]),this.canvas=e,this.doDrawLoop=this.doDraw.bind(this)}get context(){if(!this._context&&(this._context=this.canvas.getContext("2d"),!this._context))throw new TypeError("CanvasRenderingContext cannot be retrieved.");return this._context}draw(e){if(this.latestCommands=e,!this.isCanvasReady()){this.postponeDraw();return}this.isNextDrawPending||(this.isNextDrawPending=!0,requestAnimationFrame(this.doDrawLoop))}updateCanvasSizeAttributes(e,t,a=window.devicePixelRatio){let r=Math.round(e*a),s=Math.round(t*a);(r!==this.canvas.width||s!==this.canvas.height)&&(this.canvas.width=r,this.canvas.height=s,this.context.scale(a,a))}startObservingCanvasResize(){if(!this.resizeObserver){if(!ct.ResizeObserver)throw new Error("PrivateCanvasDrawer.ResizeObserver is not set");this.resizeObserver=new ct.ResizeObserver(e=>{var t;let[a]=e,{width:r,height:s}=(t=a.contentRect)!=null?t:this.canvas;r===0||s===0||(this.updateCanvasSizeAttributes(r,s),this.latestCommands.length!==0&&(this.draw(this.latestCommands),this.latestCommands=new Uint8Array([])))}),this.resizeObserver.observe(this.canvas)}}endObservingCanvasResize(){this.resizeObserver&&this.resizeObserver.unobserve(this.canvas)}doDraw(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);let e=new rr(this.latestCommands);for(;!e.isConsumed();){let t=e.extractCommandType();this.drawSingleCommand(t,e)}this.isNextDrawPending=!1}postponeDraw(){this.startObservingCanvasResize()}isCanvasReady(){return this.canvas.width>0&&this.canvas.height>0}};ii.ResizeObserver="ResizeObserver"in globalThis?globalThis.ResizeObserver:void 0;var ai=ii,nr={processedFramesCount:{text:"Frames processed by engine",valueSuffix:"/sec"},frameDataPoolSize:{text:"Frame data pool size",valueSuffix:""},redrawRequestsCount:{text:"Engine redraw requests",valueSuffix:"/sec"},actualRedrawsCount:{text:"Actual redraws",valueSuffix:"/sec"},FPS:{text:"Overlay FPS ",valueSuffix:"/sec"}},or=class extends ai{constructor(){super(...arguments),this.drawPerformanceTimer=null,this.drawPerformanceFPSCounter=0,this.lastDrawPerformanceFPSCounter=0}setPerformanceMetrics(e){this.performanceMetrics=e,this.drawPerformanceMetrics()}doDraw(){super.doDraw()}drawPerformanceMetrics(){this.drawPerformanceTimer==null&&(o.log(o.Level.Debug,"Drawing performance monitoring enabled, FPS will be drawn into canvas"),this.drawPerformanceTimer=setInterval(()=>{this.lastDrawPerformanceFPSCounter=this.drawPerformanceFPSCounter,this.drawPerformanceFPSCounter=0},1e3)),this.drawPerformanceFPSCounter++,this.drawFullPerformanceMetrics()}drawFullPerformanceMetrics(){let e={...this.performanceMetrics,FPS:this.lastDrawPerformanceFPSCounter};this.context.lineWidth=1,this.context.fillStyle="white",this.context.strokeStyle="black";let t=Math.min(Math.max(window.innerWidth/35,13),20),a=3*t,r=1.5;this.context.font=`bold ${t}px sans-serif`;let s=0,n=0,m=[];for(let[h,A]of Object.entries(e)){let b=nr[h],C=`${b.text}: ${A}${b.valueSuffix}`;n=Math.max(this.context.measureText(C).width,n),m.push([C,a,a+t*r*s++])}this.context.clearRect(a,a-t,n,Object.values(e).length*t*r);for(let h of m)this.context.fillText(...h),this.context.strokeText(...h)}},dt=class ri{static fromJSON(e){let t=new ri;return t._code=e.code,t._message=e.message,t._isValid=e.isValid,t}get message(){return this._message}get code(){return this._code}get isValid(){return this._isValid}},lr=(i=>(i.None="None",i.X="X",i.Y="Y",i))(lr||{}),ur=class si{constructor(){this.focusGesture=Z.DataCaptureView.focusGesture,this.zoomGesture=Z.DataCaptureView.zoomGesture,this._scanAreaMargins=Z.DataCaptureView.scanAreaMargins,this._pointOfInterest=Z.DataCaptureView.pointOfInterest,this._logoStyle=Z.DataCaptureView.logoStyle,this._logoAnchor=Z.DataCaptureView.logoAnchor,this._logoOffset=Z.DataCaptureView.logoOffset,this._cameraRecoveryText=Ee.getInstance().get("core.camera.recovery"),this._context=null,this.overlays=[],this.controls=[],this.controlWidgets=new WeakMap,this.frozenFrameCanvas=document.createElement("canvas"),this.listeners=[],this.isVideoElementDetached=!1,this.visibilityListener=this.onVisibilityChange.bind(this),this.cameraRecoveryListener=this.cameraRecovery.bind(this)}get scanAreaMargins(){return this._scanAreaMargins}set scanAreaMargins(e){var t;this._scanAreaMargins=e,(t=this.privateContext)==null||t.update()}get pointOfInterest(){return this._pointOfInterest}set pointOfInterest(e){var t;this._pointOfInterest=e,(t=this.privateContext)==null||t.update()}get logoStyle(){return this._logoStyle}set logoStyle(e){var t;this._logoStyle=e,(t=this.privateContext)==null||t.update()}get logoAnchor(){return this._logoAnchor}set logoAnchor(e){var t;this._logoAnchor=e,(t=this.privateContext)==null||t.update()}get logoOffset(){return this._logoOffset}set logoOffset(e){var t;this._logoOffset=e,(t=this.privateContext)==null||t.update()}get cameraRecoveryText(){return this._cameraRecoveryText}set cameraRecoveryText(e){o.log(o.Level.Debug,"DEPRECATED: DataCaptureView.cameraRecoveryText is deprecated, use the Localization API instead."),this._cameraRecoveryText=e,this.cameraRecoveryElement.textContent=e}get width(){var e,t;return Math.round((t=(e=this.htmlElementState)==null?void 0:e.width)!=null?t:0)}get height(){var e,t;return Math.round((t=(e=this.htmlElementState)==null?void 0:e.height)!=null?t:0)}get canvasDrawer(){return!this._canvasDrawer&&this.canvasElement!=null&&(this._canvasDrawer=new ai(this.canvasElement),this._canvasDrawer.startObservingCanvasResize()),this._canvasDrawer}get privateContext(){return this._context}static async forContext(e){let t=new si;return await t.setContext(e),t}showProgressBar(){var e;(e=this.progressBarView)==null||e.show()}hideProgressBar(){var e;(e=this.progressBarView)==null||e.hide()}setProgressBarPercentage(e){this.progressBarView&&(this.progressBarView.value=e)}setProgressBarMessage(e){this.progressBarView&&(this.progressBarView.message=e)}getContext(){return this._context}async setContext(e){var t,a,r;if(this._context=e,e){if(this.overlays.length>0&&((t=this.privateContext)==null?void 0:t.modes.length)===0)throw new Error(["Cannot assign this view to this context. This view has overlays but the context does not have any mode attached matching these overlays.","Remove the overlays first before attaching the view to the context, or add the corresponding mode to the context before attaching this view."].join(" "));await e.setView(this),(a=this.privateContext)==null||a.subscribeToWorkerMessages(this.onWorkerMessage.bind(this)),(r=this._context)!=null&&r.frameSource&&await this.onFrameSourceChange(this._context.frameSource)}}connectToElement(e){var t;this.setupHtmlElement(e),(t=this.canvasDrawer)==null||t.startObservingCanvasResize(),this.htmlElementDidChange(),lt.add(this)}detachFromElement(){var e,t,a,r;(e=this.htmlElementState)==null||e.removeListeners(),this.removeStyles(),(t=this.canvasDrawer)==null||t.endObservingCanvasResize(),document.removeEventListener("visibilitychange",this.visibilityListener);for(let s of["touchend","mousedown"])this.cameraRecoveryElement.removeEventListener(s,this.cameraRecoveryListener);(a=this.progressBarView)==null||a.unmount(),this.htmlElementDidChange(),(r=this.gestureRecognizer)==null||r.removeAllListeners(),this.clearHtmlElementContent(),lt.delete(this)}async addOverlay(e){var t;this.overlays.includes(e)||(this.overlays.push(e),await((t=this.privateContext)==null?void 0:t.update([{type:"addOverlay",newValue:e}])))}async removeOverlay(e){var t;this.overlays.includes(e)&&(this.overlays.splice(this.overlays.indexOf(e),1),await((t=this.privateContext)==null?void 0:t.update([{type:"removeOverlay",newValue:e}])))}addListener(e){this.listeners.includes(e)||this.listeners.push(e)}removeListener(e){this.listeners.includes(e)&&this.listeners.splice(this.listeners.indexOf(e),1)}viewPointForFramePoint(e){var t,a,r,s,n,m,h,A;let b={width:(a=(t=this.htmlElementState)==null?void 0:t.width)!=null?a:0,height:(s=(r=this.htmlElementState)==null?void 0:r.height)!=null?s:0},C={width:(m=(n=this.videoElement)==null?void 0:n.videoWidth)!=null?m:0,height:(A=(h=this.videoElement)==null?void 0:h.videoHeight)!=null?A:0},u=b.width/b.height,d=C.width/C.height,l=u>d?b.width/C.width:b.height/C.height,c={x:e.x*l,y:e.y*l},p=(C.width*l-b.width)/2,W=(C.height*l-b.height)/2;return new ye(c.x-p,c.y-W)}viewQuadrilateralForFrameQuadrilateral(e){let t=this.viewPointForFramePoint(e.topLeft),a=this.viewPointForFramePoint(e.topRight),r=this.viewPointForFramePoint(e.bottomLeft),s=this.viewPointForFramePoint(e.bottomRight);return new $e(t,a,s,r)}addControl(e){var t;this.controls.includes(e)||(e.view=this,this.controls.push(e),this.controlsUpdated(),(t=this.privateContext)==null||t.update([{type:"addControl",newValue:e}]))}removeControl(e){var t;if(this.controls.includes(e)){e.view=null;let a=this.controls.splice(this.controls.indexOf(e),1);this.getControlWidget(a[0]).remove(!0),this.controlsUpdated(),(t=this.privateContext)==null||t.update([{type:"removeControl",newValue:e}])}}toJSONObject(){var e;return{scanAreaMargins:this.scanAreaMargins.toJSONObject(),pointOfInterest:this.pointOfInterest.toJSONObject(),logoAnchor:this.logoAnchor,logoOffset:this.logoOffset.toJSONObject(),logoHidden:(e=this.logoHidden)!=null?e:!1,logoStyle:this.logoStyle,overlays:this.overlays.map(t=>t.toJSONObject()),controls:this.controls.map(t=>t.toJSONObject()),focusGesture:this.focusGesture?this.focusGesture.toJSONObject():null,zoomGesture:this.zoomGesture?this.zoomGesture.toJSONObject():null}}isCameraRecoveryVisible(){return!this.cameraRecoveryElement.hidden}setCameraRecoveryVisible(e){this.cameraRecoveryElement.hidden=!e}async allowPictureInPicture(e){await U.instance().allowPictureInPicture(e)}removeStyles(){var e;(e=document.querySelector("style[scandit]"))==null||e.remove()}clearHtmlElementContent(){var e;this.htmlElement&&((e=this.canvasDrawer)==null||e.endObservingCanvasResize(),this.htmlElement.innerHTML="",this.cameraPaintboardElement=void 0,this.singleImageUploaderPaintboardElement=void 0,this.htmlElement=void 0)}setupHtmlElement(e){var t,a;this.createStyles(),this.htmlElement=e;let r=`
      <div class="${S.CONTAINER_CLASS_NAME}">
        <div class="${S.PAINTBOARDS_CONTAINER_CLASS_NAME}">
          <div data-js-id="scandit-progress-bar-view"></div>
          <div class="${S.PAINTBOARD_CLASS_NAME}" data-js-id="camera-paintboard">
            <video autoplay="autoplay" playsinline="true" muted="muted" poster="${ia}" style="opacity: 0;"></video>
            <img class="${S.FROZEN_FRAME}" data-js-id="frozen-frame" alt="frozen-frame" hidden />
            <canvas></canvas>
            <div class="${S.HINT_CONTAINER_CLASS_NAME}">
              <div class="${S.HINT_CLASS_NAME}" hidden></div>
            </div>
            <div class="${S.CONTROLS_CLASS_NAME}"></div>
            <div class="${S.CAMERA_RECOVERY_CLASS_NAME}" hidden>${this.cameraRecoveryText}</div>
            <div class="${S.ERROR_CLASS_NAME}" hidden></div>
          </div>
          <div class="${S.PAINTBOARD_CLASS_NAME}" data-js-id="singleimage-paintboard"></div>
        </div>
      </div>
    `;this.htmlElement.innerHTML=r,this.progressBarView&&this.progressBarView.unmount(),this.progressBarView=new Ka,this.progressBarView.mount(this.htmlElement.querySelector('[data-js-id="scandit-progress-bar-view"]')),this.containerElement=this.htmlElement.querySelector(`.${S.CONTAINER_CLASS_NAME}`),this.cameraPaintboardElement=this.containerElement.querySelector('[data-js-id="camera-paintboard"]'),this.singleImageUploaderPaintboardElement=this.containerElement.querySelector('[data-js-id="singleimage-paintboard"]');let s=this.cameraPaintboardElement.querySelector("canvas");this.canvasElement==null?this.canvasElement=s:s.replaceWith(this.canvasElement);let n=this.cameraPaintboardElement.querySelector('[data-js-id="frozen-frame"]');this.frozenFrame==null?this.frozenFrame=n:n.replaceWith(this.frozenFrame),this.controlsElement=this.cameraPaintboardElement.querySelector(`.${S.CONTROLS_CLASS_NAME}`),this.cameraRecoveryElement=this.cameraPaintboardElement.querySelector(`.${S.CAMERA_RECOVERY_CLASS_NAME}`),this.errorElement=this.cameraPaintboardElement.querySelector(`.${S.ERROR_CLASS_NAME}`),this.hintContainerElement=this.cameraPaintboardElement.querySelector(`.${S.HINT_CONTAINER_CLASS_NAME}`),this.hintElement=this.cameraPaintboardElement.querySelector(`.${S.HINT_CLASS_NAME}`);let m=this.cameraPaintboardElement.querySelector("video");this.videoElement?m.replaceWith(this.videoElement):(this.videoElement=m,this.videoPauseListener=this.handleVideoPause.bind(this),this.videoElement.addEventListener("pause",this.videoPauseListener)),this.lastFrameSourceState!=null&&((a=(t=this._context)==null?void 0:t.frameSource)==null||a.switchToDesiredState(this.lastFrameSourceState)),document.addEventListener("visibilitychange",this.visibilityListener);for(let h of["touchend","mousedown"])this.cameraRecoveryElement.addEventListener(h,this.cameraRecoveryListener);this.htmlElementState&&this.htmlElementState.removeListeners(),this.htmlElementState=new xt(this.htmlElement),this.htmlElementState.onStateChanged(this.htmlElementDidChange.bind(this)),this.htmlElementState.onDisconnected(this.htmlElementDisconnected.bind(this)),this.gestureRecognizer=new Aa(this.htmlElement),this.gestureRecognizer.addListener({onTap:async h=>{var A;(A=this.privateContext)==null||A.workerCommand("onTap",{point:h.toJSONObject()})}})}setupHtmlElementSingleImageUploader(e){var t;if(this.singleImageUploaderPaintboardElement==null)return;this.singleImageUploaderView&&this.singleImageUploaderView.unmount(),this.singleImageUploaderView=new er(e),this.singleImageUploaderView.mount(this.containerElement.querySelector('[data-js-id="singleimage-paintboard"]'));let a=(t=this._context)==null?void 0:t.frameSource;this.singleImageUploaderView.onInputCheck(r=>{a.getCurrentState()!=="starting"&&r.preventDefault()}),this.singleImageUploaderView.onBeforeFileRead(()=>{a._context&&this.singleImageUploaderView&&(this.singleImageUploaderView.canUploadFile=a._context.hasEnabledMode())}),this.singleImageUploaderView.onImageLoadError(()=>{a.currentState="starting",o.log(o.Level.Error,"Could not load image from selected file")}),this.singleImageUploaderView.onFileReaderError(r=>{var s,n;let m=r.target;a.currentState="starting",o.log(o.Level.Error,`Error while reading the file: ${(n=(s=m.error)==null?void 0:s.toString())!=null?n:""}`)}),this.singleImageUploaderView.onCaptureReady(async r=>{await a.processUploadedFileCapture(r)}),this.singleImageUploaderView.setButtonState(a.getCurrentState()==="starting"?"enabled":"disabled"),a.addView(this.singleImageUploaderView)}setupHtmlElementVisibility(e){this.cameraPaintboardElement!=null&&(this.cameraPaintboardElement.hidden=e!=="camera"),this.singleImageUploaderPaintboardElement!=null&&(this.singleImageUploaderPaintboardElement.hidden=e!=="singleImageUploader")}createStyles(){if(document.querySelector("style[scandit]")===null){let e=document.createElement("style");e.setAttribute("scandit","data-capture-sdk"),e.innerHTML=Ga(),document.head.append(e)}}htmlElementDidChange(){var e,t;if(!this.htmlElementState)return;let a=this.htmlElementState,r=a.toJSONObject();if(!xt.areEquivalentJSONStates(this.lastHtmlElementState,r)){(e=this.privateContext)==null||e.update([{type:"viewChange",newValue:a.toJSONObject()}]),this.lastHtmlElementState=r,(t=this.canvasDrawer)==null||t.updateCanvasSizeAttributes(this.width,this.height),this.handleVideoDisplay(r.visible);for(let s of this.listeners)s.didChangeSize&&s.didChangeSize(this,new ca(r.size.width.value,r.size.height.value),window.innerHeight<window.innerWidth?"landscapeLeft":"portrait")}}async htmlElementDisconnected(){var e,t,a,r,s,n,m;this.isVideoElementDetached=!1,(e=this.videoElement)==null||e.remove(),this.lastFrameSourceState=(a=(t=this._context)==null?void 0:t.frameSource)==null?void 0:a.getCurrentState(),await((s=(r=this._context)==null?void 0:r.frameSource)==null?void 0:s.switchToDesiredState("off")),await((m=this.privateContext)==null?void 0:m.update([{type:"viewChange",newValue:(n=this.htmlElementState)==null?void 0:n.toJSONObject()}]))}handleVideoDisplay(e){this.videoElement==null||this.cameraPaintboardElement==null||(!e&&!this.isVideoElementDetached?(this.videoElement.width=0,this.videoElement.height=0,this.videoElement.style.opacity="0",document.body.append(this.videoElement),this.isVideoElementDetached=!0):e&&this.isVideoElementDetached&&(this.cameraPaintboardElement.insertAdjacentElement("afterbegin",this.videoElement),this.isVideoElementDetached=!1,this.videoElement.removeAttribute("width"),this.videoElement.removeAttribute("height"),this.videoElement.style.removeProperty("opacity")))}isCanvasDrawerWithMetrics(e){return e instanceof or}onWorkerMessage(e){var t;switch(e.type){case"draw":{this.drawEngineCommands(e.payload);break}case"performanceMetricsReport":{let a=this._canvasDrawer;a!=null&&this.isCanvasDrawerWithMetrics(a)&&a.setPerformanceMetrics(e.payload);break}case"contextDidChangeStatus":{let a=dt.fromJSON(e.payload);a.isValid||((t=this.progressBarView)==null||t.hide(),this.displayError(a));break}case"showHint":{this.displayHint(e.payload.text,e.payload.style);break}case"updateHint":{this.updateHint(e.payload.style);break}case"hideHint":{this.hideHint();break}}}drawEngineCommands(e){var t;(t=this.canvasDrawer)==null||t.draw(e)}displayError(e){this.errorElement.textContent=`Error ${e.code}: ${e.message}`,this.errorElement.hidden=!1}clearError(){this.errorElement.textContent="",this.errorElement.hidden=!0}displayHint(e,t){this.hintElement.textContent=e,this.hintElement.hidden=!1,this.updateHint(t)}hideHint(){this.hintElement.textContent="",this.hintElement.hidden=!0}updateHint(e){this.hintElement.style.background=e.backgroundColor,this.hintElement.style.color=e.textColor,this.hintElement.style.fontSize=e.font==="body"?"1.25rem":"1rem",this.hintElement.style.borderRadius=e.hintCornerStyle==="rounded"?"5px":"0px",e.hintHeight==="taller"&&(this.hintElement.style.paddingTop="1.25em",this.hintElement.style.paddingBottom="1.25em"),e.hintWidth==="wider"&&(this.hintElement.style.paddingLeft="1.25em",this.hintElement.style.paddingRight="1.25em"),this.updateAnchor(e)}updateAnchor(e){let t=`${e.verticalOffsetRatio*100}vh`;switch(e.anchor){case"topLeft":{this.hintContainerElement.style.placeContent="start left",this.hintElement.style.transform=`translateY(${t})`;break}case"topCenter":{this.hintContainerElement.style.placeContent="start center",this.hintElement.style.transform=`translateY(${t})`;break}case"topRight":{this.hintContainerElement.style.placeContent="start right",this.hintElement.style.transform=`translateY(${t})`;break}case"centerLeft":{this.hintContainerElement.style.placeContent="center start";break}case"center":{this.hintContainerElement.style.placeContent="center";break}case"centerRight":{this.hintContainerElement.style.placeContent="center end";break}case"bottomLeft":{this.hintContainerElement.style.placeContent="end left";break}case"bottomCenter":{this.hintContainerElement.style.placeContent="end center";break}case"bottomRight":{this.hintContainerElement.style.placeContent="end right";break}}}controlsUpdated(){var e;this.redrawControls(),(e=this.privateContext)==null||e.update()}redrawControls(){var e;let t=(e=this._context)==null?void 0:e.frameSource;for(let a of this.controls){let r=this.getControlWidget(a);t==null||t.desiredState==="off"||t.desiredState==="stopping"?r.remove():r.install()}}getControlWidget(e){let t=this.controlWidgets.get(e);if(t)return t;let{type:a}=e,r;switch(a){case"torch":{r=new Wa(e,this.controlsElement),this.controlWidgets.set(e,r);break}case"camera":{r=new Ua(e,this.controlsElement),this.controlWidgets.set(e,r);break}case"camera-fov":{r=new Va(e,this.controlsElement),this.controlWidgets.set(e,r);break}}return r}async onFrameSourceChange(e){let t=e==null?void 0:e.type;if(this.setupHtmlElementVisibility(t),t==="camera"){let a=e==null?void 0:e.getCurrentState();a!=null&&await this.onCameraStateChanged(a)}else t==="singleImageUploader"&&this.setupHtmlElementSingleImageUploader(e.settings)}async onCameraStateChanged(e){var t;switch((t=this.cameraPaintboardElement)==null||t.classList.toggle(S.PAINTBOARD_CLASS_NAME_STATE_ON,e==="on"),e){case"stopping":{this.freezeFrame(),this.setVideoElementOpacity("0");return}case"starting":case"bootingUp":case"wakingUp":{if(!this.htmlElement){o.log(o.Level.Error,"cannot set frame source stream before connecting view to an HTML element");return}this.videoElement&&(U.instance().videoElement=this.videoElement,U.instance().gui.isCameraRecoveryVisible=this.isCameraRecoveryVisible.bind(this),U.instance().gui.setCameraRecoveryVisible=this.setCameraRecoveryVisible.bind(this),this.setVideoElementOpacity("0"));return}case"off":{this.setVideoElementOpacity("0"),this.redrawControls();return}case"on":{await U.instance().waitForCapabilities(),this.redrawControls(),this.unfreezeFrame(),this.setVideoElementOpacity("1");break}case"goingToSleep":{this.freezeFrame();break}}}setVideoElementOpacity(e){this.videoElement&&(this.videoElement.style.opacity=e),this.canvasElement&&(this.canvasElement.style.opacity=e)}onSingleImageUploaderSettingsChange(e){this.setupHtmlElementSingleImageUploader(e)}handleVideoPause(){U.instance().playVideo()}async onVisibilityChange(){var e,t;let a=(e=this.videoElement)==null?void 0:e.srcObject;if(document.visibilityState==="hidden"&&U.instance().stopVideoTracks(),document.visibilityState==="visible"&&U.instance().activeCamera!=null&&a!=null)if(!a.active||(t=a.getVideoTracks()[0])!=null&&t.muted)try{o.log(o.Level.Debug,'Detected visibility change ("visible") event with inactive video source, try to reinitialize camera'),await U.instance().reinitializeCamera()}catch{}else o.log(o.Level.Debug,'Detected visibility change ("visible") event with active video source, replay video'),U.instance().playVideo()}async cameraRecovery(e){e.preventDefault(),U.instance().activeCamera=U.instance().selectedCamera,await U.instance().reinitializeCamera()}freezeFrame(){var e;if(!this.frozenFrame)return;let t=U.instance().captureImage();if(!t)return;let a=new ImageData(t.data,t.width,t.height);this.frozenFrameCanvas.width=a.width,this.frozenFrameCanvas.height=a.height,this.frozenFrame.width=a.width,this.frozenFrame.height=a.height,(e=this.frozenFrameCanvas.getContext("2d"))==null||e.putImageData(a,0,0),this.frozenFrame.src=this.frozenFrameCanvas.toDataURL("image/jpeg",.4),this.frozenFrame.classList.toggle(S.MIRRORED_CLASS_NAME,U.instance().isMirrorImageEnabled()),this.frozenFrame.hidden=!1}unfreezeFrame(){this.frozenFrame&&(this.frozenFrame.src="",this.frozenFrame.hidden=!0)}},ni=class oi{constructor(e=Z.Brush.fillColor,t=Z.Brush.strokeColor,a=Z.Brush.strokeWidth){this.fill={color:e},this.stroke={color:t,width:a}}static get transparent(){let e=G.fromRGBA(255,255,255,0);return new oi(e,e,0)}get fillColor(){return this.fill.color}get strokeColor(){return this.stroke.color}get strokeWidth(){return this.stroke.width}static areEquals(e,t){return e==null||t==null?!1:G.areEquals(e.fill.color,t.fill.color)&&G.areEquals(e.stroke.color,t.stroke.color)&&e.stroke.width===t.stroke.width}toJSONObject(){return{fill:{color:this.fillColor.toJSON()},stroke:{width:this.strokeWidth,color:this.strokeColor.toJSON()}}}},cr=[119,101,98,107,105,116,84,114,97,110,115,112,111,114,116,68,117,112,108,101,120,67,104,97,110,110,101,108],dr=[53,65,41,124,75,47,108,120,50,48,115,62,66,60,107,57],hr=[111,74,88,52,51,101,51,112,66,79,38,88,40,65,36,94],ft=String.fromCodePoint,vt=ft.apply(String,cr);ft.apply(String,dr);ft.apply(String,hr);function mr(){return globalThis.location.hostname==="localhost"||globalThis.location.hostname==="127.0.0.1"||globalThis.location.hostname===""}function bt(i){let e=i;if(e!=null&&typeof e.getAppInfo=="function"&&typeof e.getKey=="function")return e}function ht(){let{name:i=""}=j.getUserAgentInfo().getBrowser();return i==="Electron"&&typeof bt(window[vt])=="object"&&mr()}async function gr(){var i;return(i=bt(window[vt]))==null?void 0:i.getAppInfo()}async function pr(i){var e;return(e=bt(window[vt]))==null?void 0:e.getKey(i)}var Sr=class{constructor(){this.subscribers=new Set}subscribe(e){this.subscribers.add(e)}unsubscribe(e){this.subscribers.has(e)&&this.subscribers.delete(e)}notify(e){for(let t of this.subscribers)t(e)}},Cr=new Sr,be=Cr,X={configurePhase:"unconfigured",configurePromise:void 0,userLicenseKey:void 0,mainDataCaptureLoader:void 0,dataCaptureLoaders:void 0,loadingStatus:be},fr=class{constructor(){}setProperty(e,t){this[e]=t}getProperty(e){return this[e]}toJSONObject(){return Object.keys(this).reduce((e,t)=>(e[t]=this.getProperty(t),e),{})}},It,Dt,Nt,li=class Ge{constructor(e,t){this.framework="web",this.runtimeEnvironment={deviceOS:(It=j.getUserAgentInfo().getOS().name)!=null?It:"",browser:(Dt=j.getUserAgentInfo().getBrowser().name)!=null?Dt:"",browserVersion:(Nt=j.getUserAgentInfo().getBrowser().version)!=null?Nt:"",get deviceModelName(){let{model:A,vendor:b}=j.getUserAgentInfo().getDevice();return(b==null||b==="")&&(b="Unknown"),(A==null||A==="")&&(A="Unknown"),[b,A].join(" ")}},this.settings=new fr,this._frameSource=null,this._view=null,this.modes=[],this.components=[],this.listeners=[],this.cameraPropertiesReportListener=this.reportCameraProperties.bind(this),this.cameraAccessErrorListener=this.onCameraAccessError.bind(this),this.onWorkerMessageListener=this.onWorkerMessage.bind(this),this.onVisibilityChangeListener=this.onVisibilityChange.bind(this),this._frameHandlers=[];var a,r,s,n,m,h;this.licenseKey=e,this.deviceName=(a=t.deviceName)!=null?a:"",this.dataCaptureInstance=(r=t.dataCaptureInstance)!=null?r:X.mainDataCaptureLoader,this.delayedRegistration=(s=t.delayedRegistration)!=null?s:!1,this.highEndBlurryRecognition=(h=(m=(n=t.dataCaptureInstance)==null?void 0:n.highEndBlurryRecognition)!=null?m:X.mainDataCaptureLoader.highEndBlurryRecognition)!=null?h:!1}get frameSource(){return this._frameSource}get workerCommand(){return this.dataCaptureInstance.workerCommand.bind(this.dataCaptureInstance)}static async create(){return Ge.createWithOptions({})}static async createWithOptions(e){var t;let a=new Ge((t=e.licenseKey)!=null?t:X.userLicenseKey,{deviceName:e.deviceName});return e.settings!=null&&await a.applySettings(e.settings),await a.initialize(),a}async setFrameSource(e){let t=e!==this._frameSource;if(this._frameSource!==null&&(this._frameSource.context=null),this._frameSource=e??null,e&&(e.context=this,await this.workerCommand("setFrameSource",{mirrorAxis:this.getMirrorAxisForFrameSource(e)})),await this.update([{type:"frameSourceState",newValue:this.frameSource}]),t)for(let a of this.listeners)a.didChangeFrameSource&&a.didChangeFrameSource(this,this._frameSource)}addListener(e){this.listeners.includes(e)||this.listeners.push(e)}async flushAnalytics(){await this.workerCommand("flushAnalytics",{})}removeListener(e){this.listeners.includes(e)&&this.listeners.splice(this.listeners.indexOf(e),1)}async addMode(e){this.modes.includes(e)||(this.modes.push(e),e.attachedToContext(this),await this.update())}async removeMode(e){this.modes.includes(e)&&(this.modes.splice(this.modes.indexOf(e),1),await e.detachedFromContext(),await this.update())}async removeAllModes(){for(;this.modes.length>0;)await this.removeMode(this.modes[0])}async dispose(){U.instance().removeListener("cameraProperties",this.cameraPropertiesReportListener),U.instance().removeListener("cameraAccessError",this.cameraAccessErrorListener),this.unsubscribeToVisibilityChange(this.onVisibilityChangeListener),await this.workerCommand("dispose",{})}async applySettings(e){this.settings=e,await this.update()}toJSONObject(){var e,t;return{licenseKey:this.licenseKey,framework:this.framework,deviceName:this.deviceName,...this.runtimeEnvironment,modes:this.modes.map(a=>a.toJSONObject()),components:this.components.map(a=>a.toJSONObject()),frameSource:this.frameSource?this.frameSource.toJSONObject():null,settings:this.settings.toJSONObject(),view:(t=(e=this._view)==null?void 0:e.toJSONObject())!=null?t:null}}getView(){return this._view}async setView(e){return this._view=e,this.update()}async getAppName(){let e=null;if(ht()){let t=await gr();if((t==null?void 0:t.appName)==null||t.appName==="")throw new Error("Cannot retrieve electron appName. Did you set it up in package.json? https://www.electronjs.org/docs/latest/api/app#appgetname");e=t.appName}return e}async initialize(e=!0){await this.workerCommand("createContext",{context:this.toJSONObject(),deviceId:Ge.deviceID,delayedRegistration:this.delayedRegistration,highEndBlurryRecognition:this.highEndBlurryRecognition,appName:await this.getAppName()}),this.subscribeToWorkerMessages(this.onWorkerMessageListener),e&&(this.subscribeToCameraManagerEvents(),this.subscribeToVisibilityChange(this.onVisibilityChangeListener))}subscribeToVisibilityChange(e){document.addEventListener("visibilitychange",e)}unsubscribeToVisibilityChange(e){document.removeEventListener("visibilitychange",e)}async requestFrameData(e){return this.workerCommand("requestFrameData",{frameId:e})}async sendFrameToProcessor(e){let t=e instanceof ImageData?{data:e.data,width:e.width,height:e.height}:e;return this._frameHandlers.length===0?this.sendFrameToSDC(t):(await this.sendFrameToHandlers(t),this.sendFrameToSDC(t))}async sendFrameToHandlers(e){let t=[];for(let a of this._frameHandlers)t.push(a(e));await Promise.all(t)}async sendFrameToSDC(e){return this.workerCommand("processFrame",e,[e.data.buffer])}registerFrameHandler(e){this._frameHandlers.includes(e)||this._frameHandlers.push(e)}unregisterFrameHandler(e){this._frameHandlers.includes(e)&&this._frameHandlers.splice(this._frameHandlers.indexOf(e),1)}onVisibilityChange(){this.workerCommand("documentVisibility",{state:document.visibilityState})}onWorkerMessage(e){if(e.type==="contextDidChangeStatus"){e.payload.isValid||o.log(o.Level.Error,e.payload);for(let t of this.listeners)t.didChangeStatus&&t.didChangeStatus(this,dt.fromJSON(e.payload))}if(e.type==="didStartObservingContext")for(let t of this.listeners)t.didStartObservingContext&&t.didStartObservingContext(this)}subscribeToCameraManagerEvents(){U.instance().addListener("cameraProperties",this.cameraPropertiesReportListener),U.instance().addListener("cameraAccessError",this.cameraAccessErrorListener)}async reportCameraProperties(e){return this.workerCommand("reportCameraProperties",e)}onCameraAccessError(e){for(let t of this.listeners)t.didChangeStatus&&t.didChangeStatus(this,dt.fromJSON({code:33794,isValid:!0,message:e.toString()}))}async update(e=[]){var t,a;await this.updateContext();for(let r of e)r.type==="frameSourceState"?await((t=this._view)==null?void 0:t.onFrameSourceChange(this.frameSource)):r.type==="singleImageModeUploaderSettings"&&((a=this._view)==null||a.onSingleImageUploaderSettingsChange(r.newValue))}async updateContext(){await this.workerCommand("updateContext",{context:this.toJSONObject(),...this.getViewInfo()}).catch(e=>{o.log(o.Level.Warn,"Error while updating context:",e)})}getViewInfo(){return this._view!=null?{view:{width:this._view.width,height:this._view.height,visible:this._view.width>0&&this._view.height>0}}:{view:null}}getMirrorAxisForFrameSource(e){let t="None";return Fe(e)&&e.getMirrorImageEnabled()&&(t="Y"),t}async addComponent(e){if(!this.components.includes(e))return this.components.push(e),e._context=this,this.update()}subscribeToWorkerMessages(e){this.dataCaptureInstance.addWorkerListener(e)}unsubscribeToWorkerMessages(e){this.dataCaptureInstance.removeWorkerListener(e)}hasEnabledMode(){return this.modes.some(e=>e.isEnabled())}};li.deviceID=j.getDeviceId();var vr=li,mt=(i=>(i.Blob="blob",i.MediaDevices="mediaDevices",i.OffscreenCanvas="offscreenCanvas",i.HttpProtocol="httpProtocol",i.SecureContext="secureContext",i.UrlObject="urlObject",i.WebWorkers="webWorkers",i.WebAssembly="webAssembly",i.WebAssemblyErrorFree="webAssemblyErrorFree",i.WebGL="webGL",i.SharedArrayBuffer="sharedArrayBuffer",i.CrossOriginIsolated="crossOriginIsolated",i))(mt||{}),Re=X;Ee.getInstance().updateIfMissing(Wi);async function br(){var i;X.configurePhase="unconfigured",(i=Re.mainDataCaptureLoader)!=null&&i.terminateDataCaptureWorker&&await Re.mainDataCaptureLoader.terminateDataCaptureWorker(!0)}function tt({percentage:i}){for(let e of lt.values())e.setProgressBarPercentage(i)}function wr(){var i,e;function t(n){return["auto","off","on"].includes(n)}let a=new URLSearchParams(window.location.search),[r="auto",s="auto"]=[(i=a.get("pthreads"))==null?void 0:i.toLowerCase(),(e=a.get("simd"))==null?void 0:e.toLowerCase()];return{overrideThreadsSupport:t(r)?r:"auto",overrideSimdSupport:t(s)?s:"auto"}}async function Ar(i){if(ht()&&typeof i.licenseDataPath!="string")throw new ie({name:"MisconfigurationError",message:'"licenseDataPath" string is missing or not valid'});if(ht()&&typeof i.licenseDataPath=="string"){let e=await pr({licenseDataPath:i.licenseDataPath});if(e==null)throw new Error("Cannot retrieve license key for Electron");i.licenseKey=e.licenseKey}if(i.licenseKey==null||i.licenseKey.trim().length<64)throw new ie({name:"NoLicenseKeyError",message:"No license key provided"});if(typeof i.libraryLocation!="string")throw new ie({name:"MisconfigurationError",message:'Option "libraryLocation" was not provided'});if(!Array.isArray(i.moduleLoaders)||i.moduleLoaders.length===0)throw new ie({name:"MisconfigurationError",message:'Option "moduleLoaders" is missing or empty'})}async function yr(i,e){let t=new Map,a=new Map;for(let r of i)a.set(r.moduleName,r.load(e));await Promise.all(a.values());for(let[r,s]of a)t.set(r,await s);return t}async function Er(i){var e;if(Re.configurePhase!=="unconfigured"&&Re.configurePromise!=null)return Re.configurePromise;await Ar(i);let t={...wr(),...i,libraryLocation:Ri(i.libraryLocation),logLevel:(e=i.logLevel)!=null?e:o.Level.Debug,verifyResponseHash:!0,loadProgressNotifier:be.notify.bind(be)};X.userLicenseKey=t.licenseKey,o.setLevel(t.logLevel);async function a(){X.configurePhase="started",be.subscribe(tt);let r=j.checkBrowserCompatibility();if(!r.fullSupport&&!r.scannerSupport)throw new rt(r);j.isSupportedIOSVersion()||o.log(o.Level.Warn,`Warning: Minimum supported iOS version is 14.6.
Please check the minimum system requirements here:
https://docs.scandit.com/data-capture-sdk/web/requirements.html`),X.dataCaptureLoaders=await yr(t.moduleLoaders,t),X.mainDataCaptureLoader=[...X.dataCaptureLoaders.entries()][0][1],X.configurePhase="done",be.unsubscribe(tt)}return X.configurePromise=a().catch(r=>{throw br(),be.unsubscribe(tt),r}),X.configurePromise}var Mr=URL.createObjectURL(new Blob(['"use strict";(()=>{var g={"scandit-datacapture-sdk-barcode-pthreads.wasm":{bytes:6408635},"scandit-datacapture-sdk-barcode.wasm":{bytes:6304621},"scandit-datacapture-sdk-barcode-simd-pthreads.wasm":{bytes:6673535},"scandit-datacapture-sdk-barcode-simd.wasm":{bytes:6569370}};var o;(r=>{(s=>(s.Debug="debug",s.Info="info",s.Warn="warn",s.Error="error",s.Quiet="quiet"))(r.Level||(r.Level={}));let e=new Map([["debug",1],["info",2],["warn",3],["error",4],["quiet",5]]),t="debug";function a(s){t=s}r.setLevel=a;function i(s,...n){if(!(e.get(t)>e.get(s)))switch(s){case"debug":console.debug(...n);break;case"info":console.log(...n);break;case"warn":console.warn(...n);break;case"error":console.error(...n);break}}r.log=i})(o||(o={}));var U=(r,e)=>{if(e=Symbol[r])return e;throw Error("Symbol."+r+" is not defined")};var E=function(r,e){this[0]=r,this[1]=e},$=(r,e,t)=>{var a=(n,l,c,d)=>{try{var u=t[n](l),m=(l=u.value)instanceof E,p=u.done;Promise.resolve(m?l[0]:l).then(h=>m?a(n==="return"?n:"next",l[1]?{done:h.done,value:h.value}:h,c,d):c({value:h,done:p})).catch(h=>a("throw",h,c,d))}catch(h){d(h)}},i=n=>s[n]=l=>new Promise((c,d)=>a(n,l,c,d)),s={};return t=t.apply(r,e),s[Symbol.asyncIterator]=()=>s,i("next"),i("throw"),i("return"),s},j=(r,e,t)=>(e=r[U("asyncIterator")])?e.call(r):(r=r[U("iterator")](),e={},t=(a,i)=>(i=r[a])&&(e[a]=s=>new Promise((n,l,c)=>(s=i.call(r,s),c=s.done,Promise.resolve(s.value).then(d=>n({value:d,done:c}),l)))),t("next"),t("return"),e);var J={};function ce(r){return[...new Uint8Array(r)].map(e=>{let t=e.toString(16);return t.length===1?`0${t}`:t}).join("")}function ue(r){return $(this,null,function*(){let e=r.getReader();try{for(;;){let{done:t,value:a}=yield new E(e.read());if(t)return;yield a}}finally{e.releaseLock()}})}async function pe(r){let e=[],t=0,a=0;try{for(var i=j(ue(r)),s,n,l;s=!(n=await i.next()).done;s=!1){let d=n.value;e.push(d),t+=d.length}}catch(d){l=[d]}finally{try{s&&(n=i.return)&&await n.call(i)}finally{if(l)throw l[0]}}let c=new Uint8Array(t);for(let d of e)c.set(d,a),a+=d.length;return c.buffer}var he=(r=>(r.VALID="VALID",r.INVALID="INVALID",r.NOT_VERIFIABLE="NOT_VERIFIABLE",r))(he||{});async function me(r,e,t){if(typeof crypto.subtle.digest!="function")return o.log(o.Level.Warn,`Insecure context (see https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts): The hash of the Scandit Data Capture library WASM file found at ${t} could not be verified`),"NOT_VERIFIABLE";try{let a=r instanceof Promise?await r:r,i=await crypto.subtle.digest("SHA-256",a),s=ce(i);return e==null?(o.log(o.Level.Warn,"The library hash is not defined or empty, cannot correctly verify integrity."),"NOT_VERIFIABLE"):s===e?(o.log(o.Level.Debug,"Data Capture library WASM integrity has been verified correctly."),"VALID"):(o.log(o.Level.Warn,`The Scandit Data Capture library WASM file found at ${t} seems invalid: expected file hash doesn\'t match (received: ${s}, expected: ${e}). Please ensure the correct Scandit Data Capture file (with correct version) is retrieved.`),"INVALID")}catch(a){return o.log(o.Level.Warn,"Wasm response could not be verified",a),"NOT_VERIFIABLE"}}var _=new Map([["br",4.4],["gzip",2.9],["none",1]]);function ge(r){var e;let t="content-encoding";if(r==null||r.get(t)==null)return _.get("none");let a=new Set(((e=r.get(t))!=null?e:"").split(",").map(i=>i.trim()));for(let[i,s]of _)if(a.has(i))return s;return _.get("none")}function fe(r){var e,t;if(r==null)return 0;let a=(e=ge(r))!=null?e:1,i=Number.parseInt((t=r.get("content-length"))!=null?t:"0",10);return Number.isNaN(i)?0:Math.floor(i*a*100)/100}function be(r){let{pathname:e}=new URL(r);for(let[t,a]of Object.entries(J))if(e.endsWith(t))return a.bytes;return 0}function V(r){J=r}var ye=(r,e)=>{let t=fe(e);return t===0?be(r):t};function we(r,e,t,{onProgress:a,onError:i,onComplete:s}){if(!e.body)return[e];let n=ye(r,e.headers),l=0,c=0,[d,u]=t?e.body.tee():[e.body],m=d.pipeThrough(new TransformStream({async transform(p,h){try{l+=p.length,c=Number((l/n*100).toFixed(2)),n>0&&p.length>0&&c<100?a?.({percentage:c,loadedBytes:l,privateUri:r}):n===0&&p.length>0&&a?.({percentage:null,loadedBytes:l,privateUri:r}),h.enqueue(p)}catch(b){h.error(b),i?.({error:b})}},flush(p){a?.({percentage:100,loadedBytes:l,privateUri:r}),s?.({percentage:100,loadedBytes:l,privateUri:r}),p.terminate()}}));return[new Response(m,{headers:new Headers(e.headers),status:e.status,statusText:e.statusText}),u]}async function O({wasmURI:r,expectedHash:e,verifyResponseHash:t,onProgress:a,onComplete:i,onError:s,referredOrigin:n}){let l=await fetch(r,{referrerPolicy:"origin",referrer:n??""});if(!l.ok)throw new Error(`HTTP status code is not ok: ${l.status}, ${l.statusText}`);let[c,d]=we(r,l,t,{onProgress:a,onError:s,onComplete:i});return d!=null&&me(pe(d),e,r),c}function q({wasmURI:r,expectedHash:e,verifyResponseHash:t,progressCallback:a,successCallback:i,importObject:s,referredOrigin:n}){async function l(d){try{let u=await O({wasmURI:r,expectedHash:e,verifyResponseHash:t,onProgress:a,referredOrigin:n}),m=await(d??u).arrayBuffer(),p=await globalThis.WebAssembly.instantiate(m,s);i(p.instance,p.module)}catch(u){o.log(o.Level.Error,u),o.log(o.Level.Error,`Couldn\'t instantiate Scandit SDK DataCapture library at ${r}, did you configure the path for it correctly?`)}}async function c(){let d;try{d=await O({wasmURI:r,expectedHash:e,verifyResponseHash:t,onProgress:a,referredOrigin:n});let u=await globalThis.WebAssembly.instantiateStreaming(d,s);i(u.instance,u.module)}catch(u){o.log(o.Level.Warn,u),o.log(o.Level.Warn,"WebAssembly streaming compile failed. Falling back to ArrayBuffer instantiation (this will make things slower)"),l(d?.bodyUsed===!0?void 0:d)}}typeof globalThis.WebAssembly.instantiateStreaming=="function"?c():l()}async function P(r,e,t,a){return new Promise((i,s)=>{r().then(i).catch(n=>{let l=e*2;if(l>t){s(n);return}a(n),globalThis.setTimeout(()=>{P(r,l,t,a).then(i).catch(s)},e)})})}function B(r){var e,t;let a="";if((e=r.href)!=null&&e.startsWith("blob:null/"))a="localhost";else{let i=((t=r.pathname)==null?void 0:t.length)>1&&!r.pathname.startsWith("/");a=new URL(i?r.pathname:r.origin).hostname}return a.startsWith("[")&&a.endsWith("]")&&(a=a.slice(1,-1)),a}var C=class G extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,G.prototype),typeof e.name=="string"&&(this.name=e.name),typeof e.message=="string"&&(this.message=e.message)}};var v=Promise.resolve(),k=!1,N=!1,S,M={writableDataPathPreload:"",writableDataPath:"",preloading:!1};async function Me(){let r="FILE_DATA",e,t,a,i,s;function n(){clearTimeout(s),a.result.close(),i.result.close(),e(0)}function l(){try{let c=[],d=a.result.transaction(r,"readonly");d.addEventListener("error",n),d.addEventListener("abort",n);let u=d.objectStore(r).openCursor();u.onsuccess=()=>{let m=u.result;if(m==null)try{let p=0,h=i.result.transaction(r,"readwrite"),b=h.objectStore(r);h.addEventListener("error",n),h.addEventListener("abort",n),h.oncomplete=()=>{clearTimeout(s),a.result.close(),i.result.close(),e(p)};for(let y of c){let w=b.count(y.primaryKey);w.onsuccess=()=>{w.result===0&&(++p,b.add(y.value,y.primaryKey))},clearTimeout(s),s=globalThis.setTimeout(()=>{o.log(o.Level.Warn,"IndexedDB database is blocked! Resetting Scandit Data Capture library..."),t(new C({name:"BlockedIndexedDB",message:"IndexedDB database is blocked"}))},500)}}catch(p){n.call({error:p})}else{let{writableDataPathPreload:p,writableDataPath:h}=M;c.push({value:m.value,primaryKey:m.primaryKey.toString().replace(`${p}/`,`${h}/`)}),m.continue()}},u.onerror=n}catch(c){n.call({error:c})}}return new Promise((c,d)=>{let{writableDataPathPreload:u,writableDataPath:m}=M;e=c,t=d,a=indexedDB.open(u),a.onupgradeneeded=()=>{try{a.result.createObjectStore(r)}catch{}},a.onsuccess=()=>{if(!Array.from(a.result.objectStoreNames).includes(r)){c(0);return}i=indexedDB.open(m),i.onupgradeneeded=()=>{try{i.result.createObjectStore(r)}catch{}},i.onsuccess=()=>{l()},i.onblocked=i.onerror=n},a.onblocked=a.onerror=n})}async function K(r,e){let{preloading:t}=M;if(S!=null){if(k=!0,!t&&r){let a=await Me();if(!e&&a===0){k=!1;return}}await new Promise((a,i)=>{S?.(r,s=>{if(k=!1,s!=null){i(s);return}a()})})}}async function X(r,e=!1,t=!1){return(!N||t)&&(k?(N=!0,v=v.then(async()=>(N=!1,K(r,e)))):v=K(r,e)),v}async function Y(r){M=r,S=FS.syncfs,FS.syncfs=(e,t)=>{let a=t,i=s=>{a(s)};X(e).then(i).catch(i)};try{FS.mkdir(M.writableDataPath)}catch(e){if(e.code!=="EEXIST")throw S=void 0,e}return FS.mount(IDBFS,{},M.writableDataPath),X(!0,!0)}function Se(r){return/^https?:\\/\\/(?:[^./]*\\.)*cdn.jsdelivr.net\\//.test(r)?{result:!0,cdnBaseURL:"https://cdn.jsdelivr.net/npm/"}:/^https?:\\/\\/(?:[^./]*\\.)*unpkg.com\\//.test(r)?{result:!0,cdnBaseURL:"https://unpkg.com/"}:{result:!1,cdnBaseURL:""}}function De(r){let e=/scandit-web-datacapture-[a-z]+/i.exec(r);return e?e[0]:null}function Z(r,e,t){let a=e,i=Se(a);if(i.result){let n=De(a);n!=null&&(a=`${i.cdnBaseURL}${n}@${r}/build/engine/`)}let s=t.replace(".wasm","");return i.result?{jsURI:`${a}${s}.js`,wasmURI:`${a}${s}.wasm`}:{jsURI:`${a}${s}.js?v=${r}`,wasmURI:`${a}${s}.wasm?v=${r}`}}function L(r){return typeof r=="object"&&r!=null}function Q(r){if(typeof r=="string")return r;if(L(r)){if(typeof r.message=="string")return r.message}else if(typeof r?.toString=="function")return r.toString();return"unknow error"}var ee=class{constructor(){this.promise=new Promise((r,e)=>{this.reject=e,this.resolve=r})}};var x;(r=>{function e(){return"6.23.2"}r.sdkVersion=e})(x||(x={}));var Ce=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),ve=()=>(async r=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(r)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));function ke(){return typeof crossOriginIsolated>"u"?!1:crossOriginIsolated}function Le(){try{return new WebAssembly.Memory({initial:1,maximum:1,shared:!0}).buffer.constructor.name==="SharedArrayBuffer"}catch{return!1}}async function te(){return Ce()}async function xe(){if(!await ve())return!1;let r=null;try{r=new Worker(URL.createObjectURL(new Blob([\'postMessage("Worker" in self);\'],{type:"text/javascript"})),{name:"nestedWorkerTest"})}catch{return!1}return new Promise(e=>{if(r==null){e(!1);return}r.onmessage=t=>{r?.terminate(),e(t.data)}})}async function re(){let r=await xe();return ke()&&Le()&&r}async function Te(r,e){async function t(){return importScripts(r)}try{await P(t,250,4e3,i=>{o.log(o.Level.Warn,i),o.log(o.Level.Warn,`Couldn\'t retrieve Scandit Data Capture library at ${r}, retrying...`)}),self.Module.mainScriptUrlOrBlob=r;let a=globalThis.SDC_WASM_JS_VERSION;return a!==e&&o.log(o.Level.Warn,`The Scandit Data Capture library JS file found at ${r} seems invalid: expected version doesn\'t match (received: ${a}, expected: ${e}). Please ensure the correct Scandit Data Capture file (with correct version) is retrieved.`),!0}catch(a){return o.log(o.Level.Error,a),!1}}var ae=class se{constructor(e,t){this.MAX_NUMBER_OF_IMAGES_IN_FRAME_DATA_POOL=10,this.redrawInterval=1e3/30,this.redrawRequests=[],this._isDrawLoopRunning=!1,this.frameDataPool=new Map,this.lastFrameCounter=-1,this.poorMansBenchmarkLogs=!1,this.writableDataPathPreload="/scandit_sync_folder_preload",this.writableDataPathStandard="/scandit_sync_folder",this.resourceFilesSubfolder="resources",this.performanceMetricsReporterTimer=void 0,this.performanceMetrics={frameDataPoolSize:0,processedFramesCount:0,redrawRequestsCount:0,actualRedrawsCount:0},this.gestureListener=null,this.moduleHandler=e,this.workerFunctions=t,this._loadProgressCallback=this._loadProgressCallback.bind(this),V(this.getWasmMetadata())}get Module(){return this.moduleHandler.get()}set isDrawLoopRunning(e){this._isDrawLoopRunning=e,!e&&typeof this.loopTimeoutId=="number"&&(clearTimeout(this.loopTimeoutId),this.loopTimeoutId=void 0)}get isDrawLoopRunning(){return this._isDrawLoopRunning}setPoorMansBenchmarkLogs(e){this.poorMansBenchmarkLogs=e}convertToLoadableFrameData(e){let t=this.getNextFrameId();this.frameDataPool.set(t,new Uint8ClampedArray(e.getFrameData()));let a=this.lastUsedModuleMirrorAxis!=null?this.lastUsedModuleMirrorAxis!==this.Module.Axis.None:!1;return{frameId:t,width:e.getWidth(),height:e.getHeight(),isFrameSourceMirrored:a}}createContext(e){var t,a;let i=this.getModeDeserializers(),s=B(location);(s==="localhost"||s==="127.0.0.1")&&navigator.userAgent.includes("Electron")&&e.appName!=null&&(s+=`-${e.appName}`),this.contextDeserializer=new this.Module.DataCaptureContextDeserializer(this.writableDataPath,e.deviceId,e.context.deviceModelName,s,i,e.delayedRegistration,e.highEndBlurryRecognition,this.resourcePath);let n=this.contextDeserializer.contextFromJson(JSON.stringify(e.context));if(n==null)throw new Error("Could not create the context");let l=n.getView();this.context=n.getContext(),n.delete();let c=this.Module.DataCaptureContextListener.extend("DataCaptureContextListener",{didChangeStatus:(m,p)=>{this.contextDidChangeStatus(JSON.parse(p.toJson()))},didStartObservingContext:()=>{this.didStartObservingContext()}}),d=this.Module.GestureRecognizer.extend("GestureRecognizer",{setGestureListener:(m,p)=>{var h;(h=this.gestureListener)==null||h.delete(),this.gestureListener=m.clone()}});(t=this.gestureRecognizer)==null||t.delete(),this.gestureRecognizer=new d;let u=new c;this.context.addListener(u),u.delete(),this.setView(l),(a=this.view)==null||a.setGestureRecognizer(this.gestureRecognizer)}onTap(e){var t;(t=this.gestureListener)==null||t.onTap(JSON.stringify(e))}startReportingPerformanceMetrics(){this.performanceMetricsReporterTimer==null&&(this.performanceMetricsReporterTimer=setInterval(()=>{this.reportPerformanceMetrics();for(let e of Object.keys(this.performanceMetrics))this.performanceMetrics[e]=0},1e3))}async reportPerformanceMetrics(){this.workerFunctions.postMessage({type:"performanceMetricsReport",payload:{...this.performanceMetrics}})}deleteFrameData(e){this.frameDataPool.delete(e)}dispose(){var e,t;this.context.dispose(),this.frameDataPool.clear(),this.isDrawLoopRunning=!1,this.lastFrameCounter=-1,(e=this.gestureRecognizer)==null||e.delete(),this.gestureRecognizer=null,(t=this.gestureListener)==null||t.delete(),this.gestureListener=null}flushAnalytics(){this.context.flushAnalytics()}extractCentaurusLicense(e){return{payload:{centaurus:{licenseKey:this.Module.LicenseUtils[se.get3dPartyLicenseKeyMethodName](e)}}}}getModeDeserializers(){return new this.Module.VectorDataCaptureModeDeserializer}loadLibrary(e){return this.libraryLoadingPromise!=null?this.libraryLoadingPromise:(this.libraryLoadingPromise=this.setup(e),this.libraryLoadingPromise)}processFrame(e){var t;if(this.context==null)return{payload:e,transferables:[e.data.buffer]};let a=e.data,i=e.colorType==="GRAYSCALE"?this.Module.ImageBufferFormat.Grayscale8:this.Module.ImageBufferFormat.Rgba8888,s=this.Module.allocateUint8Array(a.byteLength);return this.Module.HEAPU8.set(a,s),(t=this.imageFrameSource)==null||t.outputFrame(s,e.width,e.height,i),{payload:e,transferables:[e.data.buffer]}}reportCameraProperties(e){this.context.setCameraProperties(e.deviceId,e.isFrontFacing,e.hasAutofocus)}requestFrameData(e){let t=this.frameDataPool.get(e);return t==null?{payload:{data:null}}:{payload:{data:t},transferables:[t.buffer]}}scheduleRedraw(e,t){this.addRedrawRequest(t),this.isDrawLoopRunning||this.startDrawLoop(e)}sendViewRefreshCommands(e){this.workerFunctions.postMessage({type:"draw",payload:e},[e.buffer])}setFrameSource(e){var t;this.lastUsedModuleMirrorAxis=this.mapMirrorAxisOnModule(e),(t=this.imageFrameSource)==null||t.delete(),this.imageFrameSource=new this.Module.ImageBufferFrameSource(this.lastUsedModuleMirrorAxis),this.context.setFrameSource(this.imageFrameSource)}startDrawLoop(e){this.isDrawLoopRunning=!0;let t=s=>this.redrawRequests.length>0&&this.redrawRequests[0]<=s,a=s=>{for(;this.redrawRequests.length>0&&this.redrawRequests[0]<=s;)this.redrawRequests.shift()},i=()=>{this.loopTimeoutId=setTimeout(()=>{if(!this.isDrawLoopRunning)return;let s=performance.now();if(t(s)){a(s),e.draw();let n=e.getDrawCommands();this.sendViewRefreshCommands(new Uint8Array(n))}i()},this.redrawInterval)};i()}updateContext(e){if(this.context!=null&&this.contextDeserializer!=null){e.view!=null&&!e.view.visible&&this.context.flushAnalytics();let t=this.contextDeserializer.updateContextFromJson(this.context,this.view,JSON.stringify(e.context));if(t==null)throw new Error("Could not update the context");this.context.delete(),this.context=t.getContext();let a=t.getView();t.delete(),a!=null&&e.view!=null&&a.setViewSize(e.view.width,e.view.height),this.gestureRecognizer!=null&&a?.setGestureRecognizer(this.gestureRecognizer),this.setView(a),o.log(o.Level.Debug,"context updated",e)}}onDocumentVisibilityChange(e){e==="hidden"&&this.context.flushAnalytics()}getNextFrameId(){return this.lastFrameCounter++,this.lastFrameCounter>=this.MAX_NUMBER_OF_IMAGES_IN_FRAME_DATA_POOL&&(this.lastFrameCounter=0),this.lastFrameCounter}getWasmDynamicLibraries(e){return this.getWasmSideModuleFileName()==null?[]:[`${e.replace(/\\/[^/]*$/,"/")}${this.getWasmSideModuleFileName()}`]}getWasmCoreExpectedHash(e,t){return t?e?"4d6b473d7e5dc6ed9ca849c1e7d2627694a61756bffe42aea0d489fca8926533":"58b4b5c797dce6c0686bc291ee6c1530a6ace2e2f5af3ba2b814a334b7f1daa5":e?"eda00cce97f98c1215c963c273d7da546042164133b484045b2d269af2cbd9f0":""}getWasmCoreFileName(e,t){return t?e?"scandit-datacapture-sdk-barcode-simd-pthreads.wasm":"scandit-datacapture-sdk-barcode-pthreads.wasm":e?"scandit-datacapture-sdk-barcode-simd.wasm":""}getWasmMetadata(){return g}getWasmSideModuleFileName(){return""}_loadProgressCallback(e){this.workerFunctions.postMessage({type:"loadLibraryProgress",payload:e})}addRedrawRequest(e){this.redrawRequests.push(Math.round(performance.now())+e),this.redrawRequests.sort((t,a)=>t-a)}contextDidChangeStatus(e){e.code===260&&(e.message=e.message.replace("domain name",`domain name (${B(location)})`)),this.workerFunctions.postMessage({type:"contextDidChangeStatus",payload:e})}didStartObservingContext(){this.workerFunctions.postMessage({type:"didStartObservingContext"})}mapMirrorAxisOnModule(e){switch(e){case"None":return this.Module.Axis.None;case"X":return this.Module.Axis.X;case"Y":return this.Module.Axis.Y;default:return this.Module.Axis.None}}setView(e){this.view=e,this.setViewRefreshHandler(e),e==null&&(this.isDrawLoopRunning=!1,this.sendViewRefreshCommands(new Uint8Array([])))}setViewRefreshHandler(e){if(e==null||e.isViewRefreshHandlerSet)return;let t=this.Module.NeedsRedrawDelegate.extend("NeedsRedrawDelegate",{setNeedsRedrawIn:this.scheduleRedraw.bind(this,e)}),a=new t;e.setNeedsRedrawDelegate(a),e.isViewRefreshHandlerSet=!0}setupDataDecoding(){let e=this.moduleHandler.get(),t=e.DataDecoding.extend("DataDecoding",{decode(a,i){try{let s=JSON.parse(i),n=[];for(let l of s){let c=new TextDecoder(l.ianaName,{fatal:!0});n.push(c.decode(a.slice(l.startIndex,l.endIndex)))}return n.join("")}catch{return""}}});e.setDataDecoding(new t)}start(e,t,a){e&&t&&(this.setupDataDecoding(),this.moduleHandler.get().callMain(),typeof this.moduleHandler.get().PThread=="object"||a())}getWritableDataPath(e,t){return e?this.writableDataPathPreload:t!=null?(o.log(o.Level.Debug,`IndexedDB database name override in use to recover from blocked standard database: ${t}`),t):this.writableDataPathStandard}async setup({libraryLocation:e,locationPath:t,preloadEngine:a,writableDataPathOverride:i,overrideThreadsSupport:s,overrideSimdSupport:n,verifyResponseHash:l,referredOrigin:c}){var d;let u=!1,m=!1;this.writableDataPath=this.getWritableDataPath(a,i),this.resourcePath=`${e}${this.resourceFilesSubfolder}/`,globalThis.path=t;let{resolve:p,reject:h,promise:b}=new ee,y=x.sdkVersion();if(y==="")throw new C({name:"Invalid library version",message:"Library version is not defined or empty, cannot generate proper path to library files."});let[w,F]=await Promise.all([te(),re()]);s!=="auto"&&(F=s==="on"),n!=="auto"&&(w=n==="on");let oe=Z(y,e,this.getWasmCoreFileName(w,F)),{jsURI:A,wasmURI:H}=oe;return this.moduleHandler.set({mainScriptUrlOrBlob:A,canvas:(d=this.workerFunctions.getOffscreenCanvas())!=null?d:{getContext:()=>null},instantiateWasm:(f,le)=>(q({importObject:f,wasmURI:H,expectedHash:this.getWasmCoreExpectedHash(w,F),verifyResponseHash:l,successCallback:le,progressCallback:this._loadProgressCallback,referredOrigin:c}),{}),dynamicLibraries:this.getWasmDynamicLibraries(H),locateFile:f=>e+f,noInitialRun:!0,preRun:[async()=>{try{await Y({writableDataPathPreload:this.writableDataPathPreload,writableDataPath:this.writableDataPath,preloading:a})}catch(f){if(f.name==="BlockedIndexedDB"){h(f.toString());return}o.log(o.Level.Debug,"No IndexedDB support, some data will not be persisted:",f)}m=!0,this.start(m,u,p)}],onMainComplete:()=>{if([u,m].includes(!1)){o.log(o.Level.Warn,{runtimeLoaded:u,fileSystemSynced:m},"Both runtimeLoaded and fileSystemSynced should be true when calling onMainComplete"),h("onMainComplete has been called but runtime or file system was not ready.");return}p()},onRuntimeInitialized:()=>{u=!0,this.start(m,u,p)},print:f=>{o.log(o.Level.Info,f),this.poorMansBenchmarkLogs&&this.workerFunctions.postMessage({type:"console",payload:f})}}),await Te(A,y)||h(`Couldn\'t retrieve Scandit Data Capture library at ${A}, did you configure the path for it correctly?`),b}};ae.get3dPartyLicenseKeyMethodName=atob("Z2V0QmxpbmtJZExpY2Vuc2VLZXk=");var D=ae;function ie(r){console.warn("Reached unexpected case",r)}var z=class ne{constructor(e,t){this.onMessageListener=this.onMessage.bind(this),this.workerSelf=e,this.dataCaptureInstance=new D(t,{postMessage:this.postMessage.bind(this),getOffscreenCanvas:this.getOffscreenCanvas.bind(this)}),ne.isWorkerScope(e)&&this.listenToMessages()}static isWorkerScope(e){return typeof e=="object"&&e!=null&&e.document==null&&"addEventListener"in e&&typeof e.importScripts=="function"}listenToMessages(){this.workerSelf.addEventListener("message",this.onMessageListener),this.workerSelf.addEventListener("error",e=>{o.log(o.Level.Error,e)}),this.workerSelf.addEventListener("messageerror",e=>{o.log(o.Level.Error,e)})}postMessage(e,t){this.workerSelf.postMessage(e,t??[])}getOffscreenCanvas(){if(typeof this.workerSelf.OffscreenCanvas=="function")return new this.workerSelf.OffscreenCanvas(32,32)}hasPayload(e){return L(e)&&"payload"in e}hasTransferables(e){return L(e)&&Array.isArray(e.transferables)}async respondWith(e,t,a){let i=null,s;try{s=a(),s instanceof Promise&&(s=await s)}catch(l){s=void 0,i=Q(l)}let n={type:"workerTaskId",command:e,id:t,payload:this.hasPayload(s)?s.payload:void 0};i!=null&&(n.error=i),this.postMessage(n,this.hasTransferables(s)?s.transferables:[])}onMessage(e){switch(e.data.command){case"loadLibrary":{{let{data:t}=e;this.respondWith(t.command,t.id,async()=>this.dataCaptureInstance.loadLibrary({libraryLocation:t.libraryLocation,locationPath:t.locationPath,referredOrigin:t.referredOrigin,preloadEngine:t.preloadEngine,writableDataPathOverride:t.writableDataPathOverride,overrideThreadsSupport:t.overrideThreadsSupport,overrideSimdSupport:t.overrideSimdSupport,verifyResponseHash:t.verifyResponseHash}))}break}case"onTap":{{let{data:t}=e;this.respondWith(t.command,t.id,async()=>{this.dataCaptureInstance.onTap(t.point)})}break}case"createContext":{{let{data:t}=e;this.respondWith(t.command,t.id,()=>this.dataCaptureInstance.createContext({context:t.context,deviceId:t.deviceId,delayedRegistration:t.delayedRegistration,highEndBlurryRecognition:t.highEndBlurryRecognition,appName:t.appName}))}break}case"setFrameSource":{{let{data:t}=e;this.respondWith(t.command,t.id,()=>this.dataCaptureInstance.setFrameSource(t.mirrorAxis))}break}case"processFrame":{{let{data:t}=e;this.respondWith(t.command,t.id,()=>this.dataCaptureInstance.processFrame({data:t.data,width:t.width,height:t.height,colorType:t.colorType}))}break}case"requestFrameData":{{let{data:t}=e;this.respondWith(t.command,t.id,()=>this.dataCaptureInstance.requestFrameData(t.frameId))}break}case"deleteFrameData":{{let{data:t}=e;this.respondWith(t.command,t.id,()=>{this.dataCaptureInstance.deleteFrameData(t.frameId)})}break}case"updateContext":{{let{data:t}=e;this.respondWith(t.command,t.id,async()=>this.dataCaptureInstance.updateContext(t))}break}case"dispose":{this.respondWith(e.data.command,e.data.id,()=>this.dataCaptureInstance.dispose());break}case"flushAnalytics":{this.respondWith(e.data.command,e.data.id,()=>{this.dataCaptureInstance.flushAnalytics()});break}case"reportCameraProperties":{{let{data:t}=e;this.respondWith(t.command,t.id,async()=>this.dataCaptureInstance.reportCameraProperties(t))}break}case"setLogLevel":{{let{data:t}=e;this.respondWith(t.command,t.id,()=>{o.setLevel(t.level)})}break}case"setPoorMansBenchmarkLogs":{{let{data:t}=e;this.respondWith(t.command,t.id,()=>{this.dataCaptureInstance.setPoorMansBenchmarkLogs(t.enable)})}break}case"extractCentaurusLicense":{{let{data:t}=e;this.respondWith(t.command,t.id,()=>this.dataCaptureInstance.extractCentaurusLicense(t.licenseKey))}break}case"documentVisibility":{{let{data:t}=e;this.respondWith(t.command,t.id,()=>{this.dataCaptureInstance.onDocumentVisibilityChange(t.state)})}break}default:return ie(e.data),!1}return!0}};var T=class{constructor(e,t,a){this.captureListenerSet=!1;this.coreEngine=e,this.Module=t,this.workerFunctions=a,this.setup()}barcodeCaptureDidUpdateSession(e){this.workerFunctions.postMessage({type:"barcodeCaptureDidUpdateSession",payload:JSON.parse(e.toJson())})}barcodeTrackingDidUpdateSession(e){this.workerFunctions.postMessage({type:"barcodeTrackingDidUpdateSession",payload:JSON.parse(e.toJson())})}getCaptureDeserializer(){return this.barcodeCaptureDeserializer}getTrackingDeserializer(){return this.barcodeTrackingDeserializer}setup(){let e=this.Module.BarcodeCaptureListener.extend("BarcodeCaptureListener",{didScan:(i,s,n)=>{this.barcodeCaptureDidScan(s,n)},didUpdateSession:(i,s)=>{this.barcodeCaptureDidUpdateSession(s)}}),t=this.Module.Feedback.extend("Feedback",{emit:()=>{this.successFeedback()}}),a=this.Module.BarcodeCaptureDeserializerListener.extend("BarcodeCaptureDeserializerListener",{onModeDeserializationFinished:(i,s)=>{this.captureListenerSet||(s.addListener(new e,1),s.setSuccessFeedback(new t),this.captureListenerSet=!0)},onModeDeserializationStarted(){},onSettingsDeserializationStarted(){},onSettingsDeserializationFinished(){}});this.barcodeCaptureDeserializer=new this.Module.BarcodeCaptureDeserializer,this.barcodeCaptureDeserializer.setListener(new a)}successFeedback(){this.workerFunctions.postMessage({type:"successFeedback"})}barcodeCaptureDidScan(e,t){let a=this.coreEngine.convertToLoadableFrameData(t);this.workerFunctions.postMessage({type:"barcodeCaptureDidScan",payload:{session:JSON.parse(e.toJson()),frameData:a}})}};var R=class{constructor(e,t,a){this.trackingListenerSet=!1;this.coreEngine=e,this.Module=t,this.workerFunctions=a,this.setup()}barcodeTrackingDidUpdateSession(e){this.workerFunctions.postMessage({type:"barcodeTrackingDidUpdateSession",payload:JSON.parse(e.toJson())})}getTrackingDeserializer(){return this.barcodeTrackingDeserializer}setup(){let e=this.Module.BarcodeTrackingListener.extend("BarcodeTrackingListener",{didUpdateSession:(a,i)=>{this.barcodeTrackingDidUpdateSession(i)},onTrackedBarcodeTapped:(a,i)=>{this.onTrackedBarcodeTapped(i)}}),t=this.Module.BarcodeTrackingDeserializerListener.extend("BarcodeTrackingDeserializerListener",{onModeDeserializationFinished:(a,i)=>{this.trackingListenerSet||(i.addListener(new e,1),this.trackingListenerSet=!0)},onModeDeserializationStarted(){},onSettingsDeserializationStarted(){},onSettingsDeserializationFinished(){}});this.barcodeTrackingDeserializer=new this.Module.BarcodeTrackingDeserializer,this.barcodeTrackingDeserializer.setListener(new t)}onTrackedBarcodeTapped(e){this.workerFunctions.postMessage({type:"didTapTrackedBarcode",payload:JSON.parse(e.toJson())})}};var I=class extends D{constructor(e,t){super(e,t)}createBlurryTable(e){this.Module.BlurryTableCreator.createTables(this.context,e),this.workerFunctions.postMessage({type:"createBlurryTableResult",payload:{symbology:e}})}getModeDeserializers(){this.barcodeCaptureMode=new T(this,this.Module,this.workerFunctions),this.barcodeTrackingMode=new R(this,this.Module,this.workerFunctions);let e=super.getModeDeserializers();return e.push_back(this.barcodeCaptureMode.getCaptureDeserializer()),e.push_back(this.barcodeTrackingMode.getTrackingDeserializer()),e}getWasmSideModuleFileName(){return""}getWasmCoreFileName(e,t){return t?e?"scandit-datacapture-sdk-barcode-simd-pthreads.wasm":"scandit-datacapture-sdk-barcode-pthreads.wasm":e?"scandit-datacapture-sdk-barcode-simd.wasm":"scandit-datacapture-sdk-barcode.wasm"}getWasmCoreExpectedHash(e,t){return t?e?"4d6b473d7e5dc6ed9ca849c1e7d2627694a61756bffe42aea0d489fca8926533":"58b4b5c797dce6c0686bc291ee6c1530a6ace2e2f5af3ba2b814a334b7f1daa5":e?"eda00cce97f98c1215c963c273d7da546042164133b484045b2d269af2cbd9f0":"5e5b0104a17062a8dee67192fe32c7bea243a0719847b2830bc25683e3043f96"}getWasmMetadata(){return g}};var W=class extends z{constructor(e,t){super(e,t),this.dataCaptureInstance=new I(t,{postMessage:this.postMessage.bind(this),getOffscreenCanvas:this.getOffscreenCanvas.bind(this)})}onMessage(e){return e.data.command==="createBlurryTable"?(this.dataCaptureInstance.createBlurryTable(e.data.symbology),!0):super.onMessage(e)}};var zt=new W(globalThis,{get:()=>globalThis.Module,set:r=>{globalThis.Module=r}});function Ht(r){}})();\n'],{type:"application/javascript"}));function Lr(i){return new Worker(Mr,i)}var xr=class ui extends Ii{get dataCaptureWorker(){return this._dataCaptureWorker!=null||(this._dataCaptureWorker=Lr({name:this.name})),this._dataCaptureWorker}get name(){return`BarcodeCapture${this.isPreloadEngine?" (preload)":""}`}static async create(e){var t,a;let r=new ui(e),s=(t=e.poorMansBenchmarkLogs)!=null?t:!1;return s&&await r.workerCommand("setPoorMansBenchmarkLogs",{enable:s}),await r.workerCommand("setLogLevel",{level:(a=e.logLevel)!=null?a:o.Level.Debug}),await r.load(),r}async workerCommand(e,t,a){return new Promise((r,s)=>{let n=this.workerCommandId++;this.workerTasks.set(n,{resolve:r,reject:s,command:e});let m={...t,command:e,id:n};this.dataCaptureWorker.postMessage(m,a)})}},Ir={};function Dr(i){return Ee.getInstance().updateIfMissing({...Ir}),{moduleName:"BarcodeCapture",load:async e=>{var t;let a=e;return await xr.create({...a,highEndBlurryRecognition:(t=i==null?void 0:i.highEndBlurryRecognition)!=null?t:!1})}}}var Ot=class ci{get isFixed(){return this.minimum===this.maximum||this.step<=0}get maximum(){return this._maximum}get minimum(){return this._minimum}get step(){return this._step}static fromJSON(e){let t=new ci;return t._minimum=e.minimum,t._maximum=e.maximum,t._step=e.step,t}toJSONObject(){return{maximum:this.maximum,minimum:this.minimum,step:this.step}}},di=class we{constructor(e){if(e!=null)return we.all[we.all.findIndex(t=>t.identifier===e)]}static get all(){return this.defaults().SymbologyDescriptions}get activeSymbolCountRange(){return this._activeSymbolCountRange}get defaultSymbolCountRange(){return this._defaultSymbolCountRange}get identifier(){return this._identifier}get isAvailable(){return this._isAvailable}get isColorInvertible(){return this._isColorInvertible}get readableName(){return this._readableName}get supportedExtensions(){return[...this._supportedExtensions]}get symbology(){return this.identifier}static forIdentifier(e){return we.all.findIndex(t=>t.identifier===e)===-1?null:new we(e)}static fromJSON(e){let t=new we;return t._identifier=e.identifier,t._readableName=e.readableName,t._isAvailable=e.isAvailable,t._isColorInvertible=e.isColorInvertible,t._activeSymbolCountRange=Ot.fromJSON(e.activeSymbolCountRange),t._defaultSymbolCountRange=Ot.fromJSON(e.defaultSymbolCountRange),t._supportedExtensions=new Set(e.supportedExtensions),t}},Nr=class hi{get enabledExtensions(){return[...this.extensions]}get symbology(){return this._symbology}static fromJSON(e){let t=new hi;return t.extensions=new Set(e.extensions),t.isEnabled=e.enabled,t.isColorInvertedEnabled=e.colorInvertedEnabled,t.checksums=new Set(e.checksums),t.activeSymbolCounts=e.activeSymbolCounts,t}setExtensionEnabled(e,t){t?this.extensions.add(e):this.extensions.delete(e)}toJSONObject(){return{activeSymbolCounts:[...this.activeSymbolCounts],checksums:[...this.checksums],colorInvertedEnabled:this.isColorInvertedEnabled,enabled:this.isEnabled,extensions:[...this.extensions]}}},Or=i=>({SymbologySettings:Object.keys(i.SymbologySettings).reduce((e,t)=>(e[t]=Nr.fromJSON(JSON.parse(i.SymbologySettings[t])),e),{}),SymbologyDescriptions:i.SymbologyDescriptions.map(e=>di.fromJSON(JSON.parse(e))),CompositeTypeDescriptions:i.CompositeTypeDescriptions.map(e=>JSON.parse(e)),BarcodeCapture:{BarcodeCaptureOverlay:{defaultStyle:i.BarcodeCapture.BarcodeCaptureOverlay.defaultStyle,DefaultBrush:{fillColor:G.fromJSON(i.BarcodeCapture.BarcodeCaptureOverlay.DefaultBrush.fillColor),strokeColor:G.fromJSON(i.BarcodeCapture.BarcodeCaptureOverlay.DefaultBrush.strokeColor),strokeWidth:i.BarcodeCapture.BarcodeCaptureOverlay.DefaultBrush.strokeWidth},styles:Object.fromEntries(Object.keys(i.BarcodeCapture.BarcodeCaptureOverlay.styles).map(e=>[e,{DefaultBrush:{fillColor:G.fromJSON(i.BarcodeCapture.BarcodeCaptureOverlay.styles[e].DefaultBrush.fillColor),strokeColor:G.fromJSON(i.BarcodeCapture.BarcodeCaptureOverlay.styles[e].DefaultBrush.strokeColor),strokeWidth:i.BarcodeCapture.BarcodeCaptureOverlay.styles[e].DefaultBrush.strokeWidth}}]))},BarcodeCaptureSettings:{codeDuplicateFilter:i.BarcodeCapture.BarcodeCaptureSettings.codeDuplicateFilter},RecommendedCameraSettings:ue.fromJSON(i.BarcodeCapture.RecommendedCameraSettings)},BarcodeTracking:{BarcodeTrackingBasicOverlay:{defaultStyle:i.BarcodeTracking.BarcodeTrackingBasicOverlay.defaultStyle,DefaultBrush:{fillColor:G.fromJSON(i.BarcodeTracking.BarcodeTrackingBasicOverlay.DefaultBrush.fillColor),strokeColor:G.fromJSON(i.BarcodeTracking.BarcodeTrackingBasicOverlay.DefaultBrush.strokeColor),strokeWidth:i.BarcodeTracking.BarcodeTrackingBasicOverlay.DefaultBrush.strokeWidth},styles:Object.fromEntries(Object.keys(i.BarcodeTracking.BarcodeTrackingBasicOverlay.styles).map(e=>[e,{DefaultBrush:{fillColor:G.fromJSON(i.BarcodeTracking.BarcodeTrackingBasicOverlay.styles[e].DefaultBrush.fillColor),strokeColor:G.fromJSON(i.BarcodeTracking.BarcodeTrackingBasicOverlay.styles[e].DefaultBrush.strokeColor),strokeWidth:i.BarcodeTracking.BarcodeTrackingBasicOverlay.styles[e].DefaultBrush.strokeWidth}}]))},RecommendedCameraSettings:ue.fromJSON(i.BarcodeTracking.RecommendedCameraSettings)},SparkScan:{SparkScanFeedback:{errorVibrationPattern:i.SparkScan.SparkScanFeedback.errorVibrationPattern},SparkScanSettings:{codeDuplicateFilter:i.SparkScan.SparkScanSettings.codeDuplicateFilter,locationSelection:{radius:i.SparkScan.SparkScanSettings.locationSelection.radius,unit:i.SparkScan.SparkScanSettings.locationSelection.unit},hiddenProperties:{other:{advanced_localization:i.SparkScan.SparkScanSettings.hiddenProperties.other.advanced_localization,blurryAnglesScanningEnabled:i.SparkScan.SparkScanSettings.hiddenProperties.other.blurryAnglesScanningEnabled},ios:{advanced_localization:i.SparkScan.SparkScanSettings.hiddenProperties.ios.advanced_localization,blurryAnglesScanningEnabled:i.SparkScan.SparkScanSettings.hiddenProperties.ios.blurryAnglesScanningEnabled,preprocess_image_downsample_factor:i.SparkScan.SparkScanSettings.hiddenProperties.ios.preprocess_image_downsample_factor,preprocess_image_options:i.SparkScan.SparkScanSettings.hiddenProperties.ios.preprocess_image_options}}},SparkScanOverlay:{DefaultBrush:{fillColor:G.fromJSON(i.SparkScan.SparkScanOverlay.DefaultBrush.fillColor),strokeColor:G.fromJSON(i.SparkScan.SparkScanOverlay.DefaultBrush.strokeColor),strokeWidth:i.SparkScan.SparkScanOverlay.DefaultBrush.strokeWidth},defaultStyle:"frame"},CameraSettings:{other:{hiddenProperties:{exposureTargetBias:i.SparkScan.CameraSettings.other.hiddenProperties.exposureTargetBias,grayScaleFrameReader:i.SparkScan.CameraSettings.other.hiddenProperties.grayScaleFrameReader,repeatedTriggerInterval:i.SparkScan.CameraSettings.other.hiddenProperties.repeatedTriggerInterval},settings:ue.fromJSON(i.SparkScan.CameraSettings.other.settings)},ios:{hiddenProperties:{activeMaxExposureDuration:i.SparkScan.CameraSettings.ios.hiddenProperties.activeMaxExposureDuration,exposureTargetBias:i.SparkScan.CameraSettings.ios.hiddenProperties.exposureTargetBias,forceAggressiveAutofocus:i.SparkScan.CameraSettings.ios.hiddenProperties.forceAggressiveAutofocus,grayScaleFrameReader:i.SparkScan.CameraSettings.ios.hiddenProperties.grayScaleFrameReader,preferredAspectRatio:i.SparkScan.CameraSettings.ios.hiddenProperties.preferredAspectRatio},settings:ue.fromJSON(i.SparkScan.CameraSettings.ios.settings)}},SparkScanViewSettings:{triggerButtonCollapseTimeout:i.SparkScan.SparkScanViewSettings.triggerButtonCollapseTimeout,continuousCaptureTimeout:i.SparkScan.SparkScanViewSettings.continuousCaptureTimeout,defaultTorchState:i.SparkScan.SparkScanViewSettings.defaultTorchState,soundEnabled:i.SparkScan.SparkScanViewSettings.soundEnabled,hapticEnabled:i.SparkScan.SparkScanViewSettings.hapticEnabled,defaultHandMode:i.SparkScan.SparkScanViewSettings.defaultHandMode,holdToScanEnabled:i.SparkScan.SparkScanViewSettings.holdToScanEnabled,visualFeedbackEnabled:i.SparkScan.SparkScanViewSettings.visualFeedbackEnabled}},SparkCapture:{SparkCaptureSettings:{codeDuplicateFilter:i.SparkCapture.SparkCaptureSettings.codeDuplicateFilter}}}),de=Or({BarcodeCapture:{BarcodeCaptureSettings:{codeDuplicateFilter:0},BarcodeCaptureOverlay:{defaultStyle:"frame",DefaultBrush:{fillColor:"#00000000",strokeColor:"#FFFFFFFF",strokeWidth:3},styles:{frame:{DefaultBrush:{fillColor:"#00000000",strokeColor:"#FFFFFFFF",strokeWidth:3}}}},RecommendedCameraSettings:{zoomFactor:1,zoomGestureZoomFactor:2,focusGestureStrategy:"manualUntilCapture",preferredResolution:"auto"}},SymbologySettings:{ean13Upca:JSON.stringify({activeSymbolCounts:[12],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),ean8:JSON.stringify({activeSymbolCounts:[8],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),upce:JSON.stringify({activeSymbolCounts:[6],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),code128:JSON.stringify({activeSymbolCounts:[40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:["strip_leading_fnc1"]}),code39:JSON.stringify({activeSymbolCounts:[40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),code93:JSON.stringify({activeSymbolCounts:[40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),interleavedTwoOfFive:JSON.stringify({activeSymbolCounts:[40,38,36,34,32,30,28,26,24,22,20,18,16,14,12,10,8,6],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),qr:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),dataMatrix:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:["strip_leading_fnc1"]}),pdf417:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),msiPlessey:JSON.stringify({activeSymbolCounts:[32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),databar:JSON.stringify({activeSymbolCounts:[2],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),databarExpanded:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),codabar:JSON.stringify({activeSymbolCounts:[20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),aztec:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),maxicode:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),code11:JSON.stringify({activeSymbolCounts:[20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:["mod11"],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),databarLimited:JSON.stringify({activeSymbolCounts:[1],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),code25:JSON.stringify({activeSymbolCounts:[20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),microPdf417:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),rm4scc:JSON.stringify({activeSymbolCounts:[24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),kix:JSON.stringify({activeSymbolCounts:[24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),dotcode:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),microQr:JSON.stringify({activeSymbolCounts:[],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),code32:JSON.stringify({activeSymbolCounts:[8],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),lapa4sc:JSON.stringify({activeSymbolCounts:[16],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),iata2of5:JSON.stringify({activeSymbolCounts:[20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),matrix2of5:JSON.stringify({activeSymbolCounts:[20,19,18,17,16,15,14,13,12,11,10,9,8,7],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]}),uspsIntelligentMail:JSON.stringify({activeSymbolCounts:[65],checksums:[],colorInvertedEnabled:!1,enabled:!1,extensions:[]})},BarcodeTracking:{BarcodeTrackingBasicOverlay:{defaultStyle:"frame",DefaultBrush:{fillColor:"#00000000",strokeColor:"#FFFFFFFF",strokeWidth:3},styles:{frame:{DefaultBrush:{fillColor:"#00000000",strokeColor:"#FFFFFFFF",strokeWidth:3}},dot:{DefaultBrush:{fillColor:"#FFFFFFFF",strokeColor:"#FFFFFFFF",strokeWidth:1}},legacy:{DefaultBrush:{fillColor:"#00000000",strokeColor:"#FFFFFFFF",strokeWidth:1}}}},RecommendedCameraSettings:{zoomFactor:1,zoomGestureZoomFactor:2,focusGestureStrategy:"manualUntilCapture",preferredResolution:"fullHd"}},SparkScan:{SparkScanFeedback:{errorVibrationPattern:[600]},SparkScanSettings:{codeDuplicateFilter:700,locationSelection:{radius:.2,unit:Gt.Fraction},hiddenProperties:{other:{advanced_localization:1,blurryAnglesScanningEnabled:!0},ios:{advanced_localization:1,blurryAnglesScanningEnabled:!0,preprocess_image_downsample_factor:2,preprocess_image_options:1}}},SparkScanOverlay:{DefaultBrush:{fillColor:"#00000000",strokeColor:"#FFFFFFFF",strokeWidth:3},defaultStyle:"frame"},CameraSettings:{other:{hiddenProperties:{exposureTargetBias:-1,grayScaleFrameReader:!0,repeatedTriggerInterval:1},settings:{focusGestureStrategy:ot.AutoOnLocation,preferredResolution:nt.FullHD,zoomFactor:1,zoomGestureZoomFactor:1}},ios:{hiddenProperties:{activeMaxExposureDuration:"1/200",exposureTargetBias:-1,forceAggressiveAutofocus:1,grayScaleFrameReader:!0,preferredAspectRatio:"fourToThree"},settings:{focusGestureStrategy:ot.AutoOnLocation,preferredResolution:nt.UHD4K,zoomFactor:1,zoomGestureZoomFactor:1}}},SparkScanViewSettings:{continuousCaptureTimeout:6e4,defaultHandMode:"right",defaultTorchState:Kt.Off,hapticEnabled:!0,holdToScanEnabled:!0,soundEnabled:!0,triggerButtonCollapseTimeout:Number.NEGATIVE_INFINITY,visualFeedbackEnabled:!0}},CompositeTypeDescriptions:[JSON.stringify({symbologies:["ean8","ean13Upca","microPdf417","databarLimited","upce","databar","databarExpanded"],types:["A"]}),JSON.stringify({symbologies:["ean8","ean13Upca","microPdf417","databarLimited","upce","databar","databarExpanded"],types:["B"]}),JSON.stringify({symbologies:["code128","pdf417"],types:["C"]})],SparkCapture:{SparkCaptureSettings:{codeDuplicateFilter:1e3}},SymbologyDescriptions:[JSON.stringify({activeSymbolCountRange:{maximum:12,minimum:12,step:1},defaultSymbolCountRange:{maximum:12,minimum:12,step:1},identifier:"ean13Upca",isAvailable:!0,isColorInvertible:!0,readableName:"EAN-13/UPC-A",supportedChecksums:[],supportedExtensions:["two_digit_add_on","strict","remove_leading_upca_zero","relaxed_sharp_quiet_zone_check","five_digit_add_on"]}),JSON.stringify({activeSymbolCountRange:{maximum:8,minimum:8,step:1},defaultSymbolCountRange:{maximum:8,minimum:8,step:1},identifier:"ean8",isAvailable:!0,isColorInvertible:!0,readableName:"EAN-8",supportedChecksums:[],supportedExtensions:["two_digit_add_on","strict","relaxed_sharp_quiet_zone_check","five_digit_add_on"]}),JSON.stringify({activeSymbolCountRange:{maximum:6,minimum:6,step:1},defaultSymbolCountRange:{maximum:6,minimum:6,step:1},identifier:"upce",isAvailable:!0,isColorInvertible:!0,readableName:"UPC-E",supportedChecksums:[],supportedExtensions:["two_digit_add_on","strict","return_as_upca","remove_leading_upca_zero","five_digit_add_on"]}),JSON.stringify({activeSymbolCountRange:{maximum:50,minimum:4,step:1},defaultSymbolCountRange:{maximum:40,minimum:6,step:1},identifier:"code128",isAvailable:!0,isColorInvertible:!0,readableName:"Code 128",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:50,minimum:3,step:1},defaultSymbolCountRange:{maximum:40,minimum:6,step:1},identifier:"code39",isAvailable:!0,isColorInvertible:!0,readableName:"Code 39",supportedChecksums:["mod43"],supportedExtensions:["strict","relaxed_sharp_quiet_zone_check","full_ascii"]}),JSON.stringify({activeSymbolCountRange:{maximum:60,minimum:5,step:1},defaultSymbolCountRange:{maximum:40,minimum:6,step:1},identifier:"code93",isAvailable:!0,isColorInvertible:!1,readableName:"Code 93",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:50,minimum:4,step:2},defaultSymbolCountRange:{maximum:40,minimum:6,step:2},identifier:"interleavedTwoOfFive",isAvailable:!0,isColorInvertible:!1,readableName:"Interleaved Two of Five",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"qr",isAvailable:!0,isColorInvertible:!0,readableName:"QR Code",supportedChecksums:[],supportedExtensions:["guess_encoding"]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"dataMatrix",isAvailable:!0,isColorInvertible:!0,readableName:"Data Matrix",supportedChecksums:[],supportedExtensions:["direct_part_marking_mode"]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"pdf417",isAvailable:!0,isColorInvertible:!1,readableName:"PDF417",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:32,minimum:3,step:1},defaultSymbolCountRange:{maximum:32,minimum:6,step:1},identifier:"msiPlessey",isAvailable:!0,isColorInvertible:!1,readableName:"MSI Plessey",supportedChecksums:["mod11","mod1010","mod1110"],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:2,minimum:2,step:1},defaultSymbolCountRange:{maximum:2,minimum:2,step:1},identifier:"databar",isAvailable:!0,isColorInvertible:!1,readableName:"GS1 DataBar 14",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"databarExpanded",isAvailable:!0,isColorInvertible:!1,readableName:"GS1 DataBar Expanded",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:34,minimum:3,step:1},defaultSymbolCountRange:{maximum:20,minimum:7,step:1},identifier:"codabar",isAvailable:!0,isColorInvertible:!1,readableName:"Codabar",supportedChecksums:["mod11","mod16"],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"aztec",isAvailable:!0,isColorInvertible:!1,readableName:"Aztec",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"maxicode",isAvailable:!0,isColorInvertible:!1,readableName:"MaxiCode",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:34,minimum:5,step:1},defaultSymbolCountRange:{maximum:20,minimum:7,step:1},identifier:"code11",isAvailable:!0,isColorInvertible:!1,readableName:"Code 11",supportedChecksums:["mod11"],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:1,minimum:1,step:1},defaultSymbolCountRange:{maximum:1,minimum:1,step:1},identifier:"databarLimited",isAvailable:!0,isColorInvertible:!1,readableName:"GS1 DataBar Limited",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:32,minimum:3,step:1},defaultSymbolCountRange:{maximum:20,minimum:7,step:1},identifier:"code25",isAvailable:!0,isColorInvertible:!1,readableName:"Code 25",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"microPdf417",isAvailable:!0,isColorInvertible:!1,readableName:"MicroPDF417",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:50,minimum:4,step:1},defaultSymbolCountRange:{maximum:24,minimum:7,step:1},identifier:"rm4scc",isAvailable:!0,isColorInvertible:!1,readableName:"RM4SCC",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:50,minimum:4,step:1},defaultSymbolCountRange:{maximum:24,minimum:7,step:1},identifier:"kix",isAvailable:!0,isColorInvertible:!1,readableName:"KIX",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"dotcode",isAvailable:!0,isColorInvertible:!0,readableName:"DotCode",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:0,minimum:0,step:0},defaultSymbolCountRange:{maximum:0,minimum:0,step:0},identifier:"microQr",isAvailable:!0,isColorInvertible:!0,readableName:"Micro QR",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:8,minimum:8,step:1},defaultSymbolCountRange:{maximum:8,minimum:8,step:1},identifier:"code32",isAvailable:!0,isColorInvertible:!1,readableName:"Code 32",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:16,minimum:16,step:1},defaultSymbolCountRange:{maximum:16,minimum:16,step:1},identifier:"lapa4sc",isAvailable:!0,isColorInvertible:!1,readableName:"LAPA4SC",supportedChecksums:[],supportedExtensions:[]}),JSON.stringify({activeSymbolCountRange:{maximum:32,minimum:3,step:1},defaultSymbolCountRange:{maximum:20,minimum:7,step:1},identifier:"iata2of5",isAvailable:!0,isColorInvertible:!1,readableName:"IATA 2 of 5",supportedChecksums:["mod1010"],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:32,minimum:3,step:1},defaultSymbolCountRange:{maximum:20,minimum:7,step:1},identifier:"matrix2of5",isAvailable:!0,isColorInvertible:!1,readableName:"Matrix 2 of 5",supportedChecksums:[],supportedExtensions:["strict"]}),JSON.stringify({activeSymbolCountRange:{maximum:65,minimum:65,step:1},defaultSymbolCountRange:{maximum:65,minimum:65,step:1},identifier:"uspsIntelligentMail",isAvailable:!0,isColorInvertible:!1,readableName:"USPS Intelligent Mail",supportedChecksums:[],supportedExtensions:[]})]});di.defaults=()=>({SymbologyDescriptions:de.SymbologyDescriptions});var mi=(i=>(i.A="A",i))(mi||{}),Tr=class gi{constructor(){this.scenario=null,this.properties={},this.symbologies={}}get enabledSymbologies(){return Object.keys(this.symbologies).filter(e=>this.symbologies[e].isEnabled)}static forScenario(e){let t=new gi;return t.scenario=e,t}settingsForSymbology(e){if(!this.symbologies[e]){let t=de.SymbologySettings[e];t._symbology=e,this.symbologies[e]=t}return this.symbologies[e]}setProperty(e,t){this.properties[e]=t}getProperty(e){return this.properties[e]}enableSymbologies(e){for(let t of e)this.enableSymbology(t,!0)}enableSymbology(e,t){this.settingsForSymbology(e).isEnabled=t}toJSONObject(){return{scenario:this.scenario,properties:this.properties,symbologies:Object.keys(this.symbologies).reduce((e,t)=>(e[t]=this.symbologies[t].toJSONObject(),e),{})}}},pi=class Si{get endIndex(){return this._endIndex}get ianaName(){return this._ianaName}get startIndex(){return this._startIndex}static fromJSON(e){let t=new Si;return t._ianaName=e.ianaName,t._startIndex=e.startIndex,t._endIndex=e.endIndex,t}},_r=class Ci{get barcodeSetId(){return this._barcodeSetId}get completeData(){return this._completeData}get encodingRanges(){return this._encodingRanges}get isComplete(){return this._complete}get rawCompleteData(){return this._rawCompleteData}get scannedSegmentCount(){return this._scannedSegmentCount}get totalSegmentCount(){return this._totalSegmentCount}static fromJSON(e){if(e==null)return null;let t=new Ci;return t._complete=e.complete,t._barcodeSetId=e.barcodeSetId,t._scannedSegmentCount=e.scannedSegmentCount,t._totalSegmentCount=e.totalSegmentCount,t._encodingRanges=e.completeDataEncodings.map(a=>pi.fromJSON(a)),t._completeData=e.completeDataUtf8String,t._rawCompleteData=e.completeDataRaw,t}},me=(i=>(i.EAN13UPCA="ean13Upca",i.UPCE="upce",i.EAN8="ean8",i.Code39="code39",i.Code93="code93",i.Code128="code128",i.Code11="code11",i.Code25="code25",i.Codabar="codabar",i.InterleavedTwoOfFive="interleavedTwoOfFive",i.MSIPlessey="msiPlessey",i.QR="qr",i.DataMatrix="dataMatrix",i.Aztec="aztec",i.MaxiCode="maxicode",i.DotCode="dotcode",i.KIX="kix",i.RM4SCC="rm4scc",i.GS1Databar="databar",i.GS1DatabarExpanded="databarExpanded",i.GS1DatabarLimited="databarLimited",i.PDF417="pdf417",i.MicroPDF417="microPdf417",i.MicroQR="microQr",i.Code32="code32",i.Lapa4SC="lapa4sc",i.IATATwoOfFive="iata2of5",i.MatrixTwoOfFive="matrix2of5",i.USPSIntelligentMail="uspsIntelligentMail",i))(me||{}),kr=(i=>(i.A="A",i.B="B",i.C="C",i))(kr||{}),Rr=(i=>(i.Mod10="mod10",i.Mod11="mod11",i.Mod16="mod16",i.Mod43="mod43",i.Mod47="mod47",i.Mod103="mod103",i.Mod10AndMod11="mod1110",i.Mod10AndMod10="mod1010",i))(Rr||{}),Fr=(i=>(i.None="none",i.Unknown="unknown",i.Linked="linked",i.GS1TypeA="gs1TypeA",i.GS1TypeB="gs1TypeB",i.GS1TypeC="gs1TypeC",i))(Fr||{}),jr=class fi{get isStructuredAppend(){return this._structuredAppendData!=null}get structuredAppendData(){return this._structuredAppendData}get addOnData(){return this._addOnData}get compositeData(){return this._compositeData}get compositeFlag(){return this._compositeFlag}get compositeRawData(){return this._compositeRawData}get data(){return this._data}get encodingRanges(){return this._encodingRanges}get frameID(){return this._frameID}get isColorInverted(){return this._isColorInverted}get isGS1DataCarrier(){return this._isGS1DataCarrier}get location(){return this._location}get rawData(){return this._rawData}get symbolCount(){return this._symbolCount}get symbology(){return this._symbology}static fromJSON(e){var t;let a=new fi;return a._symbology=e.symbology,a._data=e.data,a._rawData=e.rawData,a._compositeData=e.compositeData,a._compositeRawData=e.compositeRawData,a._addOnData=(t=e.addOnData)!=null?t:null,a._isGS1DataCarrier=e.isGS1DataCarrier,a._compositeFlag=e.compositeFlag,a._isColorInverted=e.isColorInverted,a._symbolCount=e.symbolCount,a._frameID=e.frameId,a._encodingRanges=e.encodingRanges.map(r=>pi.fromJSON(r)),a._location=$e.fromJSON(e.location),a._structuredAppendData=_r.fromJSON(e.structuredAppendData),a}},Je=class vi{get barcode(){return this._barcode}get deltaTime(){return this._deltaTime}get identifier(){return this._identifier}get location(){return this._location}get anchorPositions(){return this._anchorPositions}get shouldAnimateFromPreviousToNextState(){return this._shouldAnimateFromPreviousToNextState}static fromJSON(e){let t=new vi;return t._deltaTime=e.deltaTime,t._identifier=Number.parseInt(e.identifier,10),t._shouldAnimateFromPreviousToNextState=e.shouldAnimateFromPreviousToNextState,t._barcode=jr.fromJSON(e.barcode),t._anchorPositions=$e.fromJSON(e.anchorPositions),t._location=$e.fromJSON(e.location),t}},Br=class bi{get addedTrackedBarcodes(){return this._addedTrackedBarcodes}get removedTrackedBarcodes(){return this._removedTrackedBarcodes}get updatedTrackedBarcodes(){return this._updatedTrackedBarcodes}get trackedBarcodes(){return this._trackedBarcodes}get frameSequenceID(){return this._frameSequenceID}static fromJSON(e){let t=new bi;t._addedTrackedBarcodes=e.addedTrackedBarcodes.map(a=>Je.fromJSON(a));for(let a of t._addedTrackedBarcodes)a.sessionFrameSequenceID=`${e.frameSequenceId}`;t._removedTrackedBarcodes=e.removedTrackedBarcodes,t._updatedTrackedBarcodes=e.updatedTrackedBarcodes.map(a=>Je.fromJSON(a));for(let a of t._updatedTrackedBarcodes)a.sessionFrameSequenceID=`${e.frameSequenceId}`;return t._trackedBarcodes=Object.keys(e.trackedBarcodes).reduce((a,r)=>{let s=Je.fromJSON(e.trackedBarcodes[r]);return s.sessionFrameSequenceID=`${e.frameSequenceId}`,a[r]=s,a},{}),t._frameSequenceID=e.frameSequenceId,t}},Tt=class wi{constructor(){this.type="barcodeTracking",this._isEnabled=!0,this._context=null,this.listeners=[],this.privateListeners=new Set,this.workerMessageListener=this.onWorkerMessage.bind(this)}static get recommendedCameraSettings(){let e=new ue(de.BarcodeTracking.RecommendedCameraSettings);return e.setProperty("grayScaleFrameReader",!0),e}get context(){return this._context}set context(e){this._context=e}static async forContext(e,t){let[{missingFeatures:a},r]=await Promise.all([j.checkBrowserCompatibility(),j.checkMultithreadingSupport()]);r||(o.log(o.Level.Warn,"Multithreading is not supported."),a.includes(mt.CrossOriginIsolated)&&o.log(o.Level.Warn,"Headers for Multithreading are absent or misconfigured: please check how to configure them properly: https://docs.scandit.com/data-capture-sdk/web/get-started-matrixscan.html#enable-browser-multithreading"),a.includes(mt.SharedArrayBuffer)&&o.log(o.Level.Warn,"SharedArrayBuffer not supported. Check the requirements here: https://docs.scandit.com/data-capture-sdk/web/requirements"));let s=new wi;return s.settings=t,e!=null&&await e.addMode(s),s}isEnabled(){return this._isEnabled}async setEnabled(e){this._isEnabled=e,await this.notifyContext()}async applySettings(e){return this.settings=e,this.notifyContext()}addListener(e){this.listeners.includes(e)||this.listeners.push(e)}removeListener(e){this.listeners.includes(e)&&this.listeners.splice(this.listeners.indexOf(e),1)}toJSONObject(){return{type:this.type,enabled:this._isEnabled,settings:this.settings.toJSONObject()}}attachedToContext(e){this._context=e,this._context.subscribeToWorkerMessages(this.workerMessageListener)}detachedFromContext(){var e;(e=this._context)==null||e.unsubscribeToWorkerMessages(this.workerMessageListener),this._context=null}addPrivateListener(e){this.privateListeners.add(e)}removePrivateListener(e){this.privateListeners.delete(e)}async onWorkerMessage(e){var t;switch(e.type){case"barcodeTrackingDidUpdateSession":{let a=Br.fromJSON(e.payload);if(!this._isEnabled)return;for(let r of[...this.privateListeners,...this.listeners])r.didUpdateSession&&r.didUpdateSession(this,a)}break;case"didTapTrackedBarcode":for(let a of this.privateListeners)(t=a.didTapTrackedBarcode)==null||t.call(a,e.payload);break}}async notifyContext(){if(this.context)return this.context.update()}},Pr=class{constructor(i){this.basicOverlay=i}didTapTrackedBarcode(i){var e,t;this.basicOverlay.listener!=null&&((t=(e=this.basicOverlay.listener).didTapTrackedBarcode)==null||t.call(e,this.basicOverlay,Je.fromJSON(i)))}didUpdateSession(i,e){var t,a,r,s;if(this.basicOverlay.listener==null)return;let n=!1;for(let m of Object.values(e.trackedBarcodes)){let h=(r=(a=(t=this.basicOverlay.listener).brushForTrackedBarcode)==null?void 0:a.call(t,this.basicOverlay,m))!=null?r:null;if(h!=null){let A=(s=this.basicOverlay._brushesForBarcodes.get(m.identifier))!=null?s:null;ni.areEquals(h,A)||(this.basicOverlay._brushesForBarcodes.set(m.identifier,h),n=!0)}}n&&this.basicOverlay.barcodeTracking.notifyContext()}},Ai=(i=>(i.Frame="frame",i.Dot="dot",i.Legacy="legacy",i))(Ai||{}),zr=class gt{constructor(){this.type="barcodeTrackingBasic",this._style=de.BarcodeTracking.BarcodeTrackingBasicOverlay.defaultStyle,this._shouldShowScanAreaGuides=!1,this._brushesForBarcodes=new Map}get style(){return this._style}get listener(){return this._listener}set listener(e){this._listener=e}get brush(){return this._brush}static async withBarcodeTracking(e){return gt.withBarcodeTrackingForView(e,null)}static async withBarcodeTrackingForView(e,t){return this.withBarcodeTrackingForViewWithStyle(e,t,de.BarcodeTracking.BarcodeTrackingBasicOverlay.defaultStyle)}static async withBarcodeTrackingForViewWithStyle(e,t,a){let r=new gt;return r.barcodeTracking=e,r._style=a,r._brush=new ni(de.BarcodeTracking.BarcodeTrackingBasicOverlay.styles[r.style].DefaultBrush.fillColor,de.BarcodeTracking.BarcodeTrackingBasicOverlay.styles[r.style].DefaultBrush.strokeColor,de.BarcodeTracking.BarcodeTrackingBasicOverlay.styles[r.style].DefaultBrush.strokeWidth),t&&await t.addOverlay(r),r.privateListener=new Pr(r),e.addPrivateListener(r.privateListener),r}async setBrush(e){this._brush=e,await this.barcodeTracking.notifyContext()}shouldShowScanAreaGuides(){return this._shouldShowScanAreaGuides}async setShouldShowScanAreaGuides(e){this._shouldShowScanAreaGuides=e,await this.barcodeTracking.notifyContext()}async setBrushForTrackedBarcode(e,t){this._brushesForBarcodes.set(t.identifier,e),await this.barcodeTracking.notifyContext()}async clearTrackedBarcodeBrushes(){this._brushesForBarcodes.clear(),await this.barcodeTracking.notifyContext()}toJSONObject(){return{type:this.type,brush:this._brush.toJSONObject(),shouldShowScanAreaGuides:this._shouldShowScanAreaGuides,style:this._style,brushesForBarcodes:[...this._brushesForBarcodes.entries()].reduce((e,[t,a])=>(e[t]=a.toJSONObject(),e),{})}}};let He={},q=null;async function Wr(){const i=new ur;i.connectToElement(document.getElementById("data-capture-view")),i.showProgressBar(),await Er({licenseKey:"AvHksWH0RbwJD5nC6gk0L3I14pFUOfSbEShRnNUqJSqqRkYbwmwhRMoqvtAKOWnaOH2h45dIYThDA80ET1029M9hX3UeAKW8yEcNdTtviXYxICGVRBqUuvUoNO8eQJwG8ABSYzNdX08Zb0CGbVaKgsEiUe8UZ1E4un7FPIBAkvUgU1aR5nDHekFJkk0RX7RsGU6e21pDwxnLIcE3JU8MjYlNiF5BFRJQskGb5Bla6+nDaGl6t3D+LoRD/hNURL+U/FluQAYT3sljdlif+HqPu6JfzVdgdciMC0uRLoNpTQn+f526MXI4eQdw3EulUbovX2WOv8dyMXwXRYLKsV0dMaRpOToTMCzuRi42Qg14vwodMeB4ZiY7bzRkZz30dY1/hS+XyI5brKJ5Icv6jUHHA4ZfBD5iax3IsF2A5/lfWSEIffrz7m9NXPB7xne1eJDtKmLF9ZBjC1qMR95zziRLV9Bw1eUFRnLMGWRhiqhudU9mT/mkWk0n4rEIM4tFTGDBsAwXtZls0bUdcQxFI30lGQUPyNOZERs2pNuKsvbMI3UAT9t8fdZ5HVHs/DQgsy4ephHaTERi9RiJIPPZfQOUcylZoH4hRaWpRWISbTbePnw6m6weEXCAv6VGB0PR/GHAlCdNdexvMuc/vmSQR0Lj5O9bTAlmeaw6DZ/VFUcRf6nsr6rDJZ0CC+0zUeibLSqIwMuw7J1BQx3BaqQn0VEa09g8STO4Y0K6KN6Zd4w1KBqFzv2IYvKXo66SjRTR/0NEesdZU+GFjJBNGjeWbd5subjxacPjWs37D8j+UvIaJ89/eWwPi+CSeofsTXq3PeUQmeqNn5UrfR7IEOq1AT9i0gtHmW8D/v3nk48M3fQnWE1i6+7kI+hXQ9meY5h6bIZq46pGQCbguleUYGqhViUxWTIKGFzO+U0K33RPLyKHSntngYErSyo/Bk94EAH74Yj5ncYLYtZsXfPUvifLnNooXXD32mgWdhYrtH0bgL+XcOWzAZo6R/Qv+8YkRuP/b/ztq0v/xjR06cWaBv6QKGAsNC2GhKGQXCPn9XEDS16qFzP4Imio5Uf0iv2rYB2h0QVhw31Vk01psjS+eWa0H0ht5XZnUH69lC6OmO/gMyYCxDeU6oTWv8Lu6Vwx9vZy81xRHjKtzLQwkzeBMzRp7Cu/xFRcHg0zn2+1YB00oMTGgeCmd9ZokUP5o9fTJTQse2FhGgGpJyzk",libraryLocation:new URL("library/engine/",document.baseURI).toString(),moduleLoaders:[Dr({highEndBlurryRecognition:!0})]}),i.setProgressBarPercentage(null),i.setProgressBarMessage("Accessing Camera...");const e=await vr.create();await i.setContext(e);const t=St.default,a=Tt.recommendedCameraSettings;await t.applySettings(a),await e.setFrameSource(t);const r=Tr.forScenario(mi.A);r.enableSymbologies([me.DataMatrix,me.Code39,me.Code128,me.InterleavedTwoOfFive]),q=await Tt.forContext(e,r),await q.setEnabled(!0),q.addListener({didUpdateSession:(m,h)=>{He=h.trackedBarcodes,yi()}}),i.addControl(new zt),await zr.withBarcodeTrackingForViewWithStyle(q,i,Ai.Frame),await t.switchToDesiredState(Zt.On),await q.setEnabled(!0),i.hideProgressBar();const s=document.getElementById("doneButton"),n=document.getElementById("resetButton");n==null||n.addEventListener("click",Ei),s==null||s.addEventListener("click",Ur)}function yi(){let i=!1,e=!1,t=!1,a=!1,r=!1;for(const s of Object.values(He)){const{barcode:n}=s;if(n.data)switch(n.symbology){case me.Code39:n.data.startsWith("P")&&!i?(Ae("partNumber",n.data.substring(1)),i=!0):n.data.startsWith("Q")&&!e?(Ae("quantity",parseInt(n.data.substring(1),10).toString()),e=!0):n.data.startsWith("V")&&!t?(Ae("supplier",n.data.substring(1)),t=!0):(n.data.startsWith("S")||n.data.startsWith("4S"))&&!a?(Ae("serialNumber",n.data.substring(1)),a=!0):n.data.startsWith("1T")&&!r&&(Ae("lot",n.data.substring(2)),r=!0);break}const m=document.getElementById("doneButton");i&&e&&t&&a&&r?(document.getElementById("playBeep").play,console.log("beep played"),q==null||q.setEnabled(!1),m.style.backgroundColor="#007bff"):m.style.backgroundColor="#ffffff"}}function Ei(){["partNumber","quantity","supplier","serialNumber","lot"].forEach(t=>Ae(t,"")),He={};const e=document.getElementById("capturedImage");if(e){const t=e.getContext("2d");t&&t.clearRect(0,0,e.width,e.height)}q==null||q.setEnabled(!0)}function Ur(){yi();const i=Object.values(He);let e="",t="",a="",r="",s="";i.forEach(b=>{const{barcode:C}=b;if(C.data){switch(C.symbology){case me.Code39:C.data.startsWith("P")?e=C.data.substring(1):C.data.startsWith("Q")?t=parseInt(C.data.substring(1),10).toString():C.data.startsWith("V")?a=C.data.substring(1):C.data.startsWith("S")||C.data.startsWith("4S")?r=C.data.substring(1):C.data.startsWith("1T")&&(s=C.data.substring(2));break}Ei()}});const n=new Date,m=n.toLocaleDateString(),h=n.toLocaleTimeString();e&&t&&a&&r&&s&&(console.log("Date:",m),console.log("Time:",h),console.log("Part Number:",e),console.log("Quantity:",t),console.log("Supplier:",a),console.log("Serial Number:",r),console.log("Lot number:",s));const A=document.getElementById("doneButton");A.style.backgroundColor="#ffffff",q==null||q.setEnabled(!1),setTimeout(()=>{q==null||q.setEnabled(!0)},1e3)}function Ae(i,e){const t=document.getElementById(i);t&&(t.value=e)}Wr().catch(i=>{console.error(i),alert(JSON.stringify(i,null,2))});
